[
{
	"uri": "//localhost:1313/vi/",
	"title": "Threat Detection &amp; Response Workshop",
	"tags": [],
	"description": "",
	"content": "Phát hiện và Ứng phó Mối đe dọa Tổng quan Overall Workshop này được thiết kế để cung cấp cho bạn một cái nhìn tổng quan về các dịch vụ phát hiện và ứng phó mối đe dọa trên AWS, sau đó đi sâu vào các tình huống sử dụng thực tế, các phương pháp tốt nhất, và những kịch bản cụ thể. Workshop sẽ khởi đầu bằng phần giới thiệu tổng quan về các dịch vụ, tiếp đến là các chủ đề nâng cao về phát hiện và ứng phó mối đe dọa với các mô-đun tập trung vào giải pháp đa dịch vụ, tích hợp hệ thống, điều phối tùy chỉnh, và xử lý các tình huống đe dọa cụ thể. Tất cả các nội dung này được thiết kế nhằm trang bị cho bạn kiến thức và kỹ năng để quản lý và vận hành hệ thống một cách an toàn và hiệu quả hơn trên nền tảng AWS.\nHầu hết tài nguyên trong workshop này được tạo từ các tài khoản AWS workshop, ngoại trừ phần 5.3, nơi bạn có thể tìm hiểu sâu hơn về \u0026ldquo;Automated Security Response\u0026rdquo; AWS Solution.\nContent Introduction Giới thiệu về các dịch vụ phát hiện và ứng phó mối đe dọa Tích hợp Dịch vụ AWS và Giải pháp Đối tác Quản lý và Ưu tiên các phát hiện bảo mật Tự động hóa thông báo và ứng phó Mô phỏng kịch bản bảo mật Quản lý Lỗ hổng Phần mềm Dọn dẹp tài nguyên "
},
{
	"uri": "//localhost:1313/vi/2-introduction-to-threat-detection-and-response-services/2.1-aws-security-hub/",
	"title": "AWS Security Hub",
	"tags": [],
	"description": "",
	"content": "Nội dung Security Hub - Tổng quan Security Hub - Bảng điều khiển Security Hub - Phát hiện bảo mật Security Hub - Chi phí Security Hub - Thông báo "
},
{
	"uri": "//localhost:1313/vi/7/7.1/",
	"title": "Cập nhật bản vá cho EC2 với Patch Manager",
	"tags": [],
	"description": "",
	"content": " Tìm số lượng phát hiện bảo mật theo sản phẩm trong Security Hub bằng cách mở trang Insights và nhấp vào Insight: 23. Top products by counts of findings. https://us-east-1.console.aws.amazon.com/securityhub/home?region=us-east-1#/insights/arn:aws:securityhub:::insight/securityhub/default/28 Lưu ý rằng một phần đáng kể các phát hiện bảo mật trong môi trường của bạn đến từ Inspector.\nNhấp vào Inspector để xem danh sách các phát hiện cá nhân. Dựa trên tiêu đề của các phát hiện này, có vẻ như hầu hết, nếu không muốn nói là tất cả, đều là lỗ hổng phần mềm.\nĐiều hướng đến bảng điều khiển Inspector. https://us-east-1.console.aws.amazon.com/inspector/v2/home?region=us-east-1#/dashboard Từ bảng điều khiển Inspector, bạn có thể nhanh chóng thấy rằng hầu hết các EC2 instance và hàm Lambda của bạn đang được quét. Bạn cũng có thể thấy các lỗ hổng ảnh hưởng đến nhiều instance và image nhất. Tình huống / Báo cáo vấn đề: Nhóm của bạn đã nhận thấy ngày càng nhiều các phát hiện bảo mật từ Amazon Inspector. Nhóm của bạn đã bật Inspector để liên tục quét Amazon Elastic Compute Cloud (EC2), các hàm AWS Lambda và container image trong Amazon ECR để tìm lỗ hổng phần mềm. Tuy nhiên, dựa trên số lượng phát hiện, có vẻ như không có ai đang quản lý các lỗ hổng này. Bạn đã được giao nhiệm vụ xác định và thiết lập quản lý bản vá cho các instance EC2 của mình, bắt đầu với những instance đang được sử dụng cho phát triển.\nAmazon Inspector là một dịch vụ quản lý lỗ hổng liên tục quét các khối lượng công việc AWS của bạn để tìm lỗ hổng phần mềm và tiếp xúc mạng không mong muốn. Amazon Inspector tự động phát hiện và quét các Amazon EC2 instance đang chạy, các container image trong Amazon Elastic Container Registry (Amazon ECR), và các hàm AWS Lambda để tìm lỗ hổng phần mềm đã biết và tiếp xúc mạng không mong muốn.\nAmazon Inspector tạo ra một phát hiện khi nó phát hiện ra lỗ hổng phần mềm hoặc vấn đề cấu hình mạng. Một phát hiện mô tả lỗ hổng, xác định tài nguyên bị ảnh hưởng, đánh giá mức độ nghiêm trọng của lỗ hổng và cung cấp hướng dẫn khắc phục. Bạn có thể phân tích các phát hiện bằng cách sử dụng bảng điều khiển Amazon Inspector hoặc xem và xử lý các phát hiện của bạn thông qua các dịch vụ AWS khác.\nPatch Manager, một khả năng của AWS Systems Manager, tự động hóa quá trình cập nhật các node được quản lý với các bản cập nhật liên quan đến bảo mật và các loại cập nhật khác. Bạn có thể sử dụng Patch Manager để áp dụng các bản vá cho cả hệ điều hành và ứng dụng. (Trên Windows Server, hỗ trợ ứng dụng bị giới hạn ở các bản cập nhật cho ứng dụng do Microsoft phát hành.) Bạn có thể sử dụng Patch Manager để cài đặt Service Packs trên các Windows node và thực hiện nâng cấp phiên bản nhỏ trên các Linux node. Bạn có thể vá các nhóm Amazon Elastic Computing Cloud (Amazon EC2) instance, thiết bị biên, máy chủ tại chỗ và máy ảo (VM) theo loại hệ điều hành.\nBạn có thể quét các instance để chỉ xem báo cáo về các bản vá bị thiếu hoặc bạn có thể quét và tự động cài đặt tất cả các bản vá bị thiếu.\nPatch Manager sử dụng các bản vá baseline, bao gồm các quy tắc phê duyệt tự động các bản vá trong vài ngày kể từ khi chúng được phát hành, cùng với các danh sách tùy chọn về các bản vá được chấp thuận và bị từ chối. Khi một hoạt động vá diễn ra, Patch Manager so sánh các bản vá hiện đang được áp dụng cho một node được quản lý với những bản vá nên được áp dụng theo các quy tắc thiết lập trong bản vá baseline. Bạn có thể chọn để Patch Manager chỉ hiển thị cho bạn một báo cáo về các bản vá thiếu (Scan), hoặc bạn có thể chọn để Patch Manager tự động cài đặt tất cả các bản vá mà nó tìm thấy là thiếu từ một nút được quản lý (Scan và cài đặt).\nTrong phần này bạn sẽ:\nXác định bản vá baseline Quét các instance của bạn với AWS-RunPatchBaseline qua Run Command Xem xét việc tuân thủ bản vá cho các node được quản lý Cài đặt các bản vá bị thiếu bằng Run Command Lên lịch các hoạt động vá lỗi bằng cách sử dụng chính sách bản vá Xem lại liên kết được tạo bởi chính sách bản vá Xác định bản vá baseline Điều hướng đến Systems Manager và mở Patch Manager từ thanh điều hướng bên trái. https://us-east-1.console.aws.amazon.com/systems-manager/patch-manager?region=us-east-1\nNhấp vào Start with an overview, dưới nút \u0026ldquo;Create patch policy\u0026rdquo;. Nhấp vào tab Patch baselines, sau đó chọn Create patch baseline. Trên trang \u0026ldquo;Create patch baseline\u0026rdquo;, nhập tên \u0026ldquo;AmazonLinux2SecAndNonSecBaseline\u0026rdquo; trong phần Patch baseline details.\nTrên trang \u0026ldquo;Create patch baseline\u0026rdquo;, chọn hệ điều hành \u0026ldquo;Amazon Linux 2\u0026rdquo; trong phần Patch baseline details.\nTrong phần Approval rules for operating systems, chọn \u0026ldquo;All\u0026rdquo; Products, \u0026ldquo;Security\u0026rdquo; \u0026ldquo;Bugfix\u0026rdquo; Classification, cũng như Mức độ nghiêm trọng \u0026ldquo;Critical\u0026rdquo; và \u0026ldquo;Important\u0026rdquo; Severity. Chọn Approve patches after a specified number of days và nhập \u0026ldquo;14\u0026rdquo; ngày. Cuối cùng, chọn \u0026ldquo;Critical\u0026rdquo; cho Compliance reporting.\nXác nhận rằng Operating system rule 1 trông giống như hình ảnh sau.\nNhấp vào Add rule để tạo \u0026ldquo;Operating system rule 2\u0026rdquo;.\nĐối với \u0026ldquo;Operating system rule 2\u0026rdquo;, để tất cả các giá trị mặc định, ngoại trừ việc đặt tự động phê duyệt thành 7 ngày, Compliance reporting to \u0026ldquo;Medium\u0026rdquo;, và chọn ô để bao gồm các cập nhật không bảo mật.\nXác nhận rằng Operating system rule 2 trông giống như hình ảnh sau.\nỞ cuối trang, nhấp vào Create patch baseline. Bạn sẽ thấy một thông báo ở đầu trang ghi rằng \u0026ldquo;Create patch baseline request succeeded\u0026rdquo;. Bản vá Baseline này sẽ chỉ quét hoặc cài đặt các bản cập nhật dựa trên các tiêu chí được xác định trong các quy tắc phê duyệt bản vá. Nếu một EC2 instance thiếu một bản vá dựa trên các tiêu chí được chỉ định trong baseline bản vá, instance đó sẽ bị gắn cờ là không tuân thủ. Kết quả: Quét các instance với AWS-RunPatchBaseline qua Run Command Sử dụng Run Command, một khả năng của AWS Systems Manager, bạn có thể quản lý cấu hình của các node từ xa và an toàn. Một node được quản lý là bất kỳ Amazon Elastic Compute Cloud (Amazon EC2) instance hoặc máy không thuộc EC2 nào trong môi trường hybrid và multi-cloud của bạn đã được cấu hình cho Systems Manager. Run Command cho phép bạn tự động hóa các tác vụ quản trị chung và thực hiện các thay đổi cấu hình một lần trên quy mô lớn.\nAWS Systems Manager hỗ trợ AWS-RunPatchBaseline, một Systems Manager Document (SSM document) cho Patch Manager, một khả năng của AWS Systems Manager. SSM Document này thực hiện các hoạt động vá trên các node được quản lý cho cả các cập nhật liên quan đến bảo mật và các loại cập nhật khác. Khi Document được chạy, nó sử dụng bản vá baseline được chỉ định là \u0026ldquo;default\u0026rdquo; \u0026quot; cho một loại hệ điều hành nếu không có nhóm bản vá nào được chỉ định. Nếu không, nó sử dụng bản vá baseline được liên kết với nhóm bản vá.\nBạn có thể tìm hiểu thêm về AWS-RunPatchBaseline SSM document trong phần Documents của Systems Manager hoặc trong tài liệu tại đây: https://docs.aws.amazon.com/systems-manager/latest/userguide/patch-manager-aws-runpatchbaseline.html\nMở Run Command từ bảng điều hướng bên trái.\nNhấp vào nút Run command.\nTìm kiếm và chọn AWS-RunPatchBaseline. Trong phần Command parameters, đảm bảo rằng \u0026ldquo;Scan\u0026rdquo; là Operation được chọn. Giữ nguyên tất cả các tham số mặc định khác.\nTrong phần Target selection, xác định thẻ instance. Nhập \u0026ldquo;Environment\u0026rdquo; cho Tag key và \u0026ldquo;Development\u0026rdquo; cho Tag value.\nNhấp vào Add bên cạnh cặp key-value mà bạn vừa nhập. Trong phần Output options, bỏ chọn Enable an S3 bucket.\nNhấp vào Run ở cuối trang. Làm mới trang cho đến khi overall status là \u0026ldquo;Success\u0026rdquo;. Trong phần Targets and outputs, nhấp vào Instance ID của một trong các EC2 instances targeted (có cặp key-value mà bạn đã chỉ định) để xem kết quả từ quá trình thực thi lệnh. Dành một chút thời gian để xem xét các kết quả của từng bước. Quan sát bước 2: Quan sát bước 3: Xem xét sự tuân thủ bản vá cho các node được quản lý Quay lại bảng điều khiển của Patch Manager bằng cách sử dụng thanh điều hướng trong Systems Manager. https://us-east-1.console.aws.amazon.com/systems-manager/patch-manager/dashboard?region=us-east-1 Ở đây bạn sẽ nhận thấy rằng một số EC2 instance của bạn không tuân thủ và nhiều node thiếu các bản vá.\nMở tab Compliance reporting và xem xét các instance được liệt kê cùng với trạng thái tuân thủ của chúng và thông tin khác như các bản vá còn thiếu. Chọn một trong các EC2 instance có trạng thái tuân thủ là Not compliant.\nNhấp vào liên kết cho instance đó trong cột Security non-compliant count. Trang này hiển thị tóm tắt các bản vá cho instance. Bạn có thể chọn các bản vá còn thiếu để xem thêm chi tiết nếu muốn. Cài đặt các bản vá còn thiếu bằng Run Command Quay lại trang Run Command trong Systems Manager và nhấp vào nút Run Command.\nTừ danh sách các command document, tìm kiếm và chọn AWS-RunPatchBaseline.\nLần này, trong phần Command parameters, đặt Operation thành \u0026ldquo;Install\u0026rdquo;.\nMột lần nữa, trong phần Target selection, đặt Tag key là \u0026ldquo;Environment\u0026rdquo; và Tag value là \u0026ldquo;Development\u0026rdquo;. Nhấp vào Add. Mở rộng phần Rate control và đặt Concurrency targets là 1 và Error threshold là 1.\nBỏ chọn Enable an S3 bucket trong phần Output options.\nNhấp vào nút Run ở cuối trang. Quá trình này sẽ mất từ 3-5 phút để hoàn thành. Nếu có bất kỳ bản cập nhật nào được cài đặt bởi Patch Manager, instance được vá sẽ tự động khởi động lại theo mặc định. Làm mới trang cho đến khi bạn thấy trạng thái là \u0026ldquo;Success\u0026rdquo;. Quan sát bước 1, 2: Quan sát bước 3: Để kiểm tra những instance nào vẫn thiếu các bản vá, hãy quay lại bảng điều khiển của Patch Manager và mở tab Compliance reporting. Bạn sẽ thấy rằng không còn bản vá nào bị thiếu nữa!\n"
},
{
	"uri": "//localhost:1313/vi/2-introduction-to-threat-detection-and-response-services/2.4-amazon-detective/2.4.1-detective-overview/",
	"title": "Detective - Tổng quan",
	"tags": [],
	"description": "",
	"content": "Detective - Tổng quan Amazon Detective giúp việc phân tích, điều tra và nhanh chóng xác định nguyên nhân cốt lõi của các vấn đề bảo mật tiềm ẩn hoặc hoạt động đáng ngờ trở nên dễ dàng hơn. Amazon Detective tự động thu thập dữ liệu nhật ký từ tài nguyên AWS của bạn và sử dụng máy học, phân tích thống kê và lý thuyết đồ thị để xây dựng bộ dữ liệu được liên kết cho phép bạn dễ dàng tiến hành điều tra bảo mật nhanh hơn và hiệu quả hơn.\nAmazon Detective đơn giản hóa quy trình điều tra và giúp các nhóm bảo mật tiến hành điều tra nhanh hơn và hiệu quả hơn. Các tập hợp, tóm tắt và ngữ cảnh dữ liệu dựng sẵn của Amazon Detective giúp bạn nhanh chóng phân tích và xác định bản chất cũng như mức độ của các vấn đề bảo mật có thể xảy ra. Amazon Detective duy trì dữ liệu tổng hợp lên đến một năm và cung cấp dữ liệu đó một cách dễ dàng thông qua một bộ hình ảnh trực quan cho thấy những thay đổi về loại và khối lượng hoạt động trong một khoảng thời gian đã chọn, đồng thời liên kết những thay đổi đó với các phát hiện bảo mật. Không có chi phí trả trước và bạn chỉ trả tiền cho các sự kiện được phân tích mà không cần triển khai phần mềm bổ sung hoặc kích hoạt nguồn cấp dữ liệu ghi nhật ký.\nAmazon Detective trích xuất các sự kiện theo thời gian như số lần đăng nhập, lệnh gọi API và lưu lượng mạng từ AWS CloudTrail, Amazon Virtual Private Cloud (Amazon VPC) Flow Logs, phát hiện của Amazon GuardDuty, phát hiện của AWS Security Hub và Amazon Elastic Kubernetes Service (Amazon EKS) audit logs. Detective tạo một biểu đồ hành vi sử dụng công nghệ học máy (ML) để tạo ra một cái nhìn tương tác, thống nhất về các hành vi tài nguyên của bạn và sự tương tác của chúng theo thời gian, đặc biệt đối với các sự kiện dựa trên thời gian này. Bằng cách khám phá biểu đồ hành vi, bạn có thể phân tích các sự kiện bảo mật như lần đăng nhập không thành công, lệnh gọi API đáng ngờ hoặc tìm nhóm để giúp bạn điều tra nguyên nhân cốt lõi của Phát hiện bảo mật AWS.\nCác tác nhân đe dọa thường thực hiện một loạt hành động khi cố gắng xâm phạm môi trường AWS của bạn, điều này có thể dẫn đến nhiều phát hiện bảo mật trên các tài nguyên AWS của bạn. Nhóm tìm kiếm là tập hợp các phát hiện bảo mật và tài nguyên có liên quan đến một sự cố bảo mật tiềm ẩn mà bạn nên cùng nhau điều tra. Việc tìm kiếm các nhóm có thể giúp giảm thời gian phân loại vì bạn không phải điều tra từng phát hiện bảo mật riêng lẻ. Bạn có thể bắt đầu cuộc điều tra của mình bằng việc tìm kiếm các nhóm mang lại sự hiểu biết đầy đủ hơn về vụ việc. Nó cũng cung cấp hình ảnh trực quan tương tác cho phép bạn khám phá những phát hiện và hiểu biết cụ thể bằng cách sử dụng AI tổng hợp để mô tả chuỗi sự kiện bằng ngôn ngữ tự nhiên.\n"
},
{
	"uri": "//localhost:1313/vi/1-workshop-instructions/",
	"title": "Giới thiệu workshop",
	"tags": [],
	"description": "",
	"content": "Workshop này được thiết kế để cung cấp cho bạn một cái nhìn tổng quan về các dịch vụ phát hiện và ứng phó mối đe dọa trên AWS, sau đó đi sâu vào các tình huống sử dụng thực tế, các phương pháp tốt nhất, và những kịch bản cụ thể. Workshop sẽ khởi đầu bằng phần giới thiệu tổng quan về các dịch vụ, tiếp đến là các chủ đề nâng cao về phát hiện và ứng phó mối đe dọa với các mô-đun tập trung vào giải pháp đa dịch vụ, tích hợp hệ thống, điều phối tùy chỉnh, và xử lý các tình huống đe dọa cụ thể. Tất cả các nội dung này được thiết kế nhằm trang bị cho bạn kiến thức và kỹ năng để quản lý và vận hành hệ thống một cách an toàn và hiệu quả hơn trên nền tảng AWS.\nCác bài lab Giới thiệu về các dịch vụ phát hiện và ứng phó mối đe dọa Mục Chủ đề Độ khó Dịch vụ liên quan AWS Security Hub 2.1.1 Security Hub - Overview 100 Security Hub 2.1.2 Security Hub - Dashboard 100 Security Hub 2.1.3 Security Hub - Findings 100 Security Hub 2.1.4 Security Hub - Pricing 100 Security Hub 2.1.5 Security Hub - Notifications 100 Security Hub Amazon GuardDuty 2.2.1 GuardDuty - Overview 100 GuardDuty 2.2.2 GuardDuty - Findings 100 GuardDuty 2.2.3 GuardDuty - Protection plans 100 GuardDuty 2.2.4 GuardDuty - Building your own threat list 100 GuardDuty 2.2.5 GuardDuty - Suppressing findings 100 GuardDuty 2.2.6 GuardDuty - Pricing 100 GuardDuty 2.2.7 GuardDuty - Simple notifications 100 GuardDuty 2.2.8 GuardDuty - Retaining findings 100 GuardDuty Amazon Inspector 2.3.1 Inspector - Overview 100 Inspector 2.3.2 Inspector - Dashboard 100 Inspector 2.3.3 Inspector - Findings 100 Inspector 2.3.4 Inspector - Vulnerability database search 100 Inspector 2.3.5 Inspector - Suppressing findings 100 Inspector 2.3.6 Inspector - Pricing 100 Inspector Amazon Detective 2.4.1 Detective - Overview 100 Detective 2.4.2 Detective - Summary 100 Detective 2.4.3 Detective - Search 100 Detective 2.4.4 Detective - Investigations 100 Detective 2.4.5 Detective - Finding Groups 100 Detective 2.4.6 Detective - Pricing 100 Detective 2.4.7 Detective - EKS Audit Logs 100 Detective Tích hợp Dịch vụ AWS và Giải pháp Đối tác Mục Chủ đề Độ khó Dịch vụ liên quan 3.1 Centralizing findings from AWS security services 100 Security Hub, GuardDuty 3.2 Aggregating findings from multiple AWS accounts 100 \u0026ndash; 3.3 Centralizing findings from AWS partner solutions 100 Security Hub 3.4 Cross-region finding aggregation 200 Security Hub 3.5 Building your own Security Hub integration 100 Security Hub Quản lý và Ưu tiên các phát hiện bảo mật Mục Chủ đề Độ khó 4.1 Prioritizing findings at scale with automations 100 4.2 Suppressing findings at scale with automations 100 4.3 Using insights for prioritization and metrics 200 Tự động hóa thông báo và ứng phó Mục Chủ đề Độ khó Dịch vụ liên quan 5.1 Setting up notifications 200 Security Hub 5.2 Set up a weekly vulnerability summary email 300 Security Hub, Inspector 5.3 Automated Security Response on AWS 200 Security Hub 5.4 Building your own automated response 300 Security Hub, GuardDuty 5.5 Enriching security findings with investigative data 400 Security Hub, GuardDuty, Detective Mô phỏng kịch bản bảo mật Mục Chủ đề Độ khó Dịch vụ liên quan 6.1 Respond to IAM Role credential exfiltration 300 GuardDuty 6.2 Respond to a compromised S3 Bucket 300 GuardDuty 6.3 Respond to compromised IAM credentials 300 GuardDuty, Detective 6.4 Respond to a Lambda function calling malicious IP 300 GuardDuty 6.5 Respond to Malware on Amazon Elastic Block Store 200 GuardDuty 6.6 Respond to a compromised EC2 instance 200 GuardDuty, Detective Quản lý Lỗ hổng Phần mềm Mục Chủ đề Độ khó Dịch vụ liên quan 7.1 Patching EC2 with Patch Manager 300 Inspector, Systems Manager 7.2 Vulnerability management for serverless applications 300 Inspector 7.3 Integrating Amazon Inspector into a CI/CD pipeline 300 Inspector "
},
{
	"uri": "//localhost:1313/vi/2-introduction-to-threat-detection-and-response-services/2.2-amazon-guardduty/2.2.1-guardduty-overview/",
	"title": "GuardDuty - Tổng quan",
	"tags": [],
	"description": "",
	"content": "GuardDuty - Tổng quan Amazon GuardDuty là một dịch vụ phát hiện mối đe dọa liên tục giám sát hoạt động độc hại và hành vi trái phép trong toàn bộ môi trường AWS của bạn. GuardDuty kết hợp học máy (ML), phát hiện bất thường, và phát hiện tệp độc hại, sử dụng cả các nguồn từ AWS và các bên thứ ba hàng đầu trong ngành để giúp bảo vệ tài khoản AWS, khối lượng công việc và dữ liệu của bạn. GuardDuty có khả năng phân tích hàng chục tỷ sự kiện từ nhiều nguồn dữ liệu AWS, bao gồm nhật ký AWS CloudTrail, Amazon Virtual Private Cloud (Amazon VPC) Flow Logs, và nhật ký truy vấn DNS. GuardDuty cũng giám sát các sự kiện dữ liệu của Amazon Simple Storage Service (Amazon S3), sự kiện đăng nhập Amazon Aurora, và hoạt động runtime cho Amazon Elastic Kubernetes Service (Amazon EKS), Amazon Elastic Compute Cloud (Amazon EC2), và Amazon Elastic Container Service (Amazon ECS) — bao gồm cả khối lượng công việc container không máy chủ trên AWS Fargate.\nGuardDuty cung cấp khả năng phát hiện mối đe dọa chính xác cho các tài khoản bị xâm nhập, điều này có thể khó phát hiện nhanh chóng nếu bạn không giám sát liên tục các yếu tố gần như theo thời gian thực. GuardDuty có thể phát hiện dấu hiệu của việc xâm nhập tài khoản, chẳng hạn như truy cập tài nguyên AWS từ một vị trí địa lý bất thường vào thời điểm không điển hình trong ngày. Đối với các tài khoản AWS có truy cập chương trình, GuardDuty kiểm tra các cuộc gọi API bất thường, chẳng hạn như các nỗ lực che giấu hoạt động tài khoản bằng cách vô hiệu hóa nhật ký CloudTrail hoặc chụp nhanh cơ sở dữ liệu từ một địa chỉ IP độc hại.\nGuardDuty liên tục giám sát và phân tích dữ liệu sự kiện tài khoản AWS và khối lượng công việc của bạn được tìm thấy trong CloudTrail, VPC Flow Logs, và DNS logs. Không có phần mềm bảo mật bổ sung hoặc cơ sở hạ tầng nào cần triển khai và bảo trì cho các bảo vệ cơ bản trong GuardDuty. Bằng cách kết hợp các tài khoản AWS của bạn lại với nhau, bạn có thể tổng hợp phát hiện mối đe dọa thay vì làm việc trên cơ sở từng tài khoản. Ngoài ra, bạn không cần phải thu thập, phân tích và liên kết một lượng lớn dữ liệu AWS từ nhiều tài khoản. Hãy tập trung vào cách phản ứng nhanh chóng, cách giữ an toàn cho tổ chức của bạn và tiếp tục mở rộng quy mô và đổi mới trên AWS.\n"
},
{
	"uri": "//localhost:1313/vi/2-introduction-to-threat-detection-and-response-services/2.3-amazon-inspector/2.3.1-inspector-overview/",
	"title": "Inspector - Tổng quan",
	"tags": [],
	"description": "",
	"content": "Inspector Amazon Inspector là dịch vụ quản lý lỗ hổng bảo mật liên tục quét các khối lượng công việc AWS để phát hiện lỗ hổng phần mềm và sự tiếp xúc mạng không mong muốn. Chỉ với vài bước trong AWS Management Console, bạn có thể sử dụng Amazon Inspector trên tất cả các tài khoản trong tổ chức của bạn. Khi được khởi động, nó tự động phát hiện các phiên bản Amazon Elastic Compute Cloud (EC2) instance, container images nằm trong Amazon Elastic Container Registry (ECR) and within continuous integration and continuous delivery (CI/CD) tools, and AWS Lambda functions, at scale, and immediately starts assessing them for known vulnerabilities.\nAmazon Inspector tính toán điểm rủi ro rất cụ thể cho từng phát hiện bằng cách liên kết thông tin về CVE với các yếu tố như quyền truy cập mạng và khả năng khai thác. Điểm số này được sử dụng để ưu tiên các lỗ hổng quan trọng nhất nhằm cải thiện hiệu quả phản ứng khắc phục. Tất cả các phát hiện được tập hợp trong bảng điều khiển Amazon Inspector và gửi đến AWS Security Hub và Amazon EventBridge để tự động hóa các quy trình làm việc. Các lỗ hổng tìm thấy trong container image cũng được gửi đến Amazon ECR để các chủ sở hữu tài nguyên có thể xem và khắc phục. Amazon Inspector giúp các đội bảo mật và các nhà phát triển ở bất kỳ quy mô nào đạt được bảo mật và tuân thủ cơ sở hạ tầng toàn diện trong các môi trường AWS của họ.\n"
},
{
	"uri": "//localhost:1313/vi/2-introduction-to-threat-detection-and-response-services/2.1-aws-security-hub/2.1.1-security-hub-overview/",
	"title": "Security Hub - Tổng quan",
	"tags": [],
	"description": "",
	"content": "Tiêu chuẩn bảo mật Điều hướng đến AWS Security Hub summary page. 2. Từ trang Summary bạn có thể xem những tiêu chuẩn nào đã được bật trong tài khoản của mình và bạn có thể thấy số lượng kiểm soát đạt và không đạt trên mỗi tiêu chuẩn. Tỷ lệ phần trăm là phần trăm các biện pháp kiểm soát ở trạng thái tuân thủ \u0026ldquo;passed\u0026rdquo; so với số lượng các biện pháp kiểm soát có trạng thái tuân thủ \u0026ldquo;passed\u0026rdquo; hoặc \u0026ldquo;failed\u0026rdquo;. Chọn Security standards trong thanh điều hướng bên trái. Các tiêu chuẩn đã được bật bằng cách sử dụng CloudFormation khi workshop được cung cấp. Hãy đi sâu vào một trong những tiêu chuẩn. Chọn View Results để xem NIST Special Publication 800-53 Revision 5. Kiểm soát bảo mật Tại đầu trang, bạn có thể chọn các mục để chỉ hiển thị các kiểm soát \u0026ldquo;Passed\u0026rdquo;, \u0026ldquo;Failed\u0026rdquo;, \u0026ldquo;Disabled\u0026rdquo;, v.v. Bạn cũng có thể lọc để tìm một kiểm soát bằng cách sử dụng thanh tìm kiếm có ghi \u0026ldquo;Filter all enabled controls\u0026rdquo;. Chọn thanh tìm kiếm và lọc theo ID. Chỉ định ID = EC2.13. Chọn Tiêu đề: Security groups should not allow ingress from 0.0.0.0/0 to port 22. Điều này sẽ hiển thị một danh sách tất cả các tài nguyên đã được đánh giá cho kiểm soát cụ thể này và trạng thái hiện tại của từng tài nguyên liên quan đến kiểm soát. Lưu ý rằng có một số tài nguyên có trạng thái FAILED và một số có trạng thái PASSED . Các Tiêu chuẩn Bảo mật của AWS Security Hub cung cấp hướng dẫn khắc phục cho từng kiểm tra. Ở đầu trang, chọn Remediation instructions link để mở hướng dẫn trong một trang mới. Investigating a misconfigured resource Quay lại kiểm soát bảo mật của Security Hub mà bạn đang xem. Đối với một trong những tài nguyên có trạng thái FAILED, mở Config rule trong cột Investigate. Điều này sẽ hiển thị các liên kết dẫn bạn đến AWS Config để xem dòng thời gian cấu hình của tài nguyên này hoặc quy tắc cấu hình tổng thể đã thực hiện đánh giá trên tài nguyên này. Chọn Configuration timeline. Thao tác này sẽ mở AWS Config và hiển thị dòng thời gian cấu hình tài nguyên cho security group này. Từ đây, bạn có thể điều tra thời điểm mà tài nguyên trở nên không tuân thủ bằng cách xem xét các sự kiện đã được đánh dấu thời gian. Nếu muốn, bạn có thể dành một phút để mở rộng một vài sự kiện. Mở rộng CloudTrail Event được liệt kê. Sau đó, chọn CloudTrail dưới mục View event. Nó sẽ mở sự kiện đó, được ghi lại trong CloudTrail. AWS CloudTrail iám sát và ghi lại hoạt động tài khoản trên toàn bộ cơ sở hạ tầng AWS của bạn, cho phép bạn kiểm soát các hành động lưu trữ, phân tích và khắc phục. Kiểm soát hợp nhất Quay lại Security Hub và mở trang General settings từ bảng điều hướng. https://console.aws.amazon.com/securityhub/home?#/settings/general Ở đầu trang, bạn sẽ thấy rằng cả hai tùy chọn \u0026ldquo;Auto-enable new controls in enabled standards\u0026rdquo; và \u0026ldquo;Consolidated control findings\u0026rdquo; đều đã được bật.\nChọn Controls từ bảng điều hướng. Trang này hiển thị tương tự như những gì bạn đã xem ở cấp độ tiêu chuẩn, nhưng ở đây bạn sẽ thấy danh sách đầy đủ các kiểm soát hợp nhất. Điều này giúp dễ dàng hơn để xem có bao nhiêu kiểm soát cá nhân trong tài khoản của bạn đang vượt qua, thất bại, hoặc ở trạng thái khác. Thêm vào đó, với việc kích hoạt các phát hiện hợp nhất, các kiểm soát được bao gồm trong nhiều tiêu chuẩn đã bật không còn tạo ra phát hiện theo từng tiêu chuẩn (trùng lặp). Điều này giúp quản lý số lượng phát hiện trong môi trường của bạn và loại bỏ sự nhầm lẫn tiềm ẩn xung quanh các phát hiện trùng lặp.\nInsights Trong thanh điều hướng bên trái, chọn Insights. Trong thanh tìm kiếm, nhập \u0026ldquo;severity\u0026rdquo; và chọn insight có tên 24. Severity by counts of findings. Security Hub cung cấp một số insight quản lý sẵn có. Bạn không thể sửa đổi hoặc xóa các insight quản lý. 24. Severity by counts of findings là một trong những insight quản lý sẵn có. Hãy dành một ít thời gian để xem số lượng phát hiện trong môi trường. Chọn một Severity Label (ví dụ: Critical) để xem các phát hiện cơ bản. "
},
{
	"uri": "//localhost:1313/vi/3/3.1/",
	"title": "Tập trung các phát hiện từ các dịch vụ bảo mật AWS",
	"tags": [],
	"description": "",
	"content": "Security Hub tự động thu thập và hợp nhất các phát hiện từ các dịch vụ bảo mật AWS được kích hoạt trong môi trường của bạn, chẳng hạn như các phát hiện xâm nhập từ Amazon GuardDuty, quét lỗ hổng từ Amazon Inspector, phát hiện Amazon Simple Storage Service (Amazon S3) bucket policy của Amazon Macie, tài nguyên công khai và tài nguyên giữa các tài khoản từ IAM Access Analyzer, và các tài nguyên thiếu sự bảo vệ từ AWS Firewall Manager.\nViệc tập hợp này cung cấp cho bạn cái nhìn tổng quan về tình trạng bảo mật và tuân thủ trong môi trường AWS của bạn. AWS Security Hub hợp nhất các phát hiện bảo mật từ hàng chục dịch vụ bảo mật AWS và sản phẩm APN tại một nơi duy nhất và theo một định dạng duy nhất là AWS Security Finding Format (ASFF). Security Hub không phát hiện và hợp nhất các phát hiện bảo mật được tạo ra trước khi bạn kích hoạt Security Hub. Tất cả các phát hiện được lưu trữ trong Security Hub trong 90 ngày sau ngày cập nhật cuối cùng.\nTrang Tích hợp (Integrations) trong AWS Management Console cung cấp quyền truy cập vào tất cả các tích hợp sản phẩm của AWS và bên thứ ba có sẵn. API của AWS Security Hub cũng cung cấp các thao tác cho phép bạn quản lý các tích hợp. Đối với các dịch vụ AWS, Security Hub tự động kích hoạt tích hợp, và bạn có thể tùy chọn vô hiệu hóa từng tích hợp.\nTập trung các phát hiện từ các dịch vụ bảo mật AWS Điều hướng đến Security Hub và mở trang Summary. Trang Security Hub Summary page cung cấp cho bạn cái nhìn tổng quan về tình trạng bảo mật và tuân thủ của tài khoản AWS của bạn.\nDành vài phút để xem lại các thông tin tổng quan được tạo ra trên trang Summary. Bạn có thể tìm thấy các loại mối đe dọa phổ biến nhất được xác định trong môi trường của mình không? Các phát hiện này đang được tập hợp trong Security Hub từ Amazon GuardDuty. Security Hub widgets Mở trang Tích hợp (Integrations) trong Security Hub. Cuộn qua các tích hợp có sẵn. Như bạn có thể thấy, nhiều tích hợp, bao gồm cả \u0026ldquo;Amazon: GuardDuty\u0026rdquo; và \u0026ldquo;Amazon: Inspector\u0026rdquo;, được tự động kích hoạt cho bạn. Tuy nhiên, bạn vẫn cần kích hoạt từng dịch vụ (ngoài tích hợp) để tạo ra các phát hiện tương ứng.\nSecurity Hub cung cấp cho bạn sự linh hoạt để kích hoạt và vô hiệu hóa các tích hợp AWS. Mặc dù không thường được khuyến nghị, hãy thử vô hiệu hóa tích hợp AWS: Firewall Manager. Chọn Stop accepting findings trong ô được gán nhãn AWS: Firewall Manager. Bạn sẽ được hiển thị một thông báo bật lên rằng \u0026ldquo;Not accepting findings from this integration means that the product can still try to send findings to Security Hub, but Security Hub will not ingest them.\u0026rdquo; Chọn Cancel. Chúng ta nên để tích hợp này bật. Để xem tất cả các phát hiện bảo mật từ một dịch vụ cụ thể, bạn có thể sử dụng trang này để xem. Tìm tích hợp cho \u0026ldquo;Amazon: GuardDuty\u0026rdquo; và chọn See findings. iều này sẽ mở trang phát hiện và thêm một bộ lọc để bạn chỉ xem các phát hiện từ Amazon GuardDuty. Ở lại trên trang Findings.\nBạn có thể tùy chọn xóa hoặc thay đổi một số bộ lọc để điều chỉnh danh sách các phát hiện đã lọc mà bạn đang xem.\nTìm kiếm và xem lại các phát hiện bảo mật Để xem tất cả các phát hiện trong Security Hub, hãy xóa các bộ lọc (và Group By, nếu có) ở đầu trang bằng cách chọn dấu X bên cạnh mỗi bộ lọc.\nCó rất nhiều phát hiện Security Hub được liệt kê ở đây. Hãy thử thêm một bộ lọc để thu hẹp danh sách xuống chỉ còn các phát hiện có mức độ nghiêm trọng cao từ dịch vụ phát hiện mối đe dọa, GuardDuty. Chọn Add filters trong thanh tìm kiếm.\nTừ menu thả xuống, chọn nhãn Severity label và nhập vào HIGH. Chú ý viết hoa. Chọn Apply. Kết quả: Chọn một phát hiện để xem thêm thông tin. Chọn Add filters trong thanh tìm kiếm lần nữa. Lần này, chọn Product name và nhập vào GuardDuty. Chọn Apply.\nChọn một trong các phát hiện và chọn tiêu đề của nó. Điều này sẽ mở ra bảng chi tiết phát hiện. Mở rộng tất cả các phần và dành vài phút để xem lại thông tin ở đây. Bạn có thể thấy mô tả, một liên kết đến hướng dẫn khắc phục, thông tin về tài nguyên, và nhiều hơn nữa.\nTrong chi tiết của phát hiện, chọn ID của phát hiện ở đầu để hiển thị toàn bộ JSON cho phát hiện đó. Security Hub xử lý các phát hiện bằng cách sử dụng định dạng phát hiện tiêu chuẩn gọi là AWS Security Finding Format - ASFF, giúp loại bỏ việc phải chuyển đổi dữ liệu tốn thời gian. JSON của phát hiện có thể được tải xuống thành tệp nếu cần cho việc điều tra thêm. Đóng cửa sổ bật lên JSON bằng cách chọn dấu X ở góc trên bên phải.\nỞ đầu chi tiết phát hiện, mở tab History tab để xem danh sách theo thứ tự thời gian của tất cả các thay đổi đã được thực hiện đối với phát hiện. Sự minh bạch của lịch sử phát hiện giúp bạn nhanh chóng nhận diện các rủi ro bảo mật tiềm ẩn và thực hiện các bước chủ động để giảm thiểu chúng.\nĐóng chi tiết phát hiện bằng cách chọn dấu X ở góc trên bên phải, nhưng vẫn ở lại trang phát hiện.\nHãy thử xem các tài nguyên nào trong môi trường của chúng ta đang tạo ra nhiều phát hiện nhất. Loại bỏ tất cả các bộ lọc. Sau đó thêm một bộ lọc mới, chọn Resource type sau đó nhập AwsAccount. Chọn Apply. Kết quả: Thêm một bộ lọc khác.Chọn Record state, sau đó nhập ACTIVE. Chọn Apply. Chọn Add filters trong thanh tìm kiếm lần nữa. Lần này, chọn Group by và chọn ResourceId. Chọn Apply. Danh sách này cho bạn biết số lượng phát hiện bảo mật trên mỗi tài nguyên. Điều này có thể giúp bạn ưu tiên công việc dựa trên các tài nguyên trong môi trường của bạn có nhiều vấn đề bảo mật nhất. Kết quả: Generating insights from aggregated findings Nếu bạn thấy danh sách số lượng phát hiện bảo mật trên mỗi tài nguyên có lợi, bạn có thể lưu nó thành một Insight tùy chỉnh để tham khảo trong tương lai. Chọn Create insight ở góc trên bên phải của màn hình.\nĐặt tên cho Insight là \u0026ldquo;0. Resources by counts of findings\u0026rdquo;. Sau đó chọn Create insight. Trong điều hướng bên trái, chọn Insights. Một Insight của Security Hub là một tập hợp các phát hiện liên quan được xác định bằng một câu lệnh tổng hợp và các bộ lọc tùy chọn. Một Insight xác định một khu vực bảo mật cần chú ý và can thiệp. Security Hub cung cấp một số Insight được quản lý (mặc định) mà bạn không thể sửa đổi hoặc xóa. Bạn cũng có thể tạo các Insight tùy chỉnh để theo dõi các vấn đề bảo mật độc đáo với môi trường và cách sử dụng AWS của bạn.\nInsight đầu tiên được liệt kê là Insight bạn vừa tạo. Chọn tiêu đề 0. Resources by counts of findings. Tại đây, bạn có cùng một giao diện như trước cộng với các biểu đồ được tạo ra. Chúng ta sẽ tìm hiểu sâu hơn về Insights sau. Quay lại trang Insights bằng cách sử dụng thanh điều hướng bên trái.\nDành vài phút để xem qua các Insights được AWS cung cấp. Lọc theo mức độ nghiêm trọng của Insight.\nChọn 24. Severity by counts of findings.\nChọn một nhãn Severity (e.g. Critical) (ví dụ: Critical) để xem các phát hiện cơ bản.\nKết quả: "
},
{
	"uri": "//localhost:1313/vi/5/5.1/",
	"title": "Thiết lập thông báo",
	"tags": [],
	"description": "",
	"content": "Sau khi Security Hub đã thu nhận một phát hiện xác định mối đe dọa hoặc cho biết rằng có một cấu hình cần chú ý, bước tiếp theo là hành động và giải quyết phát hiện đó. Với Amazon EventBridge, bạn có thể tự động hóa các dịch vụ AWS của mình để phản hồi tự động với các sự kiện hệ thống như vấn đề về khả năng sẵn có của ứng dụng hoặc thay đổi tài nguyên.\nAmazon EventBridge là một dịch vụ không máy chủ cho phép dễ dàng xây dựng các ứng dụng dựa trên sự kiện ở quy mô lớn bằng cách sử dụng các sự kiện được tạo từ các dịch vụ AWS. Các sự kiện từ các dịch vụ AWS được gửi đến EventBridge trong thời gian gần thực và trên cơ sở được bảo đảm. Bạn có thể viết các quy tắc đơn giản để chỉ định sự kiện nào mà bạn quan tâm và hành động tự động nào sẽ được thực hiện khi một sự kiện khớp với một quy tắc. Các hành động có thể được kích hoạt tự động bao gồm:\nGọi một hàm AWS Lambda Kích hoạt một máy trạng thái AWS Step Functions Thông báo một chủ đề Amazon SNS hoặc một hàng đợi Amazon SQS Gửi phát hiện đến công cụ quản lý sự cố, chat, SIEM, hoặc phản hồi sự cố của bên thứ ba Security Hub tự động gửi tất cả các phát hiện mới và tất cả các cập nhật cho các phát hiện hiện có tới EventBridge dưới dạng các sự kiện EventBridge. Bạn cũng có thể tạo các hành động tùy chỉnh cho phép bạn gửi các phát hiện đã chọn và kết quả tổng quan đến EventBridge. Sau đó, bạn cấu hình các quy tắc EventBridge để phản hồi với mỗi loại sự kiện.\nTrong module này, chúng ta sẽ tạo một quy tắc EventBridge để tự động hóa thông báo trên danh sách các phát hiện đã được lọc từ Security Hub. Chúng ta sẽ cấu hình Amazon Simple Notification Service để nhận thông báo qua email khi chúng ta nhận được phát hiện có mức độ nghiêm trọng CAO hoặc NGHIÊM TRỌNG trong Security Hub. Amazon Simple Notification Service (Amazon SNS) là một dịch vụ nhắn tin được quản lý hoàn toàn cho cả giao tiếp giữa các ứng dụng (A2A) và giao tiếp giữa ứng dụng và người dùng (A2P).\nTrong một kịch bản thực tế, ví dụ cụ thể này sẽ không hiệu quả trên quy mô lớn, nhưng nó sẽ minh họa cách AWS Security Hub hoạt động với Amazon EventBridge.\nCấu hình Amazon Simple Notification Service topic Điều hướng đến Amazon SNS.\nNhấp vào Topics trong bảng điều hướng bên trái.\nNhấp vào Create topic.\nChọn Standard type.\nĐặt tên là \u0026ldquo;high-severity-security-hub-findings\u0026rdquo;. Kết quả:\nĐể nguyên mọi thứ khác và nhấp vào Create topic ở cuối trang. Điều này sẽ tạo chủ đề. Subscribe to the topic Từ trang high-severity-security-hub-findings topic, nhấp vào Create subscription.\nTrên trang Create subscription, dưới Protocol, chọn Email.\nTrên trang Create subscription, dưới Endpoint, nhập địa chỉ email mà bạn muốn sử dụng cho workshop này để nhận thông báo. Bạn có thể hủy đăng ký sau khi hoàn thành workshop.\nNhấp vào Create subscription. Trong vài phút, bạn sẽ nhận được một email tại địa chỉ email bạn đã nhập. Xác nhận đăng ký bằng cách nhấp vào Confirm subscription trong email.\nTạo một EventBridge Rule để gửi findings đến chủ đề Bây giờ chúng ta đã đăng ký vào SNS topic, chúng ta sẵn sàng gửi findings đến chủ đề. Để làm điều này, chúng ta sẽ tạo một EventBridge rule khớp với các sự kiện Security Hub cho các findings có mức độ nghiêm trọng HIGH và CRITICAL.\nĐiều hướng đến Amazon EventBridge. https://console.aws.amazon.com/events/home\nNhấp vào Create rule.\nTrên trang Define rule detail, đặt tên cho rule của bạn là \u0026ldquo;high-severity-security-hub-findings\u0026rdquo;.\nNhấp vào Next.\nTrên trang Build event pattern, trong phần Event pattern, nhấp vào Edit pattern.\nNhập Event Pattern sau: {\r\u0026#34;source\u0026#34;: [\u0026#34;aws.securityhub\u0026#34;],\r\u0026#34;detail\u0026#34;: {\r\u0026#34;findings\u0026#34;: {\r\u0026#34;Severity\u0026#34;: {\r\u0026#34;Label\u0026#34;: [\u0026#34;HIGH\u0026#34;, \u0026#34;CRITICAL\u0026#34;]\r}\r}\r}\r} Nhấp vào Next.\nTrên trang Select target(s), từ danh sách thả xuống Select a target, chọn SNS topic.\nSau đó, từ danh sách thả xuống Topic, chọn high-severity-security-hub-findings. Nhấp vào Next.\nTrên trang Configure tags - optional, nhấp vào Next.\nTrên trang Review and create, nhấp vào Create rule. Test the notifications EventBridge rule mà chúng ta đã cấu hình sẽ đẩy một thông báo khi có bất kỳ cập nhật hoặc phát hiện mới trong Security Hub có nhãn mức độ nghiêm trọng \u0026ldquo;HIGH\u0026rdquo; hoặc \u0026ldquo;CRITICAL\u0026rdquo;. Chúng ta có thể chờ một phát hiện mới hoặc cập nhật, nhưng sẽ nhanh hơn nếu chúng ta kiểm tra điều này bằng cách tự cập nhật một phát hiện. Một cách dễ dàng để làm điều này là thay đổi Workflow status của một phát hiện.\nĐối với findings, workflow status theo dõi tiến trình điều tra của bạn đối với một phát hiện. Workflow status cụ thể cho từng phát hiện. Nó không ảnh hưởng đến việc tạo ra các phát hiện mới.\nQuay lại Security Hub.\nMở trang Findings.\nThêm một bộ lọc mới, với nhãn Severity là HIGH. Điều này có phân biệt chữ hoa chữ thường. Nhấp vào Apply. Nhấp vào tiêu đề của bất kỳ phát hiện nào có mức độ nghiêm trọng cao để mở nó.\nDưới menu thả xuống Workflow status trong chi tiết phát hiện, thay đổi workflow từ New thành Notified. Bạn sẽ thấy một biểu ngữ hiển thị \u0026ldquo;Successfully changed workflow status\u0026rdquo;. Cập nhật này sẽ dẫn đến việc bạn nhận được một email chứa JSON cho phát hiện này. Bạn sẽ muốn hủy đăng ký khỏi những thông báo này trước khi hoàn thành workshop. Notification: Challenge Đến đây bạn đã hiểu hầu hết các nguyên tắc cơ bản về cách AWS Security Hub hoạt động với Amazon EventBridge. Hãy kiểm tra kiến thức của bạn.\nSau khi cấu hình thông báo cho tất cả các findings có mức độ nghiêm trọng HIGH và CRITICAL, bạn nhận ra rằng bạn đang nhận được quá nhiều thông báo giữa các thay đổi tuân thủ tài nguyên, giải quyết các phát hiện và đồng nghiệp thay đổi workflow status của findings.\nSử dụng những gì bạn đã học cho đến nay, hãy thử sửa đổi thông báo bạn đã thiết lập để chỉ gửi email cho bạn các findings có nhãn mức độ nghiêm trọng HIGH, có workflow status là New, và mà Security Hub nhận được từ GuardDuty (các findings phải khớp với cả 3 điều kiện). Amazon GuardDuty là một dịch vụ phát hiện mối đe dọa liên tục giám sát tài khoản và khối lượng công việc AWS của bạn để phát hiện hoạt động độc hại và cung cấp các phát hiện bảo mật chi tiết để bạn có thể nhìn thấy và xử lý chúng.\n"
},
{
	"uri": "//localhost:1313/vi/4/4.1/",
	"title": "Tự động hóa uu tiên các phát hiện quy mô lớn",
	"tags": [],
	"description": "",
	"content": "Tự động nâng cao mức độ nghiêm trọng của các phát hiện Bước đầu tiên bạn sẽ thiết lập là nâng cao mức độ nghiêm trọng của các phát hiện ưu tiên cho các ứng dụng quan trọng trong doanh nghiệp. Cụ thể, chúng ta muốn nâng cao mức độ nghiêm trọng của tất cả các phát hiện từ GuardDuty cho các EC2 instances được gán nhãn cho môi trường sản xuất.\nMở trang Automations trong Security Hub.\nChọn Create rule.\nĐối với quy tắc tự động hóa này, chúng ta sẽ bắt đầu với một template. Giữ \u0026ldquo;Create a rule from template\u0026rdquo; được chọn và dưới Rule template chọn Elevate severity of findings that relate to important resources. Thay đổi Rule name thành \u0026ldquo;Elevate severity of GuardDuty findings that relate to production EC2 instances\u0026rdquo;.\nSao chép tên Rule vào Rule description hoặc nhập mô tả của riêng bạn.\nDành một chút thời gian để xem lại rule. Cần thay đổi một số tiêu chí cho trường hợp sử dụng của chúng ta.\nThay đổi Value của tiêu chí đầu tiên (Key: ProductName) thành \u0026ldquo;GuardDuty\u0026rdquo;.\nChọn Remove bên cạnh tiêu chí, Key: ComplianceStatus.\nChọn Remove bên cạnh tiêu chí cuối cùng (Key: ResourceId).\nChọn Add criteria. Đối với Key chọn ResourceTags. Đối với Operator chọn EQUALS. Đối với Value, nhập \u0026ldquo;Environment\u0026rdquo; vào ô trên và \u0026ldquo;Production\u0026rdquo; và ô dưới (đây là cặp key-value cho tag). Trong Preview of findings that match criteria chọn Refresh để đảm bảo bạn đã cấu hình đúng mọi thứ. Bạn sẽ thấy một bản xem trước các phát hiện hiện có đáp ứng tiêu chí.\nĐối với rule này, chúng ta sẽ nâng cao tất cả các phát hiện phù hợp lên mức độ nghiêm trọng HIGH . Nếu thực hiện điều này cho tổ chức của bạn, bạn có thể muốn thêm một quy tắc khác để nâng cao các phát hiện từ GuardDuty mà ban đầu là HIGH lên mức độ nghiêm trọng CRITICAL. Trong phần Automated action, đặt Severity thành HIGH.\nGiữ các cài đặt mặc định khác và chọn Create rule. Kết quả: Tự động thêm các trường do người dùng định nghĩa vào cảnh báo sản xuất Có những trường hợp bạn có thể muốn xác định các cảnh báo trên các tài nguyên trong môi trường sản xuất, nhưng không nâng cao mức độ nghiêm trọng. Một cách tiếp cận để thực hiện điều này là thêm ghi chú và các trường do người dùng định nghĩa. Quy tắc tự động hóa tiếp theo bạn sẽ thiết lập là thêm ghi chú và các trường do người dùng định nghĩa vào bất kỳ phát hiện nào từ các tài khoản chúng tôi xác định là môi trường sản xuất.\nQuay lại trang Automations trong in Security Hub.\nChọn Create rule.\nĐối với quy tắc tự động hóa này, chúng ta sẽ chọn Create custom rule.\nThay đổi tên Rule thành \u0026ldquo;Tag production findings\u0026rdquo;.\nThay đổi Rule description thành \u0026ldquo;Tag findings for resources in production accounts\u0026rdquo;.\nĐối với rule này, chúng ta chỉ cần một tiêu chí. Đặt Key thành AwsAccountId. Đặt Operator thành EQUALS. Đặt Value thành ID tài khoản của bạn. ID tài khoản có thể được tìm thấy ở góc trên bên phải của bảng điều khiển AWS. Đảm bảo không có khoảng trắng hoặc dấu gạch ngang khi sao chép ID tài khoản. Chọn Refresh để xem trước các phát hiện đáp ứng tiêu chí. Lưu ý cho độc giả: Do hạn chế trong Workshop Studio, bạn chỉ có một tài khoản, vì vậy quy tắc tự động hóa này sẽ áp dụng cho tất cả các phát hiện của bạn. Tuy nhiên, trong kiến trúc nhiều tài khoản mà bạn đã thiết lập quản trị phân quyền qua AWS Organization, bạn sẽ có thể làm theo hướng dẫn tương tự và xác định một hoặc nhiều tài khoản, chọn lọc, là môi trường sản xuất.\nCuộn xuống phần Automated action. Đối với Note nhập \u0026ldquo;This finding is in a production account (identified via automation rule)\u0026rdquo;.\nChọn Add another key-value pair. Đối với Key nhập \u0026ldquo;Environment\u0026rdquo;. Đối với Value nhập \u0026ldquo;Production\u0026rdquo;. Giữ các cài đặt mặc định khác và chọn Create rule.\nNếu bạn muốn xem lại một rule bạn đã tạo, bạn có thể chọn Name của rule từ trang Automations . Chọn tên Tag Production findings.\nMột rule khác: Tự động thêm các trường do người dùng định nghĩa vào các phát hiện phù hợp với mục tiêu của tổ chức Tiếp theo, thiết lập tự động hóa tương tự như rule tự động hóa trước đó, nhưng thay vì thêm các trường do người dùng định nghĩa vào các phát hiện trong các tài khoản thuộc khâu sản xuất, ta sẽ thêm chúng vào các phát hiện đáp ứng tiêu chí của mục tiêu của tổ chức. Trong trường hợp này, mục tiêu của tổ chức sẽ là bảo mật các AWS và IAM cccount. Để thực hiện điều này, tiêu chí tự động hóa của bạn sẽ là các phát hiện từ các kiểm soát Security Hub cho\u0026quot;Account\u0026quot; và \u0026ldquo;IAM\u0026rdquo;.\n(Mục 35 là từ Workshop, không phải lỗi từ tác giả) Quay lại trang Automations trong Security Hub.\nChọn Create rule.\nChọn Create custom rule.\nThay đổi Rule name thành \u0026ldquo;Tag findings for security goal\u0026rdquo;.\nThay đổi Rule description thành \u0026ldquo;Tag findings for security goal, secure IAM and accounts.\u0026rdquo;.\nChúng ta muốn tiêu chí của chúng ta phù hợp với tất cả các phát hiện cho các kiểm soát Security Hub về \u0026ldquo;Account\u0026rdquo; hoặc \u0026ldquo;IAM\u0026rdquo;. Dưới Criteria, chọn GeneratorId cho Key.\nChọn PREFIX cho Operator. Bằng cách chọn \u0026ldquo;PREFIX\u0026rdquo; chúng ta không cần tiêu chí cho từng kiểm soát riêng lẻ. Nếu bạn đã bật \u0026ldquo;Consolidated control findings\u0026rdquo; (đây là trường hợp cho tài khoản này), bạn chỉ cần tìm 2 tiền tố ID kiểm soát.\nĐối với Value, nhập \u0026ldquo;security-control/Account\u0026rdquo;. Điều này sẽ phù hợp với bất kỳ phát hiện nào cho ID kiểm soát Security Hub bắt đầu bằng \u0026ldquo;security-control/Account\u0026rdquo;.\nPhía dưới ô nhập Value, chọn Add another value. Điều này sẽ tạo một Operator và Value thứ hai cho cùng một Key.\nĐối với Operator và Value thứ hai, nhập PREFIX và \u0026ldquo;security-control/IAM\u0026rdquo;, tương ứng. Chọn Refresh để xem trước các phát hiện phù hợp.\nDưới Automated action, chọn Add another key-value pair. Đối với Key, nhập \u0026ldquo;security-goal\u0026rdquo;. Đối với Value, nhập \u0026ldquo;account-and-iam\u0026rdquo;.\nGiữ các cài đặt mặc định khác và chọn Create rule. Nhớ rằng, bạn có thể sử dụng các trường do người dùng định nghĩa để lọc các phát hiện và tạo ra các thông tin chi tiết trong Security Hub nếu bạn muốn theo dõi mục tiêu dễ dàng hơn ở cấp độ tổ chức và tài khoản. Xem xét các phát hiện được cập nhật bởi các quy tắc tự động hóa Điều hướng đến trang Findings trong Security Hub.\nTìm một phát hiện có biểu tượng ghi chú bên cạnh thời gian Updated.\nNhấn tiêu đề của một phát hiện có biểu tượng ghi chú bên cạnh thời gian Updated để mở chi tiết phát hiện. Mở rộng phần Notes để xem ghi chú được tạo bởi quy tắc tự động hóa.\nChọn tab History ở đầu chi tiết phát hiện. Bạn có thể xem dấu thời gian về thời điểm và cách phát hiện được cập nhật bởi quy tắc tự động hóa. Xem một phát hiện khác (sau 5 phút): Xem toàn bộ lịch sử: Sau 3 phút nữa, ghi chú được cập nhật: "
},
{
	"uri": "//localhost:1313/vi/6/6.1/",
	"title": "Ứng phó đối với việc rò rỉ thông tin xác thực IAM Role",
	"tags": [],
	"description": "",
	"content": "Trong mô-đun này, bạn sẽ thực hiện các bước thủ công để mô phỏng một tình huống (rò rỉ thông tin xác thực IAM Role) mà sau đó bạn sẽ điều tra và khắc phục. Bạn sẽ sao chép thông tin xác thực tạm thời của IAM từ EC2 instance và sử dụng chúng để thực hiện các lệnh API từ máy tính cá nhân của bạn. Sau đó, bạn sẽ điều tra phát hiện của GuardDuty cho hoạt động này.\nLấy thông tin xác thực tạm thời của IAM bằng cách sử dụng AWS Systems Manager Để mô phỏng mối đe dọa này, bạn sẽ lấy thông tin xác thực tạm thời của IAM được tạo bởi IAM Role cho EC2. Bạn có thể SSH trực tiếp vào instance và truy vấn metadata hoặc làm theo các bước dưới đây bằng AWS Systems Manager Session Manager.\nSession Manager là một dịch vụ quản lý cung cấp cho bạn quyền truy cập an toàn vào các instance của mình chỉ với một cú nhấp chuột mà không cần mở các cổng inbound và quản lý các máy chủ bastion. Bạn có thể kiểm soát truy cập tập trung vào các instance của mình và có đầy đủ khả năng kiểm tra để đảm bảo tuân thủ các chính sách của công ty.\nTruy cập Session Manager trong bảng điều khiển AWS Systems Manager.\nNhấp vào nút Start Session.\nChọn GuardDuty-ICE-Instance và nhấp vào Start session. Điều này sẽ bắt đầu một phiên shell mà bạn sẽ sử dụng để truy xuất các thông tin xác thực đang hoạt động trên instance. Trong shell, chạy lệnh sau:\nTOKEN=`curl -X PUT \u0026#34;http://169.254.169.254/latest/api/token\u0026#34; -H \u0026#34;X-aws-ec2-metadata-token-ttl-seconds: 21600\u0026#34;` \u0026amp;\u0026amp; curl -H \u0026#34;X-aws-ec2-metadata-token: $TOKEN\u0026#34; http://169.254.169.254/latest/meta-data/ Sau đó chạy lệnh này:\ncurl -H \u0026#34;X-aws-ec2-metadata-token: $TOKEN\u0026#34; http://169.254.169.254/latest/meta-data/iam/security-credentials/GDWorkshop-EC2-Compromised 5. Ghi lại AccessKeyID, SecretAccessKey, và Token. Bây giờ bạn đã lấy được thông tin xác thực tạm thời của IAM từ EC2 instance, hãy sử dụng chúng để thiết lập một hồ sơ AWS CLI trên máy tính cá nhân của bạn. Sau đó, chúng ta sẽ sử dụng hồ sơ này để thực hiện các lệnh API.\nSử dụng thông tin xác thực từ máy tính cá nhân của bạn Tình huống / Báo cáo vấn đề: Trong các bước sau, bạn sẽ mô phỏng việc rò rỉ thông tin xác thực. Để mô phỏng thành công, các lệnh API cần phải được thực hiện từ bên ngoài mạng AWS, nếu không sẽ không tạo ra các phát hiện. Bạn phải chạy các lệnh sau từ máy tính cá nhân của mình. Đừng chạy các lệnh từ AWS CloudShell, từ một tài nguyên AWS khác hoặc khi đang sử dụng VPN của AWS.\nBạn sẽ cần cài đặt AWS CLI trên máy tính cá nhân của mình cho các bước tiếp theo. Nếu bạn chưa cài đặt AWS CLI trên máy tính cá nhân của mình, hãy xem tài liệu hướng dẫn cài đặt: https://docs.aws.amazon.com/cli/latest/userguide/getting-started-install.html\nTừ command prompt, chạy các lệnh sau (thay thế \u0026lt;AccessKeyId\u0026gt;, \u0026lt;SecretAccessKey\u0026gt;, và \u0026lt;Token\u0026gt; bằng thông tin xác thực của bạn). Đảm bảo rằng region tương ứng với region mà bạn đã làm việc. aws configure set profile.badbob.region us-east-1 aws configure set profile.badbob.aws_access_key_id \u0026lt;AccessKeyId\u0026gt; aws configure set profile.badbob.aws_secret_access_key \u0026lt;SecretAccessKey\u0026gt; aws configure set profile.badbob.aws_session_token \u0026lt;Token\u0026gt; Bây giờ bạn đã có hồ sơ của mình, bạn có thể sử dụng nó để thực hiện các lệnh API. Khám phá những gì bạn có quyền truy cập bằng cách chạy các lệnh sau để truy vấn các dịch vụ khác nhau. Đừng ngạc nhiên nếu bạn nhận được một số phản hồi bị từ chối truy cập, điều này là có ý đồ. Chạy các lệnh sau. Bạn có quyền truy cập vào IAM không? aws iam get-user --profile badbob Trả lời: Lệnh này sẽ trả về một lỗi AccessDenied.\naws iam create-user --user-name Chuck --profile badbob 8. Còn về DynamoDB thì sao? Hãy thử các lệnh sau.\naws dynamodb list-tables --profile badbob\naws dynamodb describe-table --table-name GuardDuty-Example-Customer-DB --profile badbob Role và hồ sơ instance được sử dụng ở đây không tuân thủ các nguyên tắc đặc quyền tối thiểu. Tìm hiểu thêm tại đây: https://docs.aws.amazon.com/IAM/latest/UserGuide/best-practices.html#grant-least-privilege\nBạn có thể truy vấn dữ liệu không? aws dynamodb scan --table-name GuardDuty-Example-Customer-DB --profile badbob Tiếp tục chạy các lệnh khác:\naws dynamodb scan --table-name GuardDuty-Example-Customer-DB --profile badbob\naws dynamodb delete-table --table-name GuardDuty-Example-Customer-DB --profile badbob Kiểm tra tài nguyên sau khi xóa aws dynamodb list-tables --profile badbob\nBạn có quyền truy cập vào Systems Manager Parameter Store không? Trả lời: Không. aws ssm describe-parameters --profile badbob\naws ssm get-parameters --names \u0026quot;gd_prod_dbpwd_sample\u0026quot; --profile badbob\naws ssm get-parameters --names \u0026quot;gd_prod_dbpwd_sample\u0026quot; --with-decryption --profile badbob\naws ssm delete-parameter --name \u0026quot;gd_prod_dbpwd_sample\u0026quot; --profile badbob Điều tra phát hiện của GuardDuty Có thể mất đến 30 phút để thấy được phát hiện từ các hành động này trong bảng điều khiển GuardDuty. Chúng tôi khuyên bạn nên làm việc với mô-đun tiếp theo và quay lại bước này sau.\nTình huống / Báo cáo vấn đề Bạn đã được chỉ định một phát hiện của GuardDuty để điều tra và khắc phục. Loại phát hiện của GuardDuty là \u0026ldquo;UnauthorizedAccess:IAMUser/InstanceCredentialExfiltration.OutsideAWS\u0026rdquo;.\nTrong các bước trên, bạn đã mô phỏng việc rò rỉ thông tin xác thực IAM Role. Bây giờ bạn sẽ điều tra phát hiện của GuardDuty được tạo ra từ các hành động bạn đã thực hiện. Bắt đầu bằng cách điều hướng đến bảng điều khiển GuardDuty.\nBạn sẽ thấy một phát hiện với loại UnauthorizedAccess:IAMUser/InstanceCredentialExfiltration.OutsideAWS. Nếu bạn không thấy phát hiện, bạn có thể cần phải làm mới trang và/hoặc đợi vài phút.\nNhấp vào phát hiện UnauthorizedAccess:IAMUser/InstanceCredentialExfiltration.OutsideAWS để xem chi tiết đầy đủ. Khi xem chi tiết phát hiện, bạn có thể thấy rằng đây là một phát hiện có mức độ nghiêm trọng HIGH. TPhát hiện này thông báo cho bạn về các nỗ lực thực hiện các thao tác API của AWS từ một máy chủ bên ngoài EC2, sử dụng thông tin xác thực tạm thời của AWS được tạo trên một EC2 instance trong tài khoản AWS của bạn. Điều này cho thấy EC2 instance của bạn đã bị xâm phạm và thông tin xác thực tạm thời từ instance đã bị rò rỉ đến một máy chủ từ xa bên ngoài AWS. Xem lại quá trình khắc phục tự động Trong tình huống này, đã có thiết lập khắc phục tự động cho loại phát hiện này bằng cách sử dụng Amazon EventBridge và AWS Lambda. AWS Lambda là một dịch vụ tính toán serverless, dựa trên event cho phép bạn chạy code cho hầu hết các loại ứng dụng hoặc dịch vụ backend mà không cần cung cấp hoặc quản lý máy chủ. Bạn có thể kích hoạt Lambda từ hơn 200 dịch vụ AWS và chỉ trả tiền cho những gì bạn sử dụng. Amazon EventBridge là một serverless event bus giúp dễ dàng xây dựng các ứng dụng dựa trên event ở quy mô lớn bằng cách sử dụng các event được tạo từ ứng dụng của bạn và các dịch vụ AWS. EventBridge cung cấp luồng dữ liệu theo thời gian thực từ các nguồn event đến các đích như AWS Lambda. Hãy cùng xem xét quá trình tự động này và xem nó đã hoạt động chưa!\nĐiều hướng đến bảng điều khiển Amazon EventBridge. Từ menu bên trái, trong phần Buses, nhấp vào Rules.\nNhấp vào tên rule đã được cấu hình cho loại phát hiện này, GuardDuty-Event-IAMUser-InstanceCredentialExfiltration. Hãy xem Event Pattern. Event patterns có cùng cấu trúc với các event mà chúng khớp. Rules sử dụng event pattern để chọn các event và gửi chúng đến các mục tiêu. Một event pattern hoặc khớp với một event hoặc không. Tại đây, bạn có thể thấy chúng ta chỉ khớp các event với loại \u0026ldquo;UnauthorizedAccess:IAMUser/InstanceCredentialExfiltration.OutsideAWS\u0026rdquo; từ \u0026ldquo;aws.guardduty\u0026rdquo;. Kết quả JSON:\n{\r\u0026#34;source\u0026#34;: [\u0026#34;aws.guardduty\u0026#34;],\r\u0026#34;detail\u0026#34;: {\r\u0026#34;type\u0026#34;: [\u0026#34;UnauthorizedAccess:IAMUser/InstanceCredentialExfiltration.OutsideAWS\u0026#34;]\r}\r} Khi một event khớp với event pattern đã nêu ở trên, nó có thể được gửi đến các Target. Nhấp vào tab Targets. Rule này được cấu hình để gửi những phát hiện này đến một hàm Lambda và một SNS topic. 17. Hãy kiểm tra hàm Lambda mà chúng ta đang gửi những phát hiện này đến. Truy cập vào bảng điều khiển Lambda và nhấp vào hàm có tên GDWorkshop-Remediation-InstanceCredentialExfiltration. Hàm Lambda này lấy tên Roletừ chi tiết phát hiện và sau đó gán một IAM policy hu hồi tất cả các phiên hoạt động cho role đó.\nfrom __future__ import print_function\rfrom botocore.exceptions import ClientError\rimport json\rimport datetime\rimport boto3\rimport os\rdef handler(event, context):\r# Log out event\rprint(\u0026#34;log -- Event: %s \u0026#34; % json.dumps(event))\r# Create generic function response\rresponse = \u0026#34;Error auto-remediating the finding.\u0026#34;\rtry:\r# Set Clients\riam = boto3.client(\u0026#39;iam\u0026#39;)\rec2 = boto3.client(\u0026#39;ec2\u0026#39;)\r# Set Role Variable\rrole = event[\u0026#39;detail\u0026#39;][\u0026#39;resource\u0026#39;][\u0026#39;accessKeyDetails\u0026#39;][\u0026#39;userName\u0026#39;]\r# Current Time\rtime = datetime.datetime.utcnow().isoformat()\r# Set Revoke Policy\rpolicy = \u0026#34;\u0026#34;\u0026#34;\r{\r\u0026#34;Version\u0026#34;: \u0026#34;2012-10-17\u0026#34;,\r\u0026#34;Statement\u0026#34;: {\r\u0026#34;Effect\u0026#34;: \u0026#34;Deny\u0026#34;,\r\u0026#34;Action\u0026#34;: \u0026#34;*\u0026#34;,\r\u0026#34;Resource\u0026#34;: \u0026#34;*\u0026#34;,\r\u0026#34;Condition\u0026#34;: {\u0026#34;DateLessThan\u0026#34;: {\u0026#34;aws:TokenIssueTime\u0026#34;: \u0026#34;%s\u0026#34;}}\r}\r}\r\u0026#34;\u0026#34;\u0026#34; % time\r# Add policy to Role to Revoke all Current Sessions\riam.put_role_policy(\rRoleName=role,\rPolicyName=\u0026#39;RevokeOldSessions\u0026#39;,\rPolicyDocument=policy.replace(\u0026#39;\\n\u0026#39;, \u0026#39;\u0026#39;).replace(\u0026#39; \u0026#39;, \u0026#39;\u0026#39;)\r)\rresponse = \u0026#34;GuardDuty Remediation | ID:%s: GuardDuty discovered EC2 IAM credentials (Role: %s) being used outside of the EC2 service. All sessions have been revoked. Please follow up with any additional remediation actions.\u0026#34; % (event[\u0026#39;detail\u0026#39;][\u0026#39;id\u0026#39;], role)\rexcept ClientError as e:\rprint(e)\rprint(\u0026#34;log -- Response: %s \u0026#34; % response)\rreturn response Xác minh rằng quá trình khắc phục đã thành công TĐể xác minh rằng phát hiện InstanceCredentialExfiltration đã được khắc phục, bạn có thể chạy lại một trong các lệnh CLI mà bạn đã chạy trước đó trên máy tính cục bộ của mình. Bạn sẽ thấy một phản hồi lỗi \u0026ldquo;with an explicit deny in an identity-based policy\u0026rdquo;. aws dynamodb list-tables --profile badbob\nLưu ý đến độc giả Quá trình khắc phục có thể mất vài phút để hoàn thành.\nBạn cũng có thể xem Role để đánh giá policy đã được đính kèm. Điều hướng đến bảng điều khiển AWS IAM..\nNhấp vào Roles trong menu bên trái.\nNhấp vào Role mà bạn đã xác định trong phát hiện GuardDuty, GDWorkshop-EC2-Compromised.\nTrong tab Permissions, nhấp vào RevokeOldSessions policy. Chú ý đến lệnh từ chối rõ ràng tất cả.\n"
},
{
	"uri": "//localhost:1313/vi/2-introduction-to-threat-detection-and-response-services/2.2-amazon-guardduty/",
	"title": "Amazon GuardDuty",
	"tags": [],
	"description": "",
	"content": "Nội dung GuardDuty - Tổng quan GuardDuty - Phát hiện bảo mật GuardDuty - Protection plans GuardDuty - Building your own threat list GuardDuty - Suppressing findings GuardDuty - Chi phí GuardDuty - Notifications GuardDuty - Retaining findings "
},
{
	"uri": "//localhost:1313/vi/2-introduction-to-threat-detection-and-response-services/2.4-amazon-detective/2.4.2-detective-summary/",
	"title": "Detective - Tóm tắt",
	"tags": [],
	"description": "",
	"content": "Sử dụng trang Summary trong Amazon Detective để xác định các thực thể cần điều tra nguồn gốc của hoạt động trong 24 giờ trước đó. Trang Amazon Detective Summary giúp bạn xác định các thực thể liên quan đến các loại hoạt động bất thường cụ thể. Đây là một trong số nhiều điểm khởi đầu có thể có cho một cuộc điều tra.\nĐể hiển thị trang Summary, trong bảng điều hướng của Detective, chọn Summary. Trang Summary cũng được hiển thị mặc định khi bạn lần đầu mở bảng điều khiển của Detective.\nTừ trang Summary bạn có thể xác định các thực thể đáp ứng các tiêu chí sau:\nCác cuộc điều tra cho thấy các sự kiện bảo mật tiềm ẩn được Detective xác định. Các thực thể tham gia vào hoạt động diễn ra ở các vị trí địa lý mới được quan sát. Các thực thể thực hiện số lượng gọi API lớn nhất. Các EC2 instance có lưu lượng truy cập lớn nhất. Các cụm container có số lượng container lớn nhất. Từ mỗi bảng trang Summary, bạn có thể chuyển đến một thực thể được chọn.\nKhi bạn xem xét trang Summary, bạn có thể điều chỉnh Phạm vi thời gian để xem hoạt động trong bất kỳ khung thời gian 24 giờ nào trong 365 ngày trước đó. Khi bạn thay đổi Ngày và giờ Bắt đầu, Ngày và giờ Kết thúc sẽ tự động được cập nhật thành 24 giờ sau thời gian bắt đầu bạn đã chọn.\nVới Detective, bạn có thể truy cập dữ liệu sự kiện lịch sử lên đến một năm. Dữ liệu này có sẵn thông qua một tập hợp trực quan hóa hiển thị các thay đổi về loại và khối lượng hoạt động trong khoảng thời gian đã chọn. Detective liên kết những thay đổi này với những phát hiện của GuardDuty.\n"
},
{
	"uri": "//localhost:1313/vi/2-introduction-to-threat-detection-and-response-services/",
	"title": "Giới thiệu về các dịch vụ phát hiện và ứng phó mối đe dọa",
	"tags": [],
	"description": "",
	"content": "Nội dung 2.1 AWS Security Hub 2.2 Amazon GuardDuty 2.3 Amazon Inspector 2.4 Amazon Detective\n"
},
{
	"uri": "//localhost:1313/vi/2-introduction-to-threat-detection-and-response-services/2.2-amazon-guardduty/2.2.2-guardduty-findings/",
	"title": "GuardDuty - Phát hiện bảo mật",
	"tags": [],
	"description": "",
	"content": "Một phát hiện của GuardDuty đại diện cho một vấn đề bảo mật tiềm ẩn được phát hiện trong mạng của bạn. GuardDuty tạo ra một phát hiện bất cứ khi nào nó phát hiện hoạt động bất thường và có khả năng độc hại trong môi trường AWS của bạn. Bạn có thể xem và quản lý các phát hiện của GuardDuty trên trang Findings trong bảng điều khiển GuardDuty hoặc bằng cách sử dụng các thao tác CLI hoặc API của GuardDuty.\nXem xét một phát hiện trong GuarDuty Điều hướng đến Findings trong Amazon GuardDuty bằng cách chọn Findings trong bảng điều hướng bên trái. Dưới đây là các phát hiện trong tài khoản AWS Workshop: Chọn một trong các phát hiện trên trang bằng cách chọn hàng. Điều này sẽ mở tóm tắt phát hiện ở phía bên phải của trang. Chi tiết phát hiện thay đổi dựa trên loại phát hiện. Kiểm tra một phát hiện khác trong workshop: Xem xét phát hiện mà bạn đã mở. Hiểu về mức độ nghiêm trọng của phát hiện trong GuardDuty Tìm Severity của phát hiện mà bạn đã chọn. Nếu bạn muốn xem hoặc tải xuống phát hiện dưới dạng JSON, bạn có thể chọn Finding ID ở đầu bản tóm tắt phát hiện. Chọn X ở góc trên bên phải của bản tóm tắt phát hiện để đóng nó. Tìm và lọc các phát hiện bảo mật của GuardDuty Chọn thanh Tìm kiếm nơi có ghi Add filter criteria.\nNhập Severity vào thanh tìm kiếm và chọn Severity, sau đó mở ra một menu phụ với các tùy chọn Low, Medium, và High.\nĐánh dấu vào ô High và nhấp Apply. TĐiều này sẽ cập nhật danh sách các phát hiện hiển thị tương ứng. Quản lý các phát hiện bảo mật của GuardDuty Với một phát hiện được chọn, chọn menu thả xuống Actions (góc trên bên phải của trang). Nhấp \u0026ldquo;Archive\u0026rdquo; để lưu trữ phát hiện. Lưu trữ phát hiện sẽ ẩn nó khỏi danh sách các phát hiện hiện tại. Để xem nó, chọn menu thả xuống \u0026ldquo;Current\u0026rdquo;, và chọn \u0026ldquo;Archived\u0026rdquo; để xem phát hiện mà bạn vừa lưu trữ. Kết quả: Để hủy lưu trữ phát hiện, chọn nó, và sau đó nhấp lại vào menu thả xuống Actions (góc trên bên phải của trang). Lần này, nhấp \u0026ldquo;Unarchive\u0026rdquo; để hủy lưu trữ phát hiện. "
},
{
	"uri": "//localhost:1313/vi/2-introduction-to-threat-detection-and-response-services/2.3-amazon-inspector/2.3.2-inspector-dashboard/",
	"title": "Inspector - Bảng điều khiển",
	"tags": [],
	"description": "",
	"content": "Kiểm tra bảng điều khiển của Inspector Điều hướng đến Inspector Dashboard. https://us-east-1.console.aws.amazon.com/inspector/v2/home?region=us-east-1#/dashboard\nỞ đầu trang, bạn có thể thấy Environment coverage. Lưu ý rằng chỉ có một phần trăm các Instance được bảo vệ. Bạn có thể chọn phần trăm đó để xem chi tiết hơn về các instance nào của bạn đang được quét.\nTrong bảng điều khiển, hãy kiểm tra Risk Based Remediations gần đầu trang. Phần khắc phục dựa trên rủi ro hiển thị năm phần mềm hàng đầu với các lỗ hổng nghiêm trọng ảnh hưởng đến nhiều tài nguyên nhất trong môi trường của bạn. Khắc phục những phần mềm này có thể giảm đáng kể số lượng rủi ro nghiêm trọng đối với môi trường của bạn. Chọn tên phần mềm để xem chi tiết lỗ hổng liên quan và các tài nguyên bị ảnh hưởng. Trong bảng điều khiển, bạn cũng có thể xem xét:\nCác kho lưu trữ Amazon ECR có nhiều phát hiện nghiêm trọng nhất Các Amazon ECR container image có nhiều phát hiện nghiêm trọng nhất Các Amazon EC2 Instance có nhiều phát hiện nghiêm trọng nhất Các Amazon Machine Image (AMI) có nhiều phát hiện nghiêm trọng nhất Các hàm AWS Lambda có nhiều phát hiện nghiêm trọng nhất Trình phát hiện mã để quét mã Lambda Hãy xem qua một số phát hiện. Chọn một phát hiện để xem chi tiết hơn. Thêm một số thông tin Bạn có thể chọn techniques để biết thêm thông tin. "
},
{
	"uri": "//localhost:1313/vi/7/7.2/",
	"title": "Quản lý lỗ hổng bảo mật cho các ứng dụng serverless",
	"tags": [],
	"description": "",
	"content": "\rTình huống / Báo cáo vấn đề: Đội ngũ của bạn đang hợp tác với một nhóm phát triển ứng dụng để tạo ra một ứng dụng bảo mật mới bằng cách sử dụng AWS Serverless Application Model. Công việc của bạn là sử dụng Amazon Inspector để phát hiện và khắc phục các lỗ hổng bảo mật trong ứng dụng ngay khi chúng được phát hiện.\nBạn sẽ triển khai ứng dụng severless với AWS Serverless Application Model. AWS Serverless Application Model (SAM) là một framework mã nguồn mở để xây dựng các ứng dụng severless. Nó cung cấp cú pháp rút gọn để biểu diễn các hàm, API, cơ sở dữ liệu và ánh xạ nguồn sự kiện.\nBạn sẽ bắt đầu bằng cách sử dụng AWS Cloud9 để sao chép ứng dụng từ AWS CodeCommit. AWS Cloud9 là một môi trường phát triển tích hợp trên đám mây (IDE) cho phép bạn viết, chạy và gỡ lỗi code của mình chỉ với một trình duyệt. Nó bao gồm trình chỉnh sửa code, trình gỡ lỗi và terminal. Cloud9 được cài sẵn các công cụ cần thiết cho các ngôn ngữ lập trình phổ biến và AWS Command Line Interface (CLI) đã được cài đặt sẵn nên bạn không cần cài đặt các tệp hoặc cấu hình máy tính của mình cho workshop này.\nTại thời workshop thảo này được tóm tắt, Cloud9 và CodeCommit không còn được hỗ trợ. Vì vậy, phần này chỉ để tham khảo.\nThiết lập Cloud9 và triển khai ứng dụng severless của bạn Truy cập AWS Cloud9, https://us-east-1.console.aws.amazon.com/cloud9control/home?region=us-east-1\nNhấp vào Create Environment.\nNhập \u0026ldquo;serverless-appsec\u0026rdquo; vào Name field và giữ nguyên các tùy chọn mặc định khác.\nNhấp vào Create ở cuối trang.\nĐợi thông báo \u0026ldquo;Successfully created serverless-appsec\u0026hellip;\u0026rdquo;.\nNhấp vào liên kết được hiển thị để mở IDE Cloud9.\nBạn sẽ thấy một terminal ở cuối IDE. Bạn có thể mở rộng nó để có nhiều không gian làm việc hơn. Bạn sẽ chạy các lệnh CLI trong terminal này trong suốt workshop. Giữ cho IDE Cloud9 mở trong trình duyệt.\nXác minh rằng người dùng của bạn đã đăng nhập bằng cách chạy lệnh sau trong terminal của Cloud9 ở cuối trang. aws sts get-caller-identity\nBạn sẽ nhận được phản hồi bao gồm Account, UserId và Arn của bạn.\nChúng tôi đã có một ứng dụng trong AWS CodeCommit. Nếu muốn, bạn có thể dành một chút thời gian để kiểm tra nó. https://us-east-1.console.aws.amazon.com/codesuite/codecommit/repositories/appsec-serverless-demoapp/browse?region=us-east-1\n11. Hãy sao chép dụng hiện có vào môi trường Cloud9. Chạy lệnh sau trong terminal của Cloud9. git clone https://git-codecommit.us-east-1.amazonaws.com/v1/repos/appsec-serverless-demoapp\nChuyển đến thư mục ứng dụng bằng cách chạy lệnh sau. cd appsec-serverless-demoapp\nỨng dụng mẫu được xây dựng bằng AWS SAM. Khi đang ở trong thư mục gốc của ứng dụng, sử dụng lệnh sau để xây dựng ứng dụng và đợi cho đến khi hoàn tất. sam build --use-container\nTiếp theo, sử dụng lệnh deploy với tùy chọn guided để chỉ định cấu hình triển khai. Nó sẽ nhắc bạn nhiều lần, như được ghi lại trong hướng dẫn sau. sam deploy --guided Khi bạn build, AWS SAM CLI sẽ tạo thư mục .aws-sam và sắp xếp các dependency của hàm, code của dự án và các tệp dự án của bạn ở đó. Tại prompt Stack Name [appsec-serverless-demoapp2]: nhấn enter.\nTại prompt AWS Region [us-east-1]: nhấn enter.\nTại prompt Confirm changes before deploy [Y/n]: nhập \u0026ldquo;Y\u0026rdquo; và nhấn enter.\nTại prompt Allow SAM CLI IAM role creation [Y/n]: nhập \u0026ldquo;Y\u0026rdquo; và nhấn enter.\nTại prompt Disable rollback [y/N]: nhập \u0026ldquo;N\u0026rdquo; và nhấn enter.\nTại prompt HelloWorldFunction has no authentication. Is this okay? [y/N]: nhập \u0026ldquo;y\u0026rdquo; và nhấn enter.\nTại prompt LoggingFunction has no authentication. Is this okay? [y/N]: nhập \u0026ldquo;y\u0026rdquo; và nhấn enter..\nTại prompt Save arguments to configuration file [Y/n]: nhập \u0026ldquo;Y\u0026rdquo; và nhấn enter.\nTại prompt SAM configuration file [samconfig.toml]: nhấn enter.\nTại prompt SAM configuration environment [default]: nhấn enter. Tại prompt Deploy this changeset? [y/N]: nhập \u0026ldquo;y\u0026rdquo; và nhấn enter.\nSẽ mất khoảng 2 phút để tạo stack. Có thể mất vài phút để Amazon Inspector phát hiện các hàm mới và tạo ra các phát hiện.\nBạn có thể kiểm tra lại từ CloudFormation Stacks:\nXem lại các phát hiện trong Amazon Inspector Mở Amazon Inspector trong một tab mới. https://us-east-1.console.aws.amazon.com/inspector/v2/home?region=us-east-1\nTừ thanh điều hướng, mở trang By Lambda function dưới phần Findings.\nỞ đây bạn sẽ thấy một số hàm Lambda bị gắn cờ có lỗ hổng bảo mật. Nhấp vào tên của hàm bắt đầu bằng appsec-serverless-demoapp2-LoggingFunction- để xem chi tiết hàm Lambda. Nếu bạn chưa thấy, bạn có thể cần đợi thêm vài phút và làm mới trang. Phát hiện của nó: Phát hiện CWE tương ứng: 30. Lưu ý có một phát hiện với tiêu đề \u0026ldquo;CWE-117,93 - Log injection\u0026rdquo;. Nhấp vào tiêu đề của phát hiện để mở rộng chi tiết phát hiện. Ở đây bạn có thể xem thông tin quan trọng, bao gồm mô tả và mức độ nghiêm trọng. Báo cáo lỗ hổng bảo mật cũng bao gồm đường dẫn tệp, vị trí lỗ hổng và đề xuất khắc phục, bao gồm cả đề xuất thay đổi code. Lưu ý thay đổi bạn cần thực hiện.\nKhắc phục lỗ hổng code Quay lại IDE Cloud9.\nTìm thư mục tệp trong bảng điều hướng bên trái. Mở tệp app.py nằm trong thư mục \u0026ldquo;logging_sample\u0026rdquo;. Làm theo đề xuất khắc phục từ Inspector. Thay thế dòng code sau: logger.info(\u0026quot;Processing %s\u0026quot;, filename)\nbằng dòng code này: logger.info(\u0026quot;Processing %s\u0026quot;, urllib.parse.quote(filename))\nNếu bạn gặp lỗi, có thể do đề xuất yêu cầu một import mới. Nếu bạn gặp lỗi, hãy đảm bảo kiểm tra các import và khoảng cách của bạn. Thực hiện các thay đổi cần thiết. Code của bạn sẽ trông giống như: Lưu tệp, sau đó build lại ứng dụng sam bằng lệnh sau. sam build --use-container 35. Sau khi quá trình build hoàn tất, hãy deploy ứng dụng bằng lệnh sau và chờ quá trình triển khai hoàn thành. sam deploy --guided\nSử dụng các phản hồi tương tự cho việc triển khai được hướng dẫn mà bạn đã đưa ra ở các bước 15-24.\nTại prompt Deploy this changeset? [y/N]: nhập \u0026ldquo;y\u0026rdquo; và nhấn enter. Xác minh việc khắc phục. Quay lại trang By Lambda function trong Amazon Inspector. https://us-east-1.console.aws.amazon.com/inspector/v2/home?region=us-east-1#/findings/lambda/ Nhấp lại vào tên của hàm bắt đầu bằng appsec-serverless-demoapp2-LoggingFunction- để xem chi tiết hàm Lambda. Đặt Finding status bên cạnh Filter criteria thành \u0026ldquo;Show all\u0026rdquo;.\nPhát hiện có tiêu đề \u0026ldquo;CWE-117,93 - Log injection\u0026rdquo; giờ đây sẽ có trạng thái là Closed. Nếu không, chờ vài phút. Inspector sẽ tự động phát hiện sự thay đổi và cập nhật phát hiện cho phù hợp.\n"
},
{
	"uri": "//localhost:1313/vi/2-introduction-to-threat-detection-and-response-services/2.1-aws-security-hub/2.1.2-security-hub-dashboard/",
	"title": "Security Hub - Bảng điều khiển",
	"tags": [],
	"description": "",
	"content": "Security Hub summary Điều hướng đến trang Summary page trong Security Hub. AWS Security Hub summary page Ở đầu trang, hãy xem lại tiện ích Security standards. Phần này hiển thị điểm số bảo mật tổng quan gần đây nhất của bạn và điểm số bảo mật cho từng tiêu chuẩn Security Hub. Điểm số bảo mật, dao động từ 0–100 phần trăm, đại diện cho tỷ lệ phần trăm của các kiểm soát đã vượt qua so với tất cả các kiểm soát đã bật của bạn. Hãy dành vài phút để xem các insight được tạo ra trên trang Summary. Bạn có thể thấy những tài nguyên nào trong tài khoản của bạn đang gặp phải nhiều kiểm tra bảo mật nhất không? Một trong các tiện ích cung cấp cái nhìn tổng quan về các tài nguyên đã tạo ra nhiều phát hiện nhất, được phân loại theo các loại tài nguyên. Cuộn xuống dưới các biểu đồ ở phần Most common threat type và Software vulnerabilities with exploits. Xem xét các mối đe dọa và lỗ hổng được tổng hợp trong tài khoản của bạn. Xem chi tiết về các phát hiện từ AWS GuardDuty. Chọn một trong số đó để xem thêm chi tiết: "
},
{
	"uri": "//localhost:1313/vi/5/5.2/",
	"title": "Thiết lập email tổng kết lỗ hổng hàng tuần",
	"tags": [],
	"description": "",
	"content": "\rScenario / Problem Statement: Bạn đã được giao nhiệm vụ thiết lập một email tóm tắt hàng tuần để nêu bật những thông tin chính dựa trên dữ liệu mà bạn đang tổng hợp trong Security Hub. Ban đầu, email cần nêu bật tình hình bảo mật hiện tại của bạn, các lỗ hổng bảo mật ảnh hưởng đến nhiều instances và images nhất, và các phát hiện có mức độ ưu tiên cao nhất.\nLưu ý cho Người Tham Gia: Bạn phải hoàn thành module có tên \u0026ldquo;Sử dụng insights để ưu tiên và đo lường\u0026rdquo; trước khi bắt đầu module này.\nTrong kịch bản này, bạn sẽ viết một Lambda function để gọi Security Hub và Amazon Inspector APIs để lấy các chi tiết cần thiết. Bạn sẽ sử dụng EventBridge để gọi Lambda hàng tuần, và bạn sẽ đăng ký nhận email bằng cách sử dụng AWS Simple Notification Service.\nAmazon Inspector là một dịch vụ quản lý lỗ hổng tự động liên tục quét các khối lượng công việc AWS để tìm các lỗ hổng phần mềm và phơi nhiễm mạng không mong muốn. Các phát hiện về lỗ hổng từ Inspector được bao gồm trong email tóm tắt để cung cấp một cái nhìn toàn diện hơn về các lỗ hổng có thể tồn tại trong tài khoản mà email tóm tắt đang được tạo ra.\nCấu hình Amazon Simple Notification Service topic Điều hướng đến Amazon SNS\nNhấp vào Topics trong bảng điều hướng bên trái.\nNhấp vào Create topic.\nChọn loại Standard.\nĐặt tên là weekly-vulnerability-email. Để nguyên mọi thứ khác và nhấp vào Create topic ở cuối trang. Điều này sẽ tạo chủ đề.\nGhi chú lại SNS Topic ARN. Bạn sẽ cần đến nó sau này. ARN trông giống như \u0026ldquo;arn:aws:sns:us-******:############:weekly-vulnerability-email\u0026rdquo;.\nSubscribe to the topic Từ trang weekly-vulnerability-email topic, nhấp vào Create subscription.\nTrên trang Create subscription, dưới Protocol, chọn email.\nTrên trang Create subscription, dưới Endpoint, nhập địa chỉ email mà bạn muốn sử dụng cho workshop này để nhận thông báo. Bạn có thể hủy đăng ký sau khi hoàn thành workshop.\nNhấp vào Create subscription.\nTrong vài phút, bạn sẽ nhận được một email tại địa chỉ email bạn đã nhập. Xác nhận đăng ký bằng cách nhấp vào \u0026ldquo;Confirm subscription\u0026rdquo; trong email.\nCreate the Lambda function to author the email Đi đến https://console.aws.amazon.com/lambda/home?#/create/function?intent=authorFromScratch Trên trang Create function, đặt Function name là weekly-vulnerability-email và chọn Node.js 20.x cho Runtime.\nNhấp vào Create function. Sao chép và dán đoạn mã sau vào trình soạn thảo được gắn nhãn Code source (xóa mã hiện có).\n\u0026#39;use strict\u0026#39;;\rimport {\rSecurityHubClient,\rGetInsightsCommand,\rGetInsightResultsCommand\r} from \u0026#34;@aws-sdk/client-securityhub\u0026#34;;\rimport {\rInspector2Client,\rListFindingAggregationsCommand\r} from \u0026#34;@aws-sdk/client-inspector2\u0026#34;;\rimport {\rSNSClient,\rPublishCommand\r} from \u0026#34;@aws-sdk/client-sns\u0026#34;;\rconst securityhubClient = new SecurityHubClient();\rconst inspectorClient = new Inspector2Client();\rconst snsClient = new SNSClient();\rexport const handler = async (event, context) =\u0026gt; {\rtry {\rlet msg = \u0026#39;\u0026#39;;\rconst getInsights = new GetInsightsCommand({});\rconst allCustomInsights = await securityhubClient.send(getInsights);\rconst insightsToFetch = [\r...allCustomInsights.Insights, // include all custom insights\r...[\r{\rName: \u0026#34;Top products by counts of findings\u0026#34;,\rInsightArn: \u0026#34;arn:aws:securityhub:::insight/securityhub/default/28\u0026#34;\r}, // include default insight 28\r{\rName: \u0026#34;Severity by counts of findings\u0026#34;,\rInsightArn: \u0026#34;arn:aws:securityhub:::insight/securityhub/default/29\u0026#34;\r} // include default insight 29\r]\r];\rconst insightsToFetchResults = await Promise.all(insightsToFetch.map(async (o, i) =\u0026gt; {\rlet getInsightResults = new GetInsightResultsCommand({InsightArn: o.InsightArn});\rlet insightResults = await securityhubClient.send(getInsightResults);\rreturn {...insightResults, Name: o.Name};\r}));\rconst results = insightsToFetchResults.forEach((o,i) =\u0026gt; {\rmsg += `------------------------------------\\nInsight: ${o.Name}\\n------------------------------------\\n`;\ro.InsightResults.ResultValues.slice(0,9).forEach((o,i) =\u0026gt; {\rmsg += `${o.GroupByAttributeValue}: ${o.Count}\\n`;\r}); msg += `\\nFollow the link below to see all ${o.InsightResults.ResultValues.length} results from this insight in Security Hub:\\n`;\rmsg += `https://us-east-1.console.aws.amazon.com/securityhub/home?region=us-east-1#/insights/${o.InsightResults.InsightArn}\\n\\n`;\r});\rconst listFindingAggregationsInput = {\r\u0026#34;aggregationType\u0026#34;: \u0026#34;PACKAGE\u0026#34;,\r\u0026#34;maxResults\u0026#34;: 5,\r\u0026#34;aggregationRequest\u0026#34;: {\r\u0026#34;packageAggregation\u0026#34;: {\r\u0026#34;sortOrder\u0026#34;: \u0026#34;DESC\u0026#34;,\r\u0026#34;sortBy\u0026#34;: \u0026#34;CRITICAL\u0026#34;\r}\r}\r};\rconst listFindingAggregations = new ListFindingAggregationsCommand(listFindingAggregationsInput);\rconst inspectorFindingAggregations = await inspectorClient.send(listFindingAggregations);\rmsg += \u0026#39;\\n------------------------------------\\nSoftware vulnerabilities impacting the most instances and images:\\n------------------------------------\\n\u0026#39;;\rinspectorFindingAggregations.responses.forEach(pkg =\u0026gt; {\rmsg += `Package: ${pkg.packageAggregation.packageName}:\\nCounts of findings by severity:\\n`;\rmsg += `Critical: ${pkg.packageAggregation.severityCounts.critical}, `;\rmsg += `High: ${pkg.packageAggregation.severityCounts.high}, `;\rmsg += `Medium: ${pkg.packageAggregation.severityCounts.medium} \\n\\n`;\r});\rconst emailTopicArn = process.env[\u0026#39;emailTopicArn\u0026#39;];\rconst messageInput = {\rTopicArn: emailTopicArn,\rMessage: msg,\rSubject: \u0026#34;Weekly Vulnerability Report\u0026#34;,\r};\rconst publish = new PublishCommand(messageInput);\rconst publishResponse = await snsClient.send(publish);\rreturn `Successfully sent message id ${publishResponse.MessageId}`;\r} catch (error) {\rconsole.error(\u0026#39;Error:\u0026#39;, error);\rthrow error;\r}\r} Sau đó từ menu Code source, nhấp vào File rồi Save. Sau đó nhấp vào nút Deploy.\nLưu ý ở dòng 76 của mã Lambda, chúng ta tham chiếu đến một biến môi trường nơi chúng ta lưu trữ ARN của SNS Topic. Chúng ta cần cấu hình điều đó. Ngay phía trên phần Code source, nhấp vào tab Configuration. Sau đó, nhấp vào Environment Variables từ bảng điều hướng bên trái.\nNhấp vào Edit dưới phần Environment Variables. Sau đó nhấp vào Add environment variable.\nNhập \u0026ldquo;emailTopicArn\u0026rdquo; dưới Key. Nhập ARN của SNS Topic mà bạn đã tạo trong bước 6 làm Value. Đảm bảo không có khoảng trắng.\nNhấp vào Save.\nSet the permissions of the Lambda function Bây giờ chúng ta cần cấu hình quyền cho Lambda function để nó có thể thực thi các lệnh cần thiết để gửi email của chúng ta. Dưới cùng tab Configuration, nhấp vào Permissions từ bảng điều hướng bên trái. Chúng ta cần sửa đổi vai trò thực thi cho Lambda function này.\nNhấp vào Role name. Tên này sẽ bắt đầu bằng \u0026ldquo;weekly-vulnerability-email-role-\u0026rdquo;. Điều này sẽ đưa bạn đến vai trò trong Identity and Access Management (IAM) console.\nTừ trang Role, nhấp vào nút Add permissions và chọn Create inline policy.\nTrên trang Create policy, nhấp vào tab JSON. Sau đó thay thế chính sách hiện tại bằng chính sách sau. Chính sách này cấp quyền cho Lambda function để truy xuất thông tin về Security Hub insights, truy xuất các phát hiện về lỗ hổng từ Inspector, và khả năng gửi tin nhắn đến SNS. Trong workshop này, chúng ta sẽ đơn giản cho phép Lambda function của chúng ta gửi tin nhắn đến bất kỳ SNS Topic nào, nhưng trong bất kỳ môi trường khác, tốt nhất là giới hạn điều này cho các ARN cụ thể.\n{\r\u0026#34;Version\u0026#34;: \u0026#34;2012-10-17\u0026#34;,\r\u0026#34;Statement\u0026#34;: [\r{\r\u0026#34;Effect\u0026#34;: \u0026#34;Allow\u0026#34;,\r\u0026#34;Action\u0026#34;: [\r\u0026#34;securityhub:GetInsightResults\u0026#34;,\r\u0026#34;securityhub:GetInsightFindingTrend\u0026#34;,\r\u0026#34;inspector2:ListFindingAggregations\u0026#34;,\r\u0026#34;sns:Publish\u0026#34;,\r\u0026#34;securityhub:GetInsights\u0026#34;\r],\r\u0026#34;Resource\u0026#34;: \u0026#34;*\u0026#34;\r}\r]\r} Nhấp vào nút Next.\nĐặt tên cho chính sách của bạn là AllowSNSPublishAndInspectorList và nhấp vào Create policy.\nSet timeout of the Lambda function Bây giờ chúng ta cần cấu hình thời gian chờ của Lambda function để nó có đủ thời gian thực thi tất cả các lệnh cần thiết để gửi email của chúng ta. Dưới cùng tab Configuration, nhấp vào General Configuration từ bảng điều hướng bên trái.\nNhấp vào Edit.\nĐặt Timeout là 1 min 0 sec.\nNhấp vào Save.\nTest the vulnerability summary email Chúng ta đã sẵn sàng để kiểm tra email tóm tắt lỗ hổng! Quay lại Lambda console và mở chức năng mà bạn đã tạo.\nBên cạnh phần Code source, nhấp vào Test dropdown và chọn Configure test event. Một cửa sổ Configure test event sẽ mở ra.\nDưới Event name, nhập \u0026ldquo;Generate-Email\u0026rdquo;. Sau đó nhấp vào Save. Chúng ta không cần lo lắng về Event JSON vì chúng ta không sử dụng nó trong chức năng của mình. Bạn sẽ thấy một biểu ngữ xuất hiện thông báo \u0026ldquo;The test event Generate-Email was successfully saved.\u0026rdquo;\nNhấp vào Test một lần nữa để chạy thử nghiệm bằng cách sử dụng cấu hình của bạn. Bạn sẽ thấy kết quả thực thi dưới phần Code Source. Trong vài phút, bạn sẽ nhận được một email với tóm tắt lỗ hổng của mình!\nLưu ý cho Người Tham Gia: Nếu bạn không nhận được email, hãy kiểm tra kết quả thực thi để tìm lỗi. Đảm bảo rằng ARN của SNS Topic mà bạn đã cấu hình biến môi trường kết thúc bằng \u0026ldquo;weekly-vulnerability-email\u0026rdquo;. Nếu có bất kỳ ký tự nào sau \u0026ldquo;email\u0026rdquo;, hãy xóa chúng và lưu biến môi trường. Sau đó thử lại.\nSchedule the weekly vulnerability summary email with EventBridge Cuối cùng, chúng ta cần tạo một EventBridge rule sẽ gọi Lambda function mà chúng ta đã tạo hàng tuần. Mở EventBridge. https://us-east-1.console.aws.amazon.com/events/home\nChọn EventBridge Schedule ở bên phải. Nhấp vào Create schedule.\nTrên trang Specify schedule detail, đặt tên rule của bạn là weekly-vulnerability-email.\nDưới Schedule pattern chọn \u0026ldquo;Recurring schedule\u0026rdquo;.\nĐể nguyên \u0026ldquo;Cron-based schedule\u0026rdquo; được chọn.\nChúng ta sẽ lên lịch email mỗi thứ Hai lúc 7 giờ sáng CDT. Dưới Cron expression, đặt cron( 0 12 ? * 2 * ). Chọn Local time zone từ danh sách thả xuống. Bạn sẽ thấy một bản xem trước của Next 10 trigger date(s).\nDưới \u0026ldquo;Flexible time window\u0026rdquo;, chọn \u0026ldquo;Off\u0026rdquo;. Sau đó nhấp vào Next.\nTrên bước Select target, chọn AWS Lambda - Invoke. Sau đó chọn \u0026ldquo;weekly-vulnerability-email\u0026rdquo; từ danh sách thả xuống Lambda function. Nhấp vào Next.\nTrên bước Settings, nhấp vào Next.\nTrên bước Review and create schedule, nhấp vào Create schedule.\n"
},
{
	"uri": "//localhost:1313/vi/3/3.2/",
	"title": "Tổng hợp phát hiện từ nhiều tài khoản AWS",
	"tags": [],
	"description": "",
	"content": "Khi bạn sử dụng cả Security Hub và AWS Organizations cùng nhau, bạn có thể tự động kích hoạt Security Hub cho tất cả các tài khoản của bạn, bao gồm cả các tài khoản mới khi chúng được thêm vào. Điều này làm tăng vi kiểm tra và phát hiện của Security Hub cung cấp cái nhìn tổng quan và chính xác hơn về tình trạng bảo mật tổng thể của bạn. Bằng cách sử dụng tính năng quản trị viên ủy quyền của Security Hub cùng với cấu hình trung tâm, bạn đạt được cái nhìn tập trung về bảo mật của bạn trên AWS qua các dịch vụ AWS và dịch vụ đối tác, trên các tài khoản và các regions.\nLưu ý cho độc giả: Mặc dù workshop nói rằng \u0026ldquo;At this time, we are unable to demonstrate multi-account aggregation in this workshop\u0026rdquo;. Tuy nhiên, trong phần Automated Security Response on AWS sơ đồ kiến trúc cho thấy rằng các stack CloudFormation đã được triển khai ở nhiều tài khoản AWS.\n"
},
{
	"uri": "//localhost:1313/vi/4/4.2/",
	"title": "Tự động ẩn các phát hiện bảo mật với quy mô lớn",
	"tags": [],
	"description": "",
	"content": "\rTình huống / Báo cáo vấn đề: Sau khi tập trung tất cả các cảnh báo bảo mật của bạn và bắt đầu ưu tiên các phát hiện và kiểm soát để tập trung vào trước tiên, nhóm của bạn đã quyết định rằng có quá nhiều phát hiện. Trong nỗ lực giảm nhiễu, bạn đã được giao nhiệm vụ thiết lập các quy tắc tạm thời để ẩn các phát hiện có mức độ ưu tiên quá thấp để tập trung vào lúc này.\nTự động hóa việc ẩn các phát hiện để giảm nhiễu Cuối cùng, chúng ta sẽ tạo một quy tắc để ẩn các phát hiện. Khi bạn đang sử dụng Security Hub, đặc biệt nếu bạn có một môi trường lớn hoặc sử dụng nhiều tích hợp có sẵn trong Security Hub, bạn có thể thấy cần thiết phải giảm khối lượng các phát hiện thông qua việc ẩn chúng. Điều này chỉ được khuyến nghị nếu nó giúp bạn tập trung vào các phát hiện quan trọng nhất. Nếu bạn thấy cần thiết phải sử dụng quy tắc ẩn, bạn chỉ nên ẩn các phát hiện có mức độ ưu tiên thấp, và bạn nên thực hiện điều này như một biện pháp tạm thời và xem xét lại quy tắc ẩn sau khi bạn đã tiến bộ trong việc cải thiện tình trạng bảo mật của mình và giảm số lượng các phát hiện.\nQuay lại trang Automations trong Security Hub.\nNhấp vào Create rule.\nChọn Create custom rule.\nThay đổi tên Rule thành \u0026ldquo;Suppress low severity Inspector findings\u0026rdquo;.\nSao chép tên Rule vào Rule description hoặc nhập mô tả của riêng bạn.\nĐối với Criteria đầu tiên, chọn ProductName cho Key. Chọn EQUALS cho Operator. Nhập \u0026ldquo;Inspector\u0026rdquo; cho Value.\nNhấp vào Add criteria.\nĐối với Criteria thứ hai, chọn SeverityLabel cho Key. Chọn EQUALS cho Operator. Chọn INFORMATIONAL cho Value.\nNhấp vào Add another value dưới tiêu chí bạn vừa thêm. Một lần nữa, chọn EQUALS cho Operator. Chọn LOW cho Value. Bây giờ rule sẽ áp dụng cho các phát hiện từ Inspector với nhãn mức độ nghiêm trọng là INFORMATIONAL hoặc LOW.\nNhấp vào Refresh để xem trước các phát hiện phù hợp. Dưới Automated action, chọn SUPPRESSED cho Workflow status.\nCuộn xuống Note, và nhập \u0026ldquo;Automatically suppressed via automation.\u0026rdquo; Giữ nguyên các cài đặt mặc định khác và nhấp vào Create rule. Nếu bạn dự định ẩn các phát hiện, bạn nên xem xét lại các rule ẩn theo lịch trình để đảm bảo chúng vẫn cần thiết và chấp nhận được đối với tổ chức của bạn. Nếu cần, bạn có thể chỉnh sửa hoặc xóa các quy tắc tự động hóa.\nThử xóa một rule. Từ trang Automations, chọn ô bên cạnh rule có tên \u0026ldquo;Suppress low severity Inspector findings\u0026rdquo;.\nNhấp vào menu thả xuống Action, và chọn Delete.\nKhi hộp thoại xác nhận xuất hiện, nhấp vào Delete lần nữa. "
},
{
	"uri": "//localhost:1313/vi/6/6.2/",
	"title": "Ứng phó với S3 Bucket bị xâm phạm",
	"tags": [],
	"description": "",
	"content": "\rTình huống / Báo cáo vấn đề: Bạn được giao nhiệm vụ điều tra và khắc phục một phát hiện từ GuardDuty. Loại phát hiện GuardDuty là \u0026ldquo;Stealth:S3/ServerAccessLoggingDisabled\u0026rdquo;.\nĐiều hướng đến bảng điều khiển GuardDuty và mở trang Findings. Bạn sẽ thấy các phát hiện với loại bắt đầu bằng Stealth:S3 và Policy:S3. Nếu bạn không thấy những phát hiện này, hãy thử làm mới trang. Nhấp vào phát hiện Stealth:S3/ServerAccessLoggingDisabled để xem chi tiết đầy đủ. Bạn có thể thấy chi tiết phát hiện bao gồm thông tin về những gì đã xảy ra, những tài nguyên AWS nào có liên quan đến hoạt động đáng ngờ, thời điểm diễn ra hoạt động này và các thông tin bổ sung khác. Dưới phần Resource Affected, tìm xem S3 bucket nào liên quan đến phát hiện này, IAM User (User Name) nào đã thực hiện thay đổi và Access key ID đã được sử dụng. Phát hiện này thông báo cho bạn rằng tính năng ghi log truy cập máy chủ của S3 đã bị tắt cho bucket. Nếu bị tắt, không có log nào được tạo cho bất kỳ hành động nào được thực hiện trên S3 bucket hoặc trên các object trong bucket, trừ khi tính năng ghi log cấp object S3 được bật. Mặc dù đây là phát hiện có mức độ nghiêm trọng thấp, nhưng điều quan trọng là phải điều tra lý do tại sao ai đó lại tắt tính năng ghi log. Việc tắt tính năng ghi log có thể được sử dụng để che giấu những thay đổi không nên thực hiện. Để tìm hiểu thêm, hãy xem S3 Server Access Logging.\nĐiều tra một phát hiện S3 Policy khác. Nhấp vào phát hiện Policy:S3/BucketBlockPublicAccessDisabled. Phát hiện này được tạo ra khi cài đặt chặn quyền truy cập công cộng bị tắt nếu chúng đã được bật trước đó. Đây có thể là một thay đổi có chủ ý hoặc có thể là một thay đổi vô tình hoặc cố ý đối với cài đặt bucket. Trong tình huống như vậy, tốt nhất bạn nên xác nhận với chủ sở hữu bucket xem đây có phải là cố ý hay không. Với bối cảnh về việc bucket được sử dụng để làm gì, điều này có vẻ đáng ngờ. Để xác định các hành động mà IAM User đã thực hiện, hãy nhấp vào từng phát hiện. Tìm các lệnh API đã được thực hiện bằng cách nhìn dưới phần Action và sau đó là API. Đây là các sự kiện quản lý hay sự kiện data plane? GuardDuty có thể phân tích khối lượng dữ liệu lớn và xác định các mối đe dọa tiềm ẩn trong môi trường của bạn. Tuy nhiên, điều quan trọng vẫn là phải liên kết các dữ liệu khác để hiểu rõ hơn phạm vi tiềm ẩn của mối đe dọa. Trong trường hợp này, bạn sẽ sử dụng các chi tiết trong phát hiện này để xác định hoạt động người dùng trong quá khứ trong AWS CloudTrail. Bạn có thể điều tra thêm và phân tích nguyên nhân cốt lõi của phát hiện bảo mật này với Amazon Detective.\nNhững phát hiện IAM này được tạo ra bởi \u0026ldquo;malicious EC2\u0026rdquo; instance thực hiện các lệnh API. GuardDuty tạo ra các phát hiện cho các lệnh API này, như vô hiệu hóa ghi log S3 và cài đặt chặn truy cập công khai của S3. Khắc phục thủ công S3 bucket Bạn đã xác nhận với chủ sở hữu bucket rằng cần khôi phục lại các thay đổi. Tiếp tục khắc phục các phát hiện S3.\nĐiều hướng đến bảng điều khiển AWS S3.\nNhấp vào tên của S3 bucket bắt đầu bằng \u0026ldquo;guardduty-example-finance\u0026rdquo;.\nNhấp vào tab Properties, cuộn xuống Server access logging, nhấp Edit và chọn Enable.\nSau khi chọn Enable, một lời nhắc để xác định \u0026ldquo;Target bucket\u0026rdquo; sẽ xuất hiện. Nhấp vào Browse S3 và chọn tên bucket bắt đầu bằng guardduty-example-log. Nhấp vào Choose path.\nCuối cùng, nhấp Save changes. Bạn đã bật ghi log truy cập máy chủ!\nĐể khôi phục bucket về trạng thái riêng tư, nhấp vào tab Permissions, và nhấp vào nút Edit dưới Block public access (bucket setting).\nChọn Block all public access, nhấp vào Save changes, và nhập \u0026ldquo;confirm\u0026rdquo; vào hộp thoại xuất hiện. Nhấp vào Confirm. TBucket đã trở lại trạng thái riêng tư! Một tùy chọn khác để khách hàng bảo vệ chống lại việc vô tình tiết lộ bucket là thêm chính sách điều khiển dịch vụ (service control policies - SCP). AMột SCP định nghĩa một giới hạn, hoặc đặt ra các giới hạn, về các hành động mà quản trị viên tài khoản có thể ủy quyền cho các user và IAM role trong tài khoản.\nVô hiệu hóa các khóa truy cập đã được xác định trong sự cố Trong khi đội bảo mật đang phân tích hoạt động trước đây của người dùng này để hiểu rõ hơn về phạm vi của vấn đề, bạn cần phải vô hiệu hóa khóa truy cập liên quan đến người dùng để ngăn chặn các hành động không được ủy quyền hoặc không mong muốn khác.\nĐiều hướng đến bảng điều khiển AWS IAM.\nNhấp vào Users trong thanh điều hướng bên trái.\nChọn GD-Workshop-Compromised2-Simulated user.\nNhấp vào tab Security Credentials.\nCuộn xuống Access keys, nhấp vào dropdown Actions, và chọn Deactivate. Trong cửa sổ xác nhận bật lên, nhấp vào Deactivate. Nếu bạn gặp lỗi khi làm cho khóa không hoạt động, bạn có thể xóa khóa truy cập.\nTự động hóa việc khắc phục Trong bước 7, bạn đã khắc phục thủ công một phần vấn đề bằng cách bật lại tính năng ghi log truy cập máy chủ S3. Bạn cũng có tùy chọn thực hiện điều này bằng cách tự động hóa. Một cách tiếp cận là sử dụng AWS Config Managed Rules. AWS Config cung cấp các rule được quản lý bởi AWS, là những rule được định sẵn và có thể tùy chỉnh mà AWS Config sử dụng để đánh giá liệu các tài nguyên AWS của bạn có tuân thủ các phương pháp tốt nhất hay không. Bạn có thể tùy chỉnh hành vi của một rule được quản lý để phù hợp với nhu cầu của bạn. AWS Config cho phép bạn khắc phục các tài nguyên không tuân thủ được đánh giá bởi AWS Config Rules. Trong trường hợp này, bạn có thể sử dụng rule được quản lý \u0026ldquo;s3-bucket-logging-enabled\u0026rdquo; và cấu hình rule để tự động bật ghi log cho các S3 buckets của bạn.\n"
},
{
	"uri": "//localhost:1313/vi/2-introduction-to-threat-detection-and-response-services/2.3-amazon-inspector/",
	"title": "Amazon Inspector",
	"tags": [],
	"description": "",
	"content": "Nội dung Inspector - Tổng quan Inspector - Bảng điều khiển Inspector - Các phát hiện Inspector - Tìm kiếm cơ sở dữ liệu lỗ hổng bảo mật Inspector - Ẩn các phát hiện Inspector - Chi phí "
},
{
	"uri": "//localhost:1313/vi/2-introduction-to-threat-detection-and-response-services/2.4-amazon-detective/2.4.3-detective-search/",
	"title": "Detective - Tìm kiếm",
	"tags": [],
	"description": "",
	"content": "Detective - Tìm kiếm Mở trang Search trong Detective. https://us-east-1.console.aws.amazon.com/detective/home?region=us-east-1#search\nVí dụ, thử tìm kiếm role mà bạn đang sử dụng. Đối với Select type, chọn AWS Role. Sau đó nhập \u0026ldquo;WSParticipantRole\u0026rdquo; và chọn Search. Chọn Principal ID để xem cách WSParticipantRole đã được sử dụng. Hãy dành thời gian để xem lại các hình ảnh và tab trên trang này. Chú ý thời gian phạm vi ở góc trên bên phải. Điều này có giống như những gì bạn đã làm cho đến nay trong hội thảo không? Nó nên như vậy!\n"
},
{
	"uri": "//localhost:1313/vi/2-introduction-to-threat-detection-and-response-services/2.2-amazon-guardduty/2.2.3-guardduty-protection-plans/",
	"title": "GuardDuty - Kế hoạch bảo vệ",
	"tags": [],
	"description": "",
	"content": "Điều kiện tiên quyết Đảm bảo rằng EC2 instance có SSM Management Role. Để biết cách thêm instance profile vào EC2 instance, vui lòng tham khảo thêm tại https://docs.aws.amazon.com/systems-manager/latest/userguide/setup-instance-permissions.html#attach-instance-profile.\nS3 Protection trong Amazon GuardDuty Truy cập trang S3 Protection dưới phần Protection plans trong bảng điều khiển GuardDuty.\nĐảm bảo rằng S3 Protection đã được bật. EKS Protection trong Amazon GuardDuty Truy cập trang EKS Protection dưới phần Protection plans trong bảng điều khiển GuardDuty.\nĐảm bảo rằng EKS Audit Log Monitoring đã được bật. Lưu ý: Trải nghiệm trên bảng điều khiển cho GuardDuty EKS Runtime Monitoring hiện được quản lý như một phần của tính năng Runtime Monitoring mới. Runtime Monitoring trong Amazon GuardDuty Truy cập trang Runtime Monitoring dưới phần Protection plans trong bảng điều khiển GuardDuty. Đảm bảo rằng Runtime Monitoring đã được bật cùng với cấu hình Automated agent configuration cho từng Amazon EKS, AWS Fargate (chỉ ECS), và Amazon EC2. Trong trang Runtime Monitoring, chuyển sang tab Runtime coverage. \u0026ldquo;Coverage statistics\u0026rdquo; là gì? Mặc dù không nằm trong phạm vi của workshop này, tìm hiểu thêm về cách thiết lập Runtime Monitoring tại https://docs.aws.amazon.com/guardduty/latest/ug/runtime-monitoring.html . Lưu ý: Nếu Coverage status của EC2 Instance là unhealthy và trạng thái Issue là \u0026ldquo;No Agent Reporting\u0026rdquo; hoặc liên quan đến SSM có thể là do không thể cài đặt SSM agent trong EC2 instance. Bạn có thể làm rõ bằng cách kiểm tra /var/log/amzn-guardduty-agent trong instance (AL2, AL2023). Đọc thêm tại https://docs.aws.amazon.com/guardduty/latest/ug/gdu-assess-coverage-ec2.html#ec2-runtime-monitoring-coverage-issues-troubleshoot\nMalware Protection cho EC2 trong Amazon GuardDuty Truy cập trang Malware Protection dưới mục Protection plans trong bảng điều khiển GuardDuty. GuardDuty tự động khởi động quét malware sau khi phát hiện một phát hiện chỉ ra malware trong một EC2 instance hoặc một khối lượng công việc container. Đảm bảo rằng GuardDuty-initiated malware scan đã được bật. Dưới đây là một số EC2 malware scans Nếu bạn theo dõi scan qua Scan ID Tệp EICAR-Test là một tệp để kiểm tra xem chức năng phát hiện mối đe dọa có hoạt động hay không. Nó không phải là virus thực sự.\nCuộn xuống và bật Retain scanned snapshots when malware is detected on.\nRDS Protection trong Amazon GuardDuty Truy cập trang RDS Protection dưới mục Protection plans trong bảng điều khiển GuardDuty. Đảm bảo rằng RDS Login Activity Monitoring đã được bật. Lambda Protection trong Amazon GuardDuty Truy cập trang Lambda Protection dưới mục Protection plans trong bảng điều khiển GuardDuty. 14. Đảm bảo rằng Lambda Network Activity Monitoring đã được bật.\n"
},
{
	"uri": "//localhost:1313/vi/2-introduction-to-threat-detection-and-response-services/2.3-amazon-inspector/2.3.3-inspector-findings/",
	"title": "Inspector  - Phát hiện bảo mật",
	"tags": [],
	"description": "",
	"content": "Lọc các phát hiện bảo mật Điều hướng đến Findings: All Findings (https://us-east-1.console.aws.amazon.com/inspector/v2/home?region=us-east-1#/findings/all ).\nChọn ô nhập ở đầu trang được gắn nhãn Filter criteria với nội dung \u0026ldquo;Add filter\u0026rdquo;. Bộ lọc phát hiện bảo mật cho phép bạn chỉ xem các phát hiện bảo mật khớp với tiêu chí bạn chỉ định. Các phát hiện bảo mật không khớp với tiêu chí bộ lọc sẽ bị loại. Hãy dành một chút thời gian để xem qua tất cả các tùy chọn lọc danh sách phát hiện bảo mật của bạn.\nBạn có thể tạo bộ lọc trên mỗi tab để tập trung vào các loại phát hiện bảo mật cụ thể. Thử lọc theo resource tag. Chọn trường Add filter. Chọn Resource tag. Lưu ý rằng các bộ lọc có phân biệt chữ hoa chữ thường. Nhập \u0026ldquo;Environment\u0026rdquo; cho Key. Nhập \u0026ldquo;Development\u0026rdquo; cho Value. Chọn Apply. Điều này sẽ hiển thị các phát hiện bảo mật cho các resources có tag được áp dụng. Bây giờ hãy xóa bộ lọc mà bạn vừa thêm bằng cách chọn Clear filters.\n"
},
{
	"uri": "//localhost:1313/vi/2-introduction-to-threat-detection-and-response-services/2.1-aws-security-hub/2.1.3-security-hub-findings/",
	"title": "Security Hub - Phát hiện bảo mật",
	"tags": [],
	"description": "",
	"content": "phát hiện bảo mật trong Security Hub Chọn Findings từ bảng điều hướng bên trái trong Security Hub. Bạn có thể sử dụng bộ lọc để thu hẹp danh sách các phát hiện bảo mật được hiển thị. Chọn Add filter.\nChọn Product name và sau đó nhập \u0026ldquo;GuardDuty\u0026rdquo; (chú ý viết hoa). Chọn Apply. Điều này sẽ hiển thị tất cả các phát hiện bảo mật mà Security Hub đã nhận được từ dịch vụ phát hiện bảo mật mối đe dọa, GuardDuty. Có nhiều phát hiện bảo mật của Security Hub được liệt kê ở đây. Hãy thử thêm bộ lọc để thu hẹp danh sách xuống chỉ còn các phát hiện bảo mật nghiêm trọng. Chọn Add filters một lần nữa.\nTừ danh sách thả xuống, chọn Severity label và nhập HIGH. Chú ý viết hoa. Chọn Apply. Kết quả: Chọn một trong các phát hiện bảo mật và chọn tiêu đề. Điều này sẽ mở bảng chi tiết phát hiện bảo mật. Mở rộng tất cả các phần và dành thời gian để xem thông tin ở đây. Bạn có thể thấy mô tả, liên kết đến hướng dẫn khắc phục, thông tin về tài nguyên và nhiều hơn nữa. Trong bảng chi tiết phát hiện bảo mật, chọn ID phát hiện bảo mật ở đầu bảng để hiển thị JSON đầy đủ của phát hiện bảo mật. JSON của phát hiện bảo mật có thể được tải xuống nếu cần thiết cho việc điều tra thêm. Đóng cửa sổ pop-up JSON bằng cách chọn X ở góc trên bên phải. Ở đầu chi tiết phát hiện bảo mật, mở tab History để xem danh sách theo trình tự thời gian của tất cả các thay đổi đã được thực hiện đối với phát hiện bảo mật. Độ minh bạch của lịch sử phát hiện bảo mật giúp bạn xác định các rủi ro bảo mật tiềm ẩn nhanh hơn và thực hiện các bước chủ động để giảm thiểu chúng. Đóng bảng chi tiết phát hiện bảo mật bằng cách chọn X ở góc trên bên phải, nhưng vẫn ở trang Findings.\nHãy cố gắng hiểu các tài nguyên trong môi trường của chúng ta đang tạo ra nhiều phát hiện bảo mật nhất. Loại bỏ tất cả các bộ lọc. Sau đó, thêm một bộ lọc mới, chọn Resource type và chọn not sau đó nhập AwsAccount. Chọn Apply. Thêm một bộ lọc khác. Chọn Record state, sau đó nhập ACTIVE. Chọn Apply. Chọn Add filters trong thanh tìm kiếm một lần nữa. Lần này, chọn Group by và chọn ResourceId. Chọn Apply. Danh sách này cho bạn thấy số lượng phát hiện bảo mật theo từng tài nguyên. Xem chi tiết bằng cách chọn Insight details: Xem các phát hiện bảo mật khác được lọc theo loại bên cung cấp TTPs/Discovery/Recon:IAMUser-MaliciousIPCallerCustom, được tạo ra bởi GuardDuty Chọn một phát hiện bảo mật để xem chi tiết hơn. Nó cho biết rằng một API ListBuckets đã được gọi bởi các tác nhân không được ủy quyền, được nhận diện từ IP trên danh sách mối đe dọa tùy chỉnh của bucket.\nXem thêm các phát hiện bảo mật được tạo ra bởi Inspector Những phát hiện bảo mật này được tạo ra khi Inspector phát hiện bảo mật các lỗ hổng bằng cách quét các EC2 instance .\n"
},
{
	"uri": "//localhost:1313/vi/4/4.3/",
	"title": "Sử dụng insights để ưu tiên và đo lường",
	"tags": [],
	"description": "",
	"content": "\rTình huống / Báo cáo vấn đề: Khi nhóm của bạn bật các dịch vụ bảo mật AWS khác nhau và tổng hợp mọi thứ vào Security Hub, ban lãnh đạo yêu cầu bạn rút ra insight từ tất cả dữ liệu đó. Cụ thể, bạn được yêu cầu khai thác insight về sự tuân thủ, cảnh báo ưu tiên cao nhất, và các tài nguyên tạo ra số lượng cảnh báo bảo mật cao nhất.\nMột insight trong AWS Security Hub là một tập hợp các phát hiện liên quan. Nó xác định một lĩnh vực bảo mật cần sự chú ý và can thiệp. Ví dụ, một insight có thể chỉ ra các EC2 instance đang bị phát hiện với các biện pháp bảo mật kém. Một insight tập hợp các phát hiện từ các nhà cung cấp phát hiện khác nhau.\nMỗi insight được định nghĩa bởi một câu lệnh nhóm và các bộ lọc tùy chọn. Câu lệnh nhóm chỉ định cách gom nhóm các phát hiện phù hợp, và xác định loại mục mà insight áp dụng. Ví dụ, nếu một insight được nhóm theo định danh tài nguyên, thì insight sẽ tạo ra danh sách các định danh tài nguyên. Các bộ lọc tùy chọn xác định các phát hiện phù hợp cho insight. Ví dụ, bạn có thể muốn chỉ xem các phát hiện từ các nhà cung cấp cụ thể hoặc các phát hiện liên quan đến các loại tài nguyên cụ thể.\nSecurity Hub cung cấp một số insight được quản lý sẵn. Bạn không thể sửa đổi hoặc xóa các insight được quản lý.\nMột insight chỉ trả về kết quả nếu bạn đã kích hoạt các tích hợp hoặc tiêu chuẩn tạo ra các phát hiện phù hợp. Ví dụ, insight được quản lý 29. Top resources by counts of failed CIS checks chỉ trả về kết quả nếu bạn kích hoạt tiêu chuẩn CIS AWS Foundations.\nXem các insight được quản lý sẵn Trong Security Hub, điều hướng đến trang Insights bằng cách sử dụng thanh điều hướng bên trái. Dành một vài phút để xem các insight được quản lý sẵn.\nTừ trang Insights, tìm insight có tên Insight: 23. Top products by counts of findings, và nhấp vào tiêu đề để mở. https://us-east-1.console.aws.amazon.com/securityhub/home?region=us-east-1#/insights/arn:aws:securityhub:::insight/securityhub/default/28\nInsight này làm nổi bật số lượng phát hiện hoạt động được tổng hợp từ mỗi sản phẩm mà bạn đã tích hợp. Hiểu biết về mục đích sử dụng của bạn cho mỗi sản phẩm tích hợp này là hữu ích để đo lường nỗ lực của tổ chức bạn nhằm giảm số lượng lỗ hổng, mối đe dọa và vi phạm tuân thủ tài nguyên. Từ trang Insights, tìm insight có tên Insight: 24. Severity by counts of findings, và nhấp vào tiêu đề để mở. https://us-east-1.console.aws.amazon.com/securityhub/home?region=us-east-1#/insights/arn:aws:securityhub:::insight/securityhub/default/29\nInsight này làm nổi bật số lượng phát hiện hoạt động trong môi trường của bạn theo nhãn mức độ nghiêm trọng. Những con số này hữu ích cho việc báo cáo sự cải thiện dần dần trong môi trường của bạn. Cố gắng giảm những con số này theo thời gian, bắt đầu từ số lượng phát hiện có nhãn mức độ nghiêm trọng CRITICAL hoặc HIGH. Tạo insight tùy chỉnh để theo dõi số lượng mối đe dọa hoạt động Để theo dõi các vấn đề bảo mật đặc biệt cho môi trường AWS của bạn và việc sử dụng, bạn có thể tạo các insight tùy chỉnh. Bạn sẽ tạo các insight tùy chỉnh để theo dõi các chỉ số chính của tổ chức bạn. Insight đầu tiên bạn tạo sẽ làm nổi bật số lượng mối đe dọa hoạt động trong môi trường của bạn được nhóm theo mục đích mối đe dọa, loại tài nguyên bị ảnh hưởng, hoạt động độc hại tổng thể, v.v. Trở lại trang Insights và nhấp vào Create insight.\nNhấp vào Add filter. Dưới Filters, chọn Product name, và sau đó nhập \u0026ldquo;GuardDuty\u0026rdquo; (lưu ý viết hoa). Chúng ta đang lọc các phát hiện từ GuardDuty vì đây là dịch vụ phát hiện mối đe dọa bạn đang sử dụng để liên tục theo dõi các tài khoản và khối lượng công việc AWS của bạn cho hoạt động độc hại.\nNhấp vào Add filter một lần nữa, nhưng lần này chọn Group dưới Grouping. Sau đó chọn Type. Một trong những thông tin hữu ích nhất được cung cấp cho các phát hiện của GuardDuty là loại phát hiện. Mục đích của loại phát hiện là cung cấp mô tả ngắn gọn nhưng dễ hiểu về vấn đề bảo mật tiềm ẩn. Bằng cách chọn \u0026ldquo;Group by Type\u0026rdquo;, insight của bạn sẽ cung cấp số lượng các phát hiện phù hợp với mỗi loại phát hiện.\nNhấp vào Create insight. Đối với tên insight, nhập \u0026ldquo;Security alerts by GuardDuty finding type\u0026rdquo;. 10. Bạn có thể nhấp vào Insight details để xem biểu đồ kết quả được trực quan hóa. Các insight cũng có thể được truy xuất qua API của Security Hub. Trở lại trang Insights liệt kê tất cả các insight của bạn.\nNhận thấy việc thiết lập này khá dễ dàng, bạn nên cân nhắc cách thực hiện tương tự trong mỗi tài khoản. Câu trả lời là sử dụng cơ sở hạ tầng dưới dạng code. Vì đó là cách bạn muốn thiết lập các insight dài hạn, hãy xóa insight tùy chỉnh mà bạn vừa tạo. Tìm kiếm danh sách insight cho \u0026ldquo;Security alerts by GuardDuty finding type\u0026rdquo;.\nKhi bạn tìm thấy nó, chọn biểu tượng ô nhỏ trên menu sau đó nhấp vào Delete.\nCloudFormation để triển khai các insight tùy chỉnh trong Security Hub Tình huống / Báo cáo vấn đề: Sau khi chứng minh rằng việc lấy insight từ Security Hub dễ dàng như thế nào, bạn đã được thách thức viết code cho cơ sở hạ tầng để triển khai các insight tùy chỉnh Security Hub cho tất cả các tài khoản của tổ chức bạn, để mỗi chủ tài khoản có thể thấy các insight giống nhau cho tài khoản cá nhân của họ mà nhóm bảo mật đang tổng hợp cho toàn bộ tổ chức.\nAWS CloudFormation cho phép bạn mô hình hóa, cấp phát, quản lý các tài nguyên AWS và bên thứ ba bằng cách coi cơ sở hạ tầng dưới dạng mã. Đối với mục đích của mô-đun này, bạn có thể sử dụng code CloudFormation sau để triển khai thêm một số insight tùy chỉnh. Bạn có thể sửa đổi nó và thử nghiệm. Template ví dụ này giả định rằng Security Hub đã được kích hoạt sẵn. Để làm cho mô-đun này dễ dàng hơn một chút, CloudFormation template đã được chuẩn bị sẵn trong một bucket S3 cho bạn.\nAWSTemplateFormatVersion: 2010-09-09\rDescription: Example template to create a Security Hub insights\rResources:\rSecurityHubInsightGDFindings:\rType: \u0026#39;AWS::SecurityHub::Insight\u0026#39;\rProperties:\rName: Security alerts by GuardDuty finding type\rFilters:\rProductName:\r- Value: GuardDuty\rComparison: EQUALS\rWorkflowStatus:\r- Value: NEW\rComparison: EQUALS\r- Value: NOTIFIED\rComparison: EQUALS\rRecordState:\r- Value: ACTIVE\rComparison: EQUALS\rGroupByAttribute: Type\rSecurityHubInsightSHControls:\rType: \u0026#39;AWS::SecurityHub::Insight\u0026#39;\rProperties:\rName: Most Failed Security Hub Controls\rFilters:\rProductName:\r- Value: Security Hub\rComparison: EQUALS\rWorkflowStatus:\r- Value: NEW\rComparison: EQUALS\r- Value: NOTIFIED\rComparison: EQUALS\rRecordState:\r- Value: ACTIVE\rComparison: EQUALS\rGroupByAttribute: GeneratorId\rSecurityHubInsightMostSev:\rType: \u0026#39;AWS::SecurityHub::Insight\u0026#39;\rProperties:\rName: Resources with the most security alerts Sev40+\rFilters:\rSeverityNormalized:\r- Gte: 40\rLte: 100\rResourceType:\r- Value: AwsAccount\rComparison: NOT_EQUALS\rWorkflowStatus:\r- Value: NEW\rComparison: EQUALS\r- Value: NOTIFIED\rComparison: EQUALS\rRecordState:\r- Value: ACTIVE\rComparison: EQUALS\rGroupByAttribute: ResourceId Template trên tạo ra 3 insight tùy chỉnh trong Security Hub:\nCảnh báo bảo mật theo loại phát hiện GuardDuty Các kiểm soát Security Hub thất bại nhiều nhất Tài nguyên có nhiều cảnh báo bảo mật nhất (mức độ nghiêm trọng medium-critical) Triển khai CloudFormation Template của bạn với các insight tùy chỉnh Vì CloudFormation trên đã được chuẩn bị sẵn trong S3, hãy mở trang Stacks trong bảng điều khiển CloudFormation.\nNhấp vào tên của stack, cfn.\nMở tab Outputs. Mở \u0026ldquo;InsightsCloudFormationLink\u0026rdquo; trong một tab mới để khởi chạy CloudFormation template đã cấu hình sẵn trong us-east-1 (N. Virginia). TĐiều này sẽ mở trang \u0026ldquo;Create stack\u0026rdquo; trong us-east-1 (N. Virginia) và điền liên kết đến CloudFormation template vào form. Đảm bảo rằng hiển thị \u0026ldquo;N. Virginia\u0026rdquo; ở góc trên bên phải của trang.\nNhấp vào Create stack ở cuối trang. Chờ đợi cho template hoàn tất triển khai.\nTrở lại Security Hub và mở trang Insights. Tìm và xem các insight bạn vừa tạo bằng cách chuyển menu thả xuống ở đầu trang sang Custom insights. Ví dụ:\n"
},
{
	"uri": "//localhost:1313/vi/3/3.3/",
	"title": "Tập hợp các phát hiện từ các giải pháp của đối tác AWS",
	"tags": [],
	"description": "",
	"content": "AWS Security Hub có thể tổng hợp dữ liệu phát hiện bảo mật từ nhiều dịch vụ AWS và từ các giải pháp bảo mật của AWS Partner Network (APN) được hỗ trợ. Việc tổng hợp này cung cấp cái nhìn tổng quát về bảo mật và tuân thủ trong toàn bộ môi trường AWS của bạn.\nBạn cũng có thể gửi các phát hiện được tạo ra từ các sản phẩm bảo mật tùy chỉnh của riêng bạn.\nTừ các tích hợp sản phẩm AWS và đối tác được hỗ trợ, Security Hub chỉ nhận và hợp nhất các phát hiện được tạo ra sau khi bạn bật Security Hub trong các tài khoản AWS của bạn. Dịch vụ này không nhận và hợp nhất các phát hiện bảo mật được tạo ra trước khi bạn bật Security Hub.\\\nMột trong các tích hợp đối tác có sẵn là Cloud Custodian. Cloud Custodian cho phép bạn quản lý các tài nguyên đám mây của mình bằng cách lọc, gán thẻ và sau đó thực hiện các hành động trên chúng. YAML DSL cho phép định nghĩa các quy tắc để có cơ sở hạ tầng đám mây được quản lý tốt, bảo mật và tối ưu hóa chi phí. Để biết thêm thông tin, hãy truy cập https://cloudcustodian.io/\nNhận các phát hiện từ Cloud Custodian Mở trang Integrations trong Security Hub và tìm kiếm Cloud Custodian. Chọn Accept Findings. Xem xét các quyền cần thiết cho tích hợp.\n3. Chọn Accept findings. Điều này sẽ thiết lập một chính sách dịch vụ cho phép giải pháp đối tác gửi thông tin phát hiện vào tài khoản này. Đối với mục đích của workshop này, một phiên bản Cloud Custodian đã được thiết lập để tự động gửi các phát hiện đến tích hợp bạn vừa bật. Để sử dụng các tích hợp đối tác khác trong tài khoản của bạn, bạn vẫn cần hoàn thành bước cấu hình trong giải pháp đối tác để các phát hiện được tạo ra bởi giải pháp đối tác được gửi đến Security Hub.\nBạn có thể chọn See findings để xem các phát hiện mới từ Cloud Custodian. Có thể mất 5-10 phút để chúng xuất hiện.\n"
},
{
	"uri": "//localhost:1313/vi/7/7.3/",
	"title": "Tích hợp Amazon Inspector vào quy trình CI/CD",
	"tags": [],
	"description": "",
	"content": "Trong mô-đun này, bạn sẽ học cách tích hợp quét container image của Amazon Inspector trực tiếp vào quy trình CI/CD của bạn để quét các lỗ hổng phần mềm và cung cấp báo cáo vào cuối quá trình xây dựng của bạn. Tính năng này cho phép khách hàng điều tra và khắc phục các rủi ro trước khi triển khai.\nTích hợp CI/CD của Amazon Inspector sử dụng kết hợp giữa Amazon Inspector SBOM Generator và Amazon Inspector Scan API để tạo ra các báo cáo lỗ hổng cho container image của bạn. Amazon Inspector SBOM Generator tạo một hóa đơn vật liệu phần mềm (software bill of materials - SBOM) từ container image được cung cấp, sau đó, Amazon Inspector Scan API quét SBOM đó và tạo ra một báo cáo chi tiết về bất kỳ lỗ hổng nào được phát hiện.\nBạn có thể thực hiện tích hợp CI/CD với Amazon Inspector thông qua các plugin Amazon Inspector được xây dựng đặc biệt cho các giải pháp CI/CD riêng lẻ và có sẵn trên marketplace của họ, hoặc bạn có thể tạo tích hợp quét tùy chỉnh của riêng mình.\nSử dụng plugin Jenkins để tích hợp Amazon Inspector vào quy trình CI/CD của bạn. Bạn sẽ sử dụng các image nằm trong Docker Hub.\nCài đặt Jenkins trên một EC2 instance Trong phần này, bạn sẽ cài đặt Jenkins và Trình tạo SBOM của Amazon Inspector trên phiên bản EC2. Jenkins là máy chủ tự động hóa nguồn mở tích hợp với một số Dịch vụ AWS, bao gồm: AWS CodeCommit, AWS CodeDeploy, Amazon EC2 Spot và Amazon EC2 Fleet. Trình tạo SBOM của Amazon Inspector (Sbomgen) là một công cụ nhị phân tạo ra hóa đơn vật liệu phần mềm (SBOM) cho một container image. SBOM là bản kiểm kê được thu thập của phần mềm được cài đặt trên hệ thống. Sbomgen hoạt động bằng cách quét các tệp được biết có chứa thông tin về các gói đã cài đặt. Nếu tìm thấy một trong những tệp này, công cụ sẽ trích xuất tên gói, phiên bản và siêu dữ liệu khác.\nĐiều hướng đến bảng điều khiển Amazon EC2 và mở trang Instances. https://us-east-1.console.aws.amazon.com/ec2/home?region=us-east-1#Instances:instanceState=running\nChọn Jenkins instance và nhấp vào nút Connect ở đầu trang.\nChuyển sang tab Session Manager trên trang Connect to instance.\nNhấp vào Connect. Thao tác này sẽ mở một phiên làm việc của Systems Manager.\nTải xuống kho lưu trữ Jenkins. sudo wget -O /etc/yum.repos.d/jenkins.repo https://pkg.jenkins.io/redhat-stable/jenkins.repo Nhập một tệp khóa từ Jenkins để cho phép cài đặt. sudo rpm --import https://pkg.jenkins.io/redhat-stable/jenkins.io-2023.key\nNâng cấp bất kỳ thành phần nào của Jenkins. sudo yum upgrade\nCài đặt Java. sudo yum install java-11-amazon-corretto -y\nCài đặt Jenkins. sudo yum install jenkins -y\nKích hoạt dịch vụ Jenkins để khởi động cùng hệ thống. sudo systemctl enable jenkins\nBắt đầu dịch vụ Jenkins. sudo systemctl start jenkins\nXác minh rằng dịch vụ Jenkins đang chạy. sudo systemctl status jenkins\n13. Nhấp vào Terminate.\nQuay lại trang Instances trong bảng điều khiển EC2.\nChọn Jenkins instance.\nĐi đến tab Security trong chi tiết instance.\nGhi chú lại IAM Role trong phần Security details. Bạn sẽ tra cứu ARN của Role này trong mô-đun sau.\nTrong Security groups, nhấp vào security group được gắn với instance. Nó sẽ có tên bắt đầu bằng \u0026ldquo;sg-\u0026rdquo;.\nBạn sẽ được chuyển đến cấu hình của security group. Nhấp vào nút Edit inbound rules.\nBạn sẽ cần kết nối với instance EC2 qua cổng 8080 để truy cập trang quản trị của Jenkins. Nhấp vào nút Add rule.\nĐối với rule mới, đặt Type thành Custom TCP. Đặt Port range thành \u0026ldquo;8080\u0026rdquo;. Đối với Source, chọn My IP.\nNhấp vào Save rules. Cấu hình IAM role cho tích hợp CI/CD của Jenkins Chúng ta cần tạo IAM role cho phép truy cập Amazon Scan API, để quét danh sách phần mềm, trong Jenkins. Mở bảng điều khiển IAM https://us-east-1.console.aws.amazon.com/iam/home?region=us-east-1#/home\nTừ thanh điều hướng của bảng điều khiển IAM, mở Policies.\nNhấp vào Create Policy.\nTrong Policy Editor nhấp vào nút JSON, và thay thế policy bằng đoạn mã sau:\n{\r\u0026#34;Version\u0026#34;: \u0026#34;2012-10-17\u0026#34;,\r\u0026#34;Statement\u0026#34;: [\r{\r\u0026#34;Effect\u0026#34;: \u0026#34;Allow\u0026#34;,\r\u0026#34;Action\u0026#34;: \u0026#34;inspector-scan:ScanSbom\u0026#34;,\r\u0026#34;Resource\u0026#34;: \u0026#34;*\u0026#34;\r}\r]\r} Nhấp vào Next.\nTrên trang Review and create, nhập \u0026ldquo;InspectorCICDscan-policy\u0026rdquo; cho Policy name. Policy này sẽ được gán cho role mà bạn sẽ tạo trong vài bước nữa. Nhấp vào Create policy.\nTừ ngăn điều hướng của bảng điều khiển IAM, mở Roles và tìm kiếm role mà bạn đã ghi chú trước đó (gắn với instance EC2, Jenkins). Role này sẽ bắt đầu bằng \u0026ldquo;cfn-InspectorLabsInfrastructure\u0026rdquo; và bao gồm term \u0026ldquo;SSMInstanceRole\u0026rdquo;. Nhấp vào tên role để mở chi tiết.\nSao chép ARN của role. Bạn sẽ cần thông tin này trong vài bước nữa.\nTừ thanh điều hướng của bảng điều khiển IAM, mở Roles và sau đó nhấp vào Create Role.\nĐối với Trusted entity type, chọn Custom trust policy.\nThay thế Custom trust policy bằng đoạn mã sau. Thay thế \u0026ldquo;ARN\u0026rdquo; bằng ARN của IAM role bạn đã sao chép trước đó (có chứa cụm \u0026ldquo;SSMInstanceRole\u0026rdquo;).\n{\r\u0026#34;Version\u0026#34;: \u0026#34;2012-10-17\u0026#34;,\r\u0026#34;Statement\u0026#34;: [\r{\r\u0026#34;Effect\u0026#34;: \u0026#34;Allow\u0026#34;,\r\u0026#34;Principal\u0026#34;: {\r\u0026#34;AWS\u0026#34;: \u0026#34;ARN\u0026#34;\r},\r\u0026#34;Action\u0026#34;: \u0026#34;sts:AssumeRole\u0026#34;\r}\r]\r} 35. Nhấp vào Next.\nTrong Add permissions tìm kiếm và chọn policy mà bạn đã tạo trước đó, \u0026ldquo;InspectorCICDscan-policy\u0026rdquo;. Sau đó nhấp vào Next.\nĐặt tên cho role là \u0026ldquo;InspectorCICDscan-role\u0026rdquo;. Sau đó nhấp vào Create Role.\nCấu hình IAM permission này được sử dụng cho workshop, nhưng có thể không áp dụng cho môi trường của bạn. Trong workshop, role được gán cho EC2 instance lưu trữ Jenkins, được ủy quyền cho role InspectorCICDscan-role mới được tạo. InspectorCICDscan-role sẽ được Jenkins sử dụng. Do đó, khi Jenkins sử dụng InspectorCICDscan-role, nó sẽ đảm nhận IAM role được gán cho EC2 instance, role có quyền truy cập vào dịch vụ Inspector Scan.\nCấu hình Jenkins Bây giờ instance đã có security group và AWS permission chính xác, bạn có thể cấu hình Jenkins để sử dụng Inspector để quét lỗ hổng. Quay lại bảng điều khiển EC2 và mở trang Instances.\nChọn Jenkins instance.\nNhấp vào nút Connect ở đầu trang.\nDưới tab Session Manager, chọn Connect.\nChúng ta sẽ cần lấy mật khẩu quản trị viên ban đầu để đăng nhập vào Jenkins. sudo cat /var/lib/jenkins/secrets/initialAdminPassword\n43. Sao chép kết quả. Đây là mật khẩu quản trị viên ban đầu của Jenkins. Bạn sẽ cần thông tin này ở bước sau.\nNhấp vào Terminate.\nQuay lại bảng điều khiển EC2 và chọn Jenkins instance.\nTrong tab Details, sao chép địa chỉ public IP dưới Public IPv4 address.\nTrong một tab trình duyệt mới, dán địa chỉ IP và thêm \u0026ldquo;:8080\u0026rdquo; vào. Nó sẽ trông tương tự như \u0026ldquo;xx.xx.xx.xx:8080\u0026rdquo;. Nhập mật khẩu quản trị viên ban đầu từ trước đó, sau đó nhấp vào Continue. Từ trang Customize Jenkins, nhấp vào Install suggested plugins.\nSau khi cài đặt hoàn tất, trang Create First Admin User sẽ mở ra. Nhập thông tin của bạn, sau đó chọn Save and Continue. Trên trang Instance Configuration, nhấp vào Save and Finish.\nTrên trang hiển thị Jenkins đã sẵn sàng, nhấp vào Start using Jenkins.\nTừ thanh điều hướng, mở Manage Jenkins. Trong System Configuration, mở Plugins.\nChọn Available plugins từ menu.\nTìm kiếm các plugin có sẵn cho Amazon Inspector Scanner.\nChọn ô bên cạnh Amazon Inspector Scanner, sau đó nhấp vào Install.\nChờ cho quá trình cài đặt hoàn tất. Ở cuối trang, nhấp vào Go back to the top page.\nTừ thanh điều hướng, nhấp vào Manage Jenkins.\nTrong System Configuration, nhấp vào Nodes.\nNhấp vào Built-In Node. Mở Script Console từ thanh điều hướng.\nTrong hộp văn bản, thêm dòng sau: System.setProperty(\u0026quot;hudson.model.DirectoryBrowserSupport.CSP\u0026quot;, \u0026quot;\u0026quot;)\nNhấp vào Run. Build một Jenkins job Đi đến bảng điều khiển Jenkins bằng cách sử dụng liên kết ở góc trên bên trái, và chọn Create a job. Trong mục Enter an item name, nhập \u0026ldquo;InspectorScan\u0026rdquo;.\nChọn Freestyle project, sau đó nhấp vào OK. Cuộn xuống phần Build Steps, nhấp vào dropdown Add build step, và chọn Amazon Inspector Scan.\nChọn Automatic cho phương pháp cài đặt Inspector-sbomgen, sau đó chọn Linux, AMD64.\nĐối với Image Id, nhập \u0026ldquo;centos:latest\u0026rdquo;.\nĐối với AWS Region, chọn us-east-1.\nTrong một tab mới, mở IAM console và tìm kiếm role bạn đã tạo trước đó có tên là InspectorCICDscan-role. Sao chép ARN. https://us-east-1.console.aws.amazon.com/iam/home?region=us-east-1#/roles/details/InspectorCICDscan-role\nDán ARN của IAM role vào trang cấu hình build của Jenkins. Nhấp vào Save.\nThao tác này sẽ đưa bạn đến một bảng điều khiển cho Jenkins build job của bạn. Từ thanh điều hướng, nhấp vào Build Now để tạo build đầu tiên của bạn. Nếu bạn gặp vấn đề với build, hãy thử nhấp vào Build Now một lần nữa hoặc hỏi người hỗ trợ của bạn để được giúp đỡ. Xem xét build để tìm các lỗ hổng bảo mật Trong Build History, tìm kiếm dấu màu xanh lá cây để chỉ ra một build thành công. Nhấp vào dấu màu xanh lá cây. Điều này sẽ đưa bạn đến phần đầu ra của Jenkins job. Bạn có thể thấy rằng Inspector đã quét image và cung cấp các liên kết đến các báo cáo. Nhấp vào liên kết bên cạnh Build Artifacts. Nhấp vào index.html. Nếu có bất kỳ lỗ hổng nào, chúng sẽ hiển thị trong báo cáo.\n"
},
{
	"uri": "//localhost:1313/vi/3/",
	"title": "Tích hợp Dịch vụ AWS và Giải pháp Đối tác",
	"tags": [],
	"description": "",
	"content": "Trong bước này, chúng ta sẽ kết nối tới các máy chủ EC2 của mình, nằm trong cả public và private subnets.\nContent 3.1. Centralizing findings from AWS security services 3.2. Aggregating findings from multiple AWS accounts 3.3 Centralizing findings from AWS partner solutions 3.4 Cross-region finding aggregation 3.5 Building your own Security Hub integration\n"
},
{
	"uri": "//localhost:1313/vi/5/5.3/",
	"title": "Tự động ứng phó bảo mật trên AWS",
	"tags": [],
	"description": "",
	"content": "\rScenario / Problem Statement: Ở quy mô của công ty bạn, bạn nhận ra rằng có hàng ngàn tài nguyên bị cấu hình sai. Bạn cần tìm giải pháp để khắc phục các cấu hình sai một cách tự động, tập trung và ở quy mô lớn.\nTrong workshop này, chỉ sử dụng một tài khoản nên giải pháp này không hiển thị tất cả các tính năng của nó. Để xem toàn bộ kịch bản của giải pháp này, vui lòng xem triển khai của tôi tại GitHub repo này.\nDeploy Automated Security Response on AWS via CloudFormation Giải pháp ASR yêu cầu triển khai 3 CloudFormation templates. Bạn có thể xem các template tại đây. Bạn có thể khởi chạy tất cả các stack cùng một lúc. Bạn không cần phải chờ một stack hoàn thành trước khi bắt đầu stack tiếp theo. Ba stack này sẽ mất 10 phút để hoàn thành. Các stack cũng sẽ khởi chạy nhiều nested stacks để tạo tất cả các tài nguyên cần thiết.\nTriển khai admin stack bằng cách nhấp vào nút Deploy Automated Security Response admin stack bên dưới. Đảm bảo rằng bạn đang khởi chạy template trong vùng mà bạn đã làm việc. Để khởi chạy giải pháp này trong một AWS Region khác, sử dụng Region selector trong thanh điều hướng của AWS Management Console. Deploy Automated Security Response admin stack admin stack\nXem lại tên stack và các tham số cho template. Các tham số đã được điền sẵn, nhưng hãy xác nhận rằng các tham số được chọn khớp với ảnh chụp màn hình dưới đây. Cuộn xuống cuối màn hình Quick create stack và đánh dấu vào ô I acknowledge that AWS CloudFormation might create IAM resources và ô I acknowledge that AWS CloudFormation might require the following capability: CAPABILITY_AUTO_EXPAND.\nNhấp vào Create stack. Bạn có thể tiếp tục mà không cần đợi stack hoàn thành.\nTriển khai member roles stack bằng cách nhấp vào nút Deploy ASR member roles stack bên dưới. Đảm bảo rằng bạn đang khởi chạy template trong vùng mà bạn đã làm việc. Để khởi chạy giải pháp này trong một AWS Region khác, sử dụng Region selector trong thanh điều hướng của AWS Management Console. Deploy ASR member roles stack\nXem lại tên stack và các tham số cho template. Đối với tham số SecHubAdminAccount, nhập account ID mà bạn thấy ở góc trên bên phải của AWS Console.\nCuộn xuống cuối màn hình Quick create stack và đánh dấu vào ô I acknowledge that AWS CloudFormation might create IAM resources.\nNhấp vào Create stack.\nTriển khai member runbooks stack bằng cách nhấp vào nút Deploy ASR member runbooks stack bên dưới. Đảm bảo rằng bạn đang khởi chạy template trong vùng mà bạn đã làm việc. Để khởi chạy giải pháp này trong một AWS Region khác, sử dụng Region selector trong thanh điều hướng của AWS Management Console.\nDeploy ASR member runbooks stack: Deploy ASR member runbooks stack.\nXem lại tên stack và các tham số cho template. Các tham số đã được điền sẵn, nhưng hãy xác nhận rằng các tham số được chọn khớp với ảnh chụp màn hình dưới đây. Đối với tham số SecHubAdminAccount, nhập lại account ID mà bạn thấy ở góc trên bên phải của AWS Console. Cuộn xuống cuối màn hình Quick create stack và đánh dấu vào ô I acknowledge that AWS CloudFormation might create IAM resources và ô I acknowledge that AWS CloudFormation might require the following capability: CAPABILITY_AUTO_EXPAND.\nNhấp vào Create stack.\nTại thời điểm này, bạn phải đợi tất cả các CloudFormation stacks hoàn thành triển khai. Bạn có thể kiểm tra tiến độ tại đây: https://console.aws.amazon.com/cloudformation/home?#/stacks Leverage Automated Security Response on AWS for remediation Giải pháp này bao gồm các playbook remediations cho các tiêu chuẩn bảo mật được định nghĩa trong Center for Internet Security (CIS) AWS Foundations Benchmark v1.2.0, Center for Internet Security (CIS) AWS Foundations Benchmark v1.4.0, AWS Foundation Security Best Practices (AFSBP) v.1.0.0, Payment Card Industry Data Security Standard (PCI-DSS) v3.2.1, và Security Control (SC) v2.0.0. Bạn có thể tìm hiểu thêm tại đây: https://docs.aws.amazon.com/solutions/latest/automated-security-response-on-aws/playbooks-1.html 13. Hãy thử giải pháp này. Quay lại Security Hub.\nMở trang Controls.\nLọc theo control EC2.2. Nhấp vào tên The VPC default security group should not allow inbound and outbound traffic. Chọn hộp kiểm để chọn tất cả các kiểm tra thất bại.\nNhấp vào menu thả xuống Actions và chọn Remediate with ASR. Việc chọn hành động này sẽ gửi một bản sao của phát hiện(s) đến EventBridge, khởi động tự động hóa để thay đổi cài đặt quy tắc security group mặc định để hạn chế lưu lượng inbound và outbound.\nSau vài phút, các kiểm tra sẽ có trạng thái là RESOLVED.\nCó thể mất khoảng 3 đến 5 phút để chạy và cập nhật. Sau đó, đợi và làm mới trang lại.\nDeep dive to the solution Terminology AWS Config rule: một cấu hình lý tưởng Security control: đại diện của một rule -\u0026gt; trong một hoặc nhiều tiêu chuẩn bảo mật Finding: một vấn đề bảo mật tiềm ẩn được tạo ra sau khi kiểm tra bảo mật Playbook: một tập hợp các biện pháp khắc phục. Remediation runbook: một triển khai của một tập hợp các bước để giải quyết một finding. Control runbook: các tài liệu SSM automation mà Orchestrator sử dụng để định tuyến một biện pháp khắc phục đã được kích hoạt cho một control cụ thể đến remediation runbook phù hợp. Workflow of the architecture Với AWS Config rules cho các tiêu chuẩn tuân thủ được hỗ trợ, AWS Config thực thi kiểm tra security controls và tạo findings nếu có các cấu hình không tuân thủ, bao gồm trong tài khoản quản trị và thành viên (trong AWS Organization). Các findings được tổng hợp bởi AWS Security Hub. Quản trị viên có thể kích hoạt Custom Action để khắc phục các findings tương ứng tự động hoặc thủ công. Các sự kiện này được kích hoạt trong các EventBridge rules tương ứng đến Step Function Orchestrator, điều hướng đến playbooks remediation tương ứng (ví dụ: findings cho EC2.13 dẫn đến EC2.13 playbook). Dịch vụ Amazon SQS được sử dụng để thực thi nhiều biện pháp khắc phục song song. Orchestrator sẽ thông báo cho người dùng đã đăng ký về quy trình và kết quả khắc phục. Nó sẽ gọi control runbook tương ứng, cuối cùng sẽ gọi remediation runbook thích hợp cho các findings.\nAn example of security control Trong phần dive-deep này, tôi sử dụng security control EC2.13 để kiểm tra cấu hình tài nguyên và khắc phục nếu không tuân thủ. Có các ví dụ khắc phục khác bên dưới, nhưng luồng khắc phục tương tự như EC2.13. Control Runbook EC2.13 First step Bước đầu tiên của Control Runbook là phân tích các đầu vào nhận được từ finding: Phiên bản yaml của runbook:\nexpected_control_id:\r- EC2.13\r- EC2.14\rparse_id_pattern: ^arn:(?:aws|aws-cn|aws-us-gov):ec2:(?:[a-z]{2}(?:-gov)?-[a-z]+-\\d):\\d{12}:security-group\\/(sg-[a-f\\d]{8,17})$\rFinding: \u0026#39;{{ Finding }}\u0026#39; And the expected output of this first step is: Second step Trong bước 2, control runbook gọi remediation runbook (SSM automation document) có tên là AWS-DisablePublicAccessForSecurityGroup. Bạn có thể tham khảo thêm tại AWS Systems Manager Automation runbook reference, và kiểm tra luồng logic tại System Manager page - Document section.\nPhiên bản yaml của bước này: Remediation runbook sẽ kích hoạt Amazon EC2 API để loại bỏ các inbound rules đáp ứng tham số của bạn trong cuộc gọi API. Trong tài liệu tự động này, nó thu hồi bất kỳ inbound rules nào với giao thức TCP port 22 (SSH) và phạm vi IP là 0.0.0.0/0: Demo Prerequisite Behind the scene: Orchestrator Scenarios Link demo: https://www.youtube.com/playlist?list=PL7IdJecfX87jHfO43NYd6MXL8mBYWBAIf 1.1. Các Security groups không nên cho phép ingress từ 0.0.0.0/0 đến port 22 - trong member 1.2. Các Security groups không nên cho phép ingress từ 0.0.0.0/0 đến port 22 - trong admin 2. Đảm bảo chính sách mật khẩu IAM yêu cầu ít nhất một chữ số 3. RDS DB clusters nên được cấu hình cho nhiều AZs 4. Mã hóa mặc định của EBS nên được kích hoạt 5. Các S3 general purpose buckets nên bật cài đặt chặn truy cập công khai\n"
},
{
	"uri": "//localhost:1313/vi/6/6.3/",
	"title": "Ứng phó khi thông tin xác thực IAM bị xâm phạm",
	"tags": [],
	"description": "",
	"content": "\rTình huống / Báo cáo vấn đề Bạn được giao nhiệm vụ điều tra và khắc phục một phát hiện từ GuardDuty. Loại phát hiện của GuardDuty là \u0026ldquo;UnauthorizedAccess:IAMUser/MaliciousIPCaller.Custom\u0026rdquo;.\nĐiều hướng đến bảng điều khiển GuardDuty và mở trang Findings. Bạn sẽ thấy một phát hiện bắt đầu với \u0026ldquo;UnauthorizedAccess:IAMUser/MaliciousIPCaller.Custom\u0026rdquo;. Nếu bạn không thấy, hãy thử làm mới trang. Chọn một phát hiện loại \u0026ldquo;UnauthorizedAccess:IAMUser/MaliciousIPCaller.Custom\u0026rdquo; bằng cách nhấp vào hàng của phát hiện đó. Phát hiện này thông báo rằng một API operation (ví dụ: khởi chạy một EC2 instance, tạo một IAM user mới, sửa đổi quyền hạn AWS) đã được thực hiện từ một địa chỉ IP nằm trong danh sách đe dọa mà bạn đã tải lên. Danh sách đe dọa bao gồm các địa chỉ IP độc hại đã biết. Điều này có thể chỉ ra truy cập trái phép vào tài nguyên AWS trong môi trường của bạn. Là một phần của chiến lược phát hiện dựa trên rủi ro, tổ chức của bạn ưu tiên các cảnh báo bảo mật liên quan đến IAM của AWS. Bạn có thể thấy rằng Access Key được tham chiếu trong phát hiện này là từ một IAM assumed role, điều này có nghĩa là thông tin xác thực Access Key được sử dụng để thực hiện các lệnh gọi API thuộc về một IAM Role được giả định bởi một instance EC2. Trong phần Instance details trong chi tiết phát hiện, bạn sẽ có thể xác định ID instance của EC2 instance liên quan, cũng như IAM role (\u0026ldquo;User name\u0026rdquo;) và Access Key được sử dụng. Ghi lại ID instance. ID instance bắt đầu bằng ‘i’ (such as i-08faaaafb15777f5a). Chúng ta sẽ cần điều này sau để xác định cách thức thông tin xác thực bị xâm phạm. Vẫn trong phần Resources affected trong chi tiết phát hiện, ghi lại tên User name được gán cho instance. Đây là IAM Role mà Access Key thuộc về.\nCuối cùng, vẫn trong phần Resources affected trong chi tiết phát hiện, ghi lại Access Key ID.\nỞ đầu trang Findings, nhấp vào thanh Add filter để thêm tiêu chí lọc. Chọn Access Key ID, dán Access Key của bạn vào ô.\nNhấp vào Apply. Điều này sẽ hiển thị tất cả các phát hiện của GuardDuty liên quan đến Access Key đó. Nếu có các phát hiện khác, hãy dành chút thời gian để điều tra chúng.\nTrước khi tiếp tục, hãy đảm bảo bạn đã ghi lại ID instance, IAM role (\u0026ldquo;User name\u0026rdquo;) và Access Key ID. Bạn sẽ cần những giá trị này sau trong module này.\nPhản hồi khi thông tin xác thực IAM của AWS bị xâm phạm Bây giờ bạn đã xác định được rằng kẻ tấn công đang sử dụng thông tin xác thực bảo mật tạm thời từ IAM role cho EC2, quyết định đã được đưa ra là luân phiên thông tin xác thực đó ngay lập tức nhằm ngăn chặn mọi hành vi sử dụng sai mục đích hoặc leo thang đặc quyền tiềm ẩn (potential privilege escalation). Để thu hồi các phiên IAM role, chúng ta cần truy cập bảng điều khiển AWS Identity and Access Management (IAM). https://console.aws.amazon.com/iamv2/home\nNhấp vào Roles bên trái và tìm tên role mà bạn đã xác định trong phần trước bằng cách sử dụng tên User name mà bạn đã ghi lại trước đó (đây là IAM Role gắn với instance bị xâm phạm). Nếu bạn không thấy nó, bạn có thể sử dụng trường tìm kiếm dưới Roles. Nhấp vào tên Role đó.\nNhấp vào tab Revoke sessions. Sau đó, không thể truy cập vào instance. Nhấp vào Revoke active sessions. Chọn ô xác nhận và sau đó nhấp vào Revoke active sessions. Bạn sẽ thấy một thông báo xuất hiện ở đầu trang \u0026ldquo;Active sessions have been successfully revoked\u0026rdquo;. Khởi động lại EC2 instance để luân phiên access key Tất cả thông tin xác thực đang hoạt động cho IAM role bị xâm phạm đã bị vô hiệu hóa. Điều này có nghĩa là kẻ tấn công không còn có thể sử dụng các Access Key đó, nhưng cũng có nghĩa là bất kỳ ứng dụng nào sử dụng role này cũng không thể. Bạn đã biết điều này trước khi tiếp tục nhưng đã quyết định rằng nó là cần thiết do rủi ro cao của một Access Key cập IAM bị xâm phạm. Để đảm bảo tính khả dụng của ứng dụng của bạn, bạn cần làm mới các Access Key trên instance bằng cách dừng và khởi động lại instance. Khởi động lại đơn giản sẽ không thay đổi các key. Nếu bạn chờ, thông tin xác thực bảo mật tạm thời trên instance sẽ được làm mới nhưng quy trình này sẽ đẩy nhanh việc thay đổi key. Vì bạn đang sử dụng AWS Systems Manager để quản lý các instance EC2 của mình, bạn có thể sử dụng nó để truy vấn metadata để xác thực rằng các Access Key đã được luân phiên sau khi khởi động lại instance.\nMở bảng điều khiển Elastic Cloud Compute (EC2) console và điều hướng đến trang Instances. https://us-east-1.console.aws.amazon.com/ec2/home?region=us-east-1#Instances:instanceState=running\nTìm ID instance mà bạn đã ghi lại trước đó trong bước 3. Chọn ô bên cạnh instance đó.\nSau đó nhấp vào menu thả xuống Instance state, và chọn Stop instance.\nMột hộp thoại xác nhận sẽ xuất hiện. Nhấp vào Stop một lần nữa.\nChờ Instance State chuyển sang trạng thái stopped dưới Instance State (bạn có thể cần làm mới bảng điều khiển EC2). Bạn có thể cần loại bỏ bộ lọc \u0026ldquo;running\u0026rdquo; trong danh sách các instance của mình để thấy instance được liệt kê khi nó đã dừng lại.\nChọn ô bên cạnh instance và làm theo các bước tương tự để khởi động lại instance.\nXác minh Access Key đã được luân phiên Truy cập AWS Systems Manager và mở trang Session Manager. https://us-east-1.console.aws.amazon.com/systems-manager/session-manager?region=us-east-1#\nNhấp vào Start Session bên phải.\nChọn ID instance từ phần trước (mà bạn đã dừng và khởi động lại) bằng cách nhấp vào radio button bên cạnh nó. Sau đó nhấp vào Start session. Điều này sẽ mở một shell (một phiên với instance đó).\nChạy hai lệnh sau và so sánh Access Key ID với key mà bạn đã ghi lại trước đó để đảm bảo nó đã thay đổi. Hãy chắc chắn rằng bạn thay thế từ \u0026ldquo;ROLE\u0026rdquo; ở cuối lệnh thứ hai bằng \u0026ldquo;User name\u0026rdquo; hoặc IAM role mà bạn đã ghi lại trong bước 4.\nTOKEN=`curl -X PUT \u0026#34;http://169.254.169.254/latest/api/token\u0026#34; -H \u0026#34;X-aws-ec2-metadata-token-ttl-seconds: 21600\u0026#34;` \u0026amp;\u0026amp; curl -H \u0026#34;X-aws-ec2-metadata-token: $TOKEN\u0026#34; http://169.254.169.254/latest/meta-data/ curl -H \u0026#34;X-aws-ec2-metadata-token: $TOKEN\u0026#34; http://169.254.169.254/latest/meta-data/iam/security-credentials/ROLE So sánh AccessKeyId trong phản hồi với Access Key ID bạn đã ghi lại trước đó để xác nhận việc luân phiên thông tin xác thực đã thành công (chúng phải khác nhau). Trả lời: Khác với AccessKeyID cũ ASIAXCSEC6TNGZ6EZUUO: Để tìm hiểu thêm, hãy tham khảo ví dụ về Incident Response Playbook for Credential Leakage/Compromise trên AWS Samples: https://github.com/aws-samples/aws-incident-response-playbooks/blob/master/playbooks/IRP-CredCompromise.md\nĐiều tra phiên role bị xâm phạm với Amazon Detective Bây giờ bạn đã xem xét và khắc phục phát hiện của GuardDuty \u0026ldquo;UnauthorizedAccess:IAMUser/MaliciousIPCaller.Custom\u0026rdquo;, hãy tiếp tục điều tra những gì đã xảy ra với tài nguyên này và tìm kiếm bất kỳ hoạt động đáng ngờ nào khác liên quan. Bạn có thể chọn điều tra với Detective trước hoặc sau các bước trước đó..\nQuay lại Amazon GuardDuty và mở lại phát hiện tương tự. Tham khảo các bước trước nếu bạn quên cách mở phát hiện, UnauthorizedAccess:IAMUser/MaliciousIPCaller.Custom.\nỞ đầu bảng tổng quan, nhấp vào liên kết có nhãn Investigate with Detective.\nTrong cửa sổ pop-up Investigate with Detective, chọn Role session. Bây giờ bạn sẽ ở trang Role session trong bảng điều khiển của Detective với chi tiết về phát hiện UnauthorizedAccess:IAMUser/MaliciousIPCaller.Custom ở phía bên phải màn hình. Tiến hành trả lời một số câu hỏi để giúp bạn xác định nguyên nhân cốt lõi trong cuộc điều tra. Điều này xảy ra khi nào? Bảng đầu tiên trong tổng quan là Role session details. Bảng này cung cấp thông tin tổng quan về phiên role liên quan đến phát hiện của GuardDuty, bao gồm tài khoản liên quan, role được giả định và thời gian được quan sát lần đầu và cuối cùng.\nXem xét khi nào phiên role được quan sát lần đầu và lần cuối. Thông tin này có tương ứng với thời điểm phát hiện của GuardDuty được tạo và cập nhật không? Thông tin này có thể giúp bạn thu hẹp khoảng thời gian mà role này bị xâm phạm.\nThời gian của GuardDuty và Detective không giống nhau (thời gian trong bảng điều khiển GuardDuty là thời gian trên máy tính xách tay của bạn, còn thời gian trong Detective là UTC). Tuy nhiên, trong file json của phát hiện GuardDuty, thời gian này giống như trong Detective. Bắt đầu từ 17:44 UTC ngày 17/07/2024 Điều này xảy ra trong tài khoản nào và role được giả định có những quyền gì? Lưu ý tài khoản AWS trong phần Role session details. Bạn nên kiểm tra xem tài khoản này có chứa dữ liệu nhạy cảm hoặc công việc sản xuất hay không bằng cách tra cứu trong cơ sở dữ liệu quản lý cấu hình (configuration management database - CMBD) hoặc công cụ khác mà bạn sử dụng để theo dõi.\nTìm liên kết dưới Assumed role trong Role session details và mở nó trong một tab mới. Xem xét các phát hiện liên quan đến role này.\nỞ đầu trang, tìm liên kết AWS role dưới Role details. Mở liên kết này trong một tab mới. Điều này sẽ đưa bạn đến bảng điều khiển IAM.\nTừ bảng điều khiển IAM, bạn sẽ có thể xác định quyền hạn của role, xem có các thẻ nào giúp bạn xác định role này được sử dụng cho mục đích gì và cung cấp cho bạn một điểm pivot trực tiếp từ Detective để thu hồi các phiên.\nBạn có thể đóng tab bảng điều khiển IAM. Quay lại tab với Detective đang mở đến AwsRoleSession. Ở đầu trang, bạn sẽ thấy Detective \u0026gt; Search \u0026gt; AwsRoleSession. Những phát hiện nào khác liên quan đến phiên role này? Xem phần Findings associated with this resource. Xem xét các phát hiện theo thứ tự chúng được quan sát. Có sự tăng đột biến bất thường nào trong các lệnh gọi API thành công hoặc thất bại không? Cuộn xuống bảng Overall API call volume. Nhấp vào Display details for scope time để xem thêm chi tiết.\nKết quả: 38. Dưới Successful calls, nhấp vào một trong các thanh của lệnh gọi API vượt quá mức cơ sở (đường màu xanh). Sau đó nhấp vào Set time interval. Điều này sẽ cập nhật Activity for time window.\nDưới Activity for time window, mở rộng các menu thả xuống để xem địa chỉ IP nào đã thực hiện các lệnh gọi API nào. Bạn cũng có thể chuyển sang các tab API method by service và Access Key ID.\nDưới Failed calls, nhấp vào một trong các thanh của lệnh gọi API thất bại. Sau đó nhấp vào Set time interval. Điều này sẽ cập nhật Activity for time window. Xem xét các lệnh gọi API đã thất bại.\nBạn có thể điều chỉnh Scope time ở đầu trang để xác định xem có hoạt động đáng ngờ nào liên quan đến role này trước hoặc sau khi phát hiện GuardDuty không.\nCó bất kỳ hành vi mới nào được phát hiện không? Một hướng điều tra cho một phát hiện là so sánh hoạt động trong thời gian phạm vi phát hiện với hoạt động đã xảy ra trước khi phát hiện được phát hiện. Hoạt động chưa từng thấy trước đây có thể có khả năng đáng ngờ hơn.\nMột số bảng hồ sơ của Amazon Detective làm nổi bật hoạt động không được quan sát thấy trong thời gian trước phát hiện. Một số bảng hồ sơ cũng hiển thị giá trị cơ sở để cho thấy hoạt động trung bình trong 45 ngày trước thời gian phạm vi. Thời gian phạm vi là tóm tắt hoạt động của một thực thể theo thời gian.\nKhi nhiều dữ liệu hơn được trích xuất vào biểu đồ hành vi của bạn, Detective sẽ phát triển một bức tranh chính xác hơn về hoạt động nào là bình thường trong tổ chức của bạn và hoạt động nào là bất thường.\nTuy nhiên, để tạo ra bức tranh này, Detective cần truy cập dữ liệu ít nhất hai tuần. Mức độ trưởng thành của phân tích Detective cũng tăng lên với số lượng tài khoản trong biểu đồ hành vi.\nHai tuần đầu tiên sau khi bạn kích hoạt Detective được coi là giai đoạn huấn luyện. Trong giai đoạn này, các bảng hồ sơ so sánh hoạt động thời gian phạm vi với hoạt động trước đó hiển thị một thông báo rằng Detective đang trong giai đoạn huấn luyện.\nTrong thời gian dùng thử, Detective khuyến nghị bạn thêm càng nhiều tài khoản thành viên càng tốt vào biểu đồ hành vi. Điều này cung cấp cho Detective một lượng dữ liệu lớn hơn, cho phép nó tạo ra một bức tranh chính xác hơn về hoạt động bình thường cho tổ chức của bạn.\nỞ đầu trang, chuyển sang tab New behavior. Mặc dù bạn sẽ thấy một số thông báo trên trang này cho biết \u0026ldquo;Panel in training\u0026rdquo;, hãy dành vài phút để xem xét các hành vi mới, bao gồm \u0026ldquo;Newly observed geolocations\u0026rdquo;, \u0026ldquo;Newly observed API calls\u0026rdquo;, \u0026ldquo;API calls with increased volume\u0026rdquo;, \u0026ldquo;Newly observed autonomous system organizations\u0026rdquo;, và \u0026ldquo;Newly observed user agents\u0026rdquo;. "
},
{
	"uri": "//localhost:1313/vi/2-introduction-to-threat-detection-and-response-services/2.4-amazon-detective/",
	"title": "Amazon Detective",
	"tags": [],
	"description": "",
	"content": "Nội dung Detective - Tổng quan Detective - Tóm tắt Detective - Tìm kiếm Detective - Điều tra Detective - Nhóm phát hiện Detective - Chi phí Detective - Kiểm toán log EKS "
},
{
	"uri": "//localhost:1313/vi/5/5.4/",
	"title": "Building your own automated response",
	"tags": [],
	"description": "",
	"content": "\rScenario / Problem Statement: Quản lý của bạn đã yêu cầu bạn khám phá việc tự động hóa để khắc phục các phát hiện bảo mật, bắt đầu với các loại phát hiện yêu cầu thời gian khắc phục nhanh nhất.\nKhông giống như cách bạn đã thiết lập thông báo trước đó, bạn có thể không muốn tự động hóa hoàn toàn các phản hồi cho các phát hiện. Để thiết lập tự động hóa mà bạn có thể kích hoạt thủ công cho các phát hiện cụ thể, bạn có thể sử dụng custom actions. Custom action là một cơ chế của Security Hub để gửi các phát hiện đã chọn đến EventBridge, nơi có thể được khớp bởi một EventBridge rule. Rule này định nghĩa một hành động cụ thể cần thực hiện khi nhận được một phát hiện liên quan đến custom action ID. Custom actions có thể được sử dụng, ví dụ, để gửi một phát hiện cụ thể, hoặc một tập hợp nhỏ các phát hiện, đến một quy trình phản hồi hoặc khắc phục. Bạn có thể tạo tối đa 50 custom actions.\nTrong phần này, chúng ta sẽ hướng dẫn bạn cách tạo một custom action trong Security Hub sẽ kích hoạt một EventBridge rule để thực thi một Lambda function. Mục đích của Lambda function là để thay đổi Security Group cho một EC2 instance. Đây chỉ là một ví dụ về cách xây dựng tự động hóa của riêng bạn. Ví dụ này chưa sẵn sàng cho môi trường sản xuất.\nCreate the Security Group Điều hướng đến EC2 console và mở trang Security Groups bằng cách sử dụng bảng điều hướng bên trái.\nNhấp vào Create Security Group. Tại đây, bạn sẽ thiết lập Security Group mà bạn muốn áp dụng cho instance trong quá trình phản hồi sự cố. Bạn muốn giới hạn lưu lượng truy cập chỉ đến các địa chỉ cần thiết cho CIDR của công ty bạn. Đặt Security group name là \u0026ldquo;IncidentResponseSG\u0026rdquo; và cung cấp mô tả.\nXóa VPC được chỉ định và chọn VPC hiển thị \u0026ldquo;cfn-GuardDutyLabs\u0026hellip;\u0026rdquo;.\nXóa outbound rule được thêm mặc định.\nThêm 2 inbound rules để CIDR của công ty bạn có thể RDP và SSH vào instance. Làm theo ảnh chụp màn hình dưới đây.\nCác CIDR blocks chỉ là ví dụ giả để đại diện cho CIDR của công ty bạn nhằm cho phép nhóm bảo mật của bạn RDP và SSH vào instance để thực hiện phân tích pháp y.\nLưu Security Group bằng cách nhấp vào Create Security Group.\nSao chép Security group ID và VPC ID của Security Group mới của bạn. Bạn sẽ cần các IDs này để hoàn thành module này. Result: Create the Lambda function Hãy tạo Lambda function mà chúng ta sẽ sử dụng để thay đổi security group trên instance. Đi đến https://console.aws.amazon.com/lambda/home?#/create/function?intent=authorFromScratch\nTrên trang Create function, đặt Function name là \u0026ldquo;IR-ChangeInstanceSecurityGroup\u0026rdquo; và chọn Node.js 20.x cho Runtime. Nhấp vào Create function.\nSao chép và dán đoạn mã sau vào trình soạn thảo được gắn nhãn Code source (xóa mã hiện có). Thay thế giá trị của SecurityGroupId (hiện đang được đặt thành \u0026ldquo;sg-XXXXXXXXXXXX\u0026rdquo;) bằng Security group ID mà bạn đã ghi lại trước đó.\nimport { EC2Client, ModifyInstanceAttributeCommand } from \u0026#34;@aws-sdk/client-ec2\u0026#34;;\rconst ec2Client = new EC2Client();\rexport const handler = async (event, context) =\u0026gt; {\rtry {\rconst findings = event.detail.findings;\rconst SecurityGroupId = \u0026#34;sg-XXXXXXXXXXXX\u0026#34;;\rvar instanceARN;\rif (findings \u0026amp;\u0026amp; findings.length \u0026gt; 0){\rinstanceARN = findings[0].Resources[0].Id;\r}\rconst command = new ModifyInstanceAttributeCommand({\rInstanceId: instanceARN.split(\u0026#39;/\u0026#39;)[1],\rGroups: [SecurityGroupId]\r});\rawait ec2Client.send(command);\rreturn \u0026#39;Updated security group.\u0026#39;;\r} catch (error) {\rconsole.error(\u0026#39;Error:\u0026#39;, error);\rthrow error;\r}\r}; Sau đó từ menu Code source, nhấp vào File rồi Save. Sau đó nhấp vào nút Deploy. Update Lambda function permissions Ngay phía trên phần Code source cho Lambda function bạn đã tạo, nhấp vào tab Configuration. Sau đó nhấp vào Permissions từ bảng điều hướng bên trái. Chúng ta cần sửa đổi vai trò thực thi cho Lambda function này.\nNhấp vào Role name. Tên này sẽ bắt đầu bằng \u0026ldquo;IR-ChangeInstanceSecurityGroup-role-\u0026rdquo;. Điều này sẽ đưa bạn đến vai trò trong Identity and Access Management (IAM) console. Từ trang Role, nhấp vào nút Add permissions và chọn Create inline policy.\nTrên trang Create policy, nhấp vào tab JSON. Sau đó thay thế chính sách hiện tại bằng chính sách sau (không sử dụng chính sách này trong môi trường sản xuất, nó không tuân theo nguyên tắc least privilege).\n{\r\u0026#34;Version\u0026#34;: \u0026#34;2012-10-17\u0026#34;,\r\u0026#34;Statement\u0026#34;: [\r{\r\u0026#34;Action\u0026#34;: [\r\u0026#34;ec2:*\u0026#34;,\r\u0026#34;ec2:Describe*\u0026#34;,\r\u0026#34;ec2:ModifyInstanceAttribute\u0026#34;\r],\r\u0026#34;Resource\u0026#34;: \u0026#34;*\u0026#34;,\r\u0026#34;Effect\u0026#34;: \u0026#34;Allow\u0026#34;\r}\r]\r} Nhấp vào nút Next. Nếu bạn thấy một biểu ngữ thông báo You need permissions, hãy bỏ qua nó.\nĐặt tên cho chính sách của bạn là \u0026ldquo;ModifySG\u0026rdquo; và nhấp vào Create policy. Create a Custom Action in Security Hub Mở Security Hub. Mở trang Custom actions dưới mục Management trong bảng điều hướng bên trái.\nNhấp vào nút Create custom action.\nNhập Action Name, Action Description, và Action ID đại diện cho hành động mà bạn đang triển khai, ví dụ, \u0026ldquo;UpdateSecurityGroup\u0026rdquo;.\nNhấp vào Create custom action. Sao chép Custom action ARN đã được tạo. Bạn sẽ cần Custom ARN trong các bước tiếp theo. Create Amazon EventBridge Rule to capture the Custom Action Trong phần này, bạn sẽ định nghĩa một EventBridge rule để khớp với các sự kiện (findings) từ Security Hub được chuyển tiếp bởi custom action mà bạn đã định nghĩa ở trên.\nĐiều hướng đến Amazon EventBridge console.\nNhấp vào Create rule ở phía bên phải.\nTrên trang Define rule detail, đặt tên và mô tả cho rule của bạn để thể hiện mục đích của rule (ví dụ, cùng tên và mô tả bạn đã sử dụng cho custom action). Sau đó nhấp vào Next.\nTất cả các findings của Security Hub được gửi dưới dạng sự kiện đến AWS default event bus. Phần define pattern cho phép bạn xác định các bộ lọc để thực hiện một hành động cụ thể khi các sự kiện khớp xuất hiện. Ở bước Build event pattern, để Event source được đặt là AWS events or EventBridge partner events.\nCuộn xuống Event pattern. Dưới Event source, giữ nguyên AWS Services, và dưới AWS Service, chọn Security Hub.\nĐối với Event Type, chọn Security Hub Findings – Custom Action.\nSau đó chọn nút radio Specific custom action ARN(s) và nhập ARN cho custom action mà bạn đã tạo trước đó.\nLưu ý rằng khi bạn chọn các tùy chọn này, Event pattern ở bên phải đã được cập nhật. Nhấp vào Next.\nỞ bước Select target(s), chọn Lambda function từ danh sách thả xuống Select a target. Sau đó chọn IR-ChangeInstanceSecurityGroup từ danh sách thả xuống Function.\nNhấp vào Next.\nTrên bước Configure tags, nhấp vào Next.\nTrên bước Review and create, nhấp vào Create rule. Trigger the automation Tự động hóa của bạn bây giờ đã được thiết lập. Hãy thử nghiệm nó trên một finding cho một EC2 instance. Quay lại trang Findings trong Security Hub.\nThêm một bộ lọc cho Resource Type và nhập AwsEc2Instance (phân biệt chữ hoa chữ thường). Nhấp vào Apply. Thêm một bộ lọc khác cho EC2 Instance VPC ID và nhập VPC ID mà bạn đã ghi lại khi tạo Security Group ở đầu module này. Nhấp vào Apply.\nNhấp vào tiêu đề của bất kỳ finding nào trong danh sách được lọc này mà tài nguyên hiển thị loại AwsEc2Instance.\nTrước khi chúng ta kích hoạt tự động hóa, hãy xem cấu hình hiện tại của EC2 instance để xác nhận tự động hóa của chúng ta hoạt động. Mở rộng phần Resources của finding. Nhấp vào liên kết màu xanh cho EC2 instance này, dưới tiêu đề Resource ID. Điều này sẽ mở một tab mới hiển thị trên EC2 console chỉ hiển thị EC2 instance này.\nNhấp vào instance ID, sau đó nhấp vào tab Security. Ghi lại tên của security group. Quay lại tab Security Hub trong trình duyệt của bạn (đừng đóng tab EC2, bạn sẽ cần quay lại đây) và nhấp vào hộp kiểm bên trái của finding này.\nTrong menu thả xuống Actions, chọn tên của custom action của bạn, Update SG. Sau khi thấy biểu ngữ hiển thị \u0026ldquo;Successfully started action\u0026hellip;\u0026rdquo;, quay lại tab EC2 trên trình duyệt. Làm mới tab (thường sau 3 phút). Xác minh rằng security group trên instance đã được thay đổi. "
},
{
	"uri": "//localhost:1313/vi/2-introduction-to-threat-detection-and-response-services/2.4-amazon-detective/2.4.4-detective-investigations/",
	"title": "Detective - Điều tra",
	"tags": [],
	"description": "",
	"content": "Xác định một tài nguyên để điều tra Mở IAM console và điều hướng đến trang Roles. https://us-east-1.console.aws.amazon.com/iam/home?region=us-east-1#/roles\nTìm kiếm role bắt đầu bằng \u0026ldquo;cfn-GuardDutyLabsInfrastructure-GeneralInstanceRole-\u0026rdquo;.\nChọn tên role. Sao chép ARN từ đầu trang. Bạn sẽ cần ARN này trong bước sau. Thực hiện một cuộc điều tra bằng Detective Mở trang Investigations từ Detective. https://us-east-1.console.aws.amazon.com/detective/home?region=us-east-1#investigations\nTrong trang Investigations, chọn Run investigation ở góc trên bên phải. Trong phần Select resource, bạn có ba cách để thực hiện cuộc điều tra. Bạn có thể chọn chạy cuộc điều tra cho một tài nguyên được Detective khuyến nghị. Bạn có thể chạy cuộc điều tra cho một tài nguyên cụ thể. Bạn cũng có thể điều tra một tài nguyên từ trang Detective Search. Chọn Specify an AWS role or user with an ARN.\nDưới Select resource type chọn AWS role.\nDưới Resource ARN, nhập ARN của tài nguyên mà bạn đã xác định ở trên.\nChọn Run investigation. Chờ cho cuộc điều tra hoàn tất. Nó sẽ hiển thị trạng thái \u0026ldquo;Successful\u0026rdquo; trong vòng 2-3 phút. Chọn ID của cuộc điều tra để xem kết quả. Tùy thuộc vào thời gian mà tài khoản này đã được cung cấp, bạn có thể thấy \u0026ldquo;We did not observe uncommon behavior\u0026hellip;\u0026rdquo;. Tuy nhiên, nếu có điều gì đó đã được phát hiện, bạn sẽ thấy báo cáo chứa phần Indicators of Compromise sbao gồm các chi tiết liên quan đến một hoặc nhiều indicators of compromise. Tóm tắt điều tra làm nổi bật các indicators bất thường cần được chú ý, cho phạm vi thời gian được chọn. Bằng cách sử dụng bản tóm tắt, bạn có thể nhanh chóng xác định nguyên nhân cốt lõi của các vấn đề bảo mật tiềm ẩn, xác định các mẫu và hiểu rõ các tài nguyên bị ảnh hưởng bởi các sự kiện bảo mật.\nNếu bạn muốn tìm thêm chi tiết về loại IP address, bạn sẽ thấy các TTP khác nhau: Loại TTP: "
},
{
	"uri": "//localhost:1313/vi/2-introduction-to-threat-detection-and-response-services/2.2-amazon-guardduty/2.2.4-guardduty-building-your-own-threat-list/",
	"title": "GuardDuty - Xây dựng danh sách mối đe dọa của riêng bạn",
	"tags": [],
	"description": "",
	"content": "Triển khai danh sách mối đe dọa với địa chỉ giả Truy cập Amazon S3 trong AWS Console.\nTìm bucket có chứa \u0026ldquo;-threatlistbucket-\u0026rdquo; trong tên và chọn tên đó. Đây là bucket mà tài khoản AWS Workshop đã thiết lập. 3. Tải lên danh sách mối đe dọa mà bạn đã tạo trước đó vào S3 bucket. Ghi lại S3 URI của tệp bạn vừa tải lên. Để tìm URI, mở bucket, nhấp để mở tệp, và sao chép S3 URI. Bây giờ, chúng ta sẽ thêm danh sách bạn đã tải lên S3 bucket vào danh sách mối đe dọa trong GuardDuty. Quay lại Amazon GuardDuty.\nTrong thanh điều hướng bên trái của GuardDuty, chọn Lists. Chọn nút Add a threat IP list.\nTrong ô tên List name, đặt tên cho danh sách của bạn bằng một tên dễ nhớ như \u0026ldquo;Test Threat List\u0026rdquo;.\nDưới loại vị trí, nhập S3 URI của tệp đã tải lên mà bạn đã ghi lại trước đó.\nChọn Plaintext làm định dạng. Chọn I Agree và sau đó chọn Add list\nBạn sẽ cần kích hoạt danh sách sau khi nó đã được thêm vào GuardDuty. Chọn danh sách mới thêm. Chọn Actions, và sau đó chọn Activate. Một thanh trạng thái màu xanh lá cây sẽ xuất hiện nói \u0026ldquo;Successfully updated the list\u0026hellip;\u0026rdquo;.\n"
},
{
	"uri": "//localhost:1313/vi/2-introduction-to-threat-detection-and-response-services/2.3-amazon-inspector/2.3.4-inspector-vulnerability-database-search/",
	"title": "Inspector - Tìm kiếm trong cơ sở dữ liệu về lỗ hổng",
	"tags": [],
	"description": "",
	"content": "Tìm kiếm CVE Từ Inspector, mở trang Vulnerability database search từ bảng điều hướng ở bên trái dưới mục Settings. https://us-east-1.console.aws.amazon.com/inspector/v2/home?region=us-east-1#/vulnerability-database-search\nNhập và tìm kiếm \u0026ldquo;CVE-2021-44228\u0026rdquo;.\nĐọc mô tả trong phần details. Tìm CVE ID, Severity (NVD), và CVSS score V3/V2 (NVD).\n4. Xem xét Vulnerability intelligence.\n5. Cuối cùng, chọn nút View findings để xem các phát hiện trong tài khoản của bạn cho CVE này.\n"
},
{
	"uri": "//localhost:1313/vi/4/",
	"title": "Quản lý và Ưu tiên các phát hiện bảo mật",
	"tags": [],
	"description": "",
	"content": "Nội dung: 4.1 Ưu tiên các phát hiện quy mô lớn bằng tự động hóa\n4.2 Tự động ẩn các phát hiện bảo mật với quy mô lớn\n4.3 Sử dụng insights để ưu tiên và đo lường\n"
},
{
	"uri": "//localhost:1313/vi/2-introduction-to-threat-detection-and-response-services/2.1-aws-security-hub/2.1.4-security-hub-pricing/",
	"title": "Security Hub - Chi phí",
	"tags": [],
	"description": "",
	"content": "Security Hub - Chi phí Trong thời gian dùng thử miễn phí, bạn sẽ nhận được ước lượng về hóa đơn hàng tháng của bạn nếu bạn tiếp tục sử dụng Security Hub trên cùng các tài khoản và các Regions.\nTrong Security Hub, mở trang Usage từ menu điều hướng bên trái dưới phần Settings. Xem lại mức sử dụng và các yếu tố chi phí của bạn trong thời gian dùng thử hiện tại.\n"
},
{
	"uri": "//localhost:1313/vi/3/3.4/",
	"title": "Tổng hợp tìm kiếm qua các Region",
	"tags": [],
	"description": "",
	"content": "Với việc tổng hợp qua các Region, bạn có thể tổng hợp các kết quả tìm kiếm, cập nhật tìm kiếm, thông tin chi tiết, trạng thái tuân thủ điều khiển và điểm số bảo mật từ nhiều Region đến một Region tổng hợp duy nhất. Sau đó, bạn có thể quản lý tất cả dữ liệu này từ Region tổng hợp.\nGiả sử bạn thiết lập Region tổng hợp là US East (N. Virginia) và các Region liên kết là US West (Oregon) và US West (N. California). Khi bạn xem trang Findings ở US East (N. Virginia), bạn sẽ thấy các kết quả tìm kiếm từ cả ba Region. Các cập nhật đối với các kết quả tìm kiếm đó cũng sẽ được phản ánh ở tất cả ba Region. Trạng thái kích hoạt của một kiểm soát phải được thay đổi ở mỗi Region. Nếu một kiểm soát được kích hoạt ở một Region liên kết nhưng bị vô hiệu hóa ở Region tổng hợp, bạn có thể xem trạng thái tuân thủ của kiểm soát đó từ Region tổng hợp, nhưng không thể kích hoạt hoặc vô hiệu hóa kiểm soát đó từ Region tổng hợp.\nThiết lập tổng hợp tìm kiếm qua các Region Bạn có thể đã thấy một thông báo để Configure finding aggregation. Bạn có thể chọn bất kỳ thông báo nào để tiếp tục thiết lập. Nếu bạn không để ý đến điều này, hãy mở trang Regions dưới phần Settings từ thanh điều hướng bên trái.\nChọn Configure finding aggregation. Chọn US East (N. Virginia) - us-east-1 làm Region Tổng hợp của bạn.\nChọn tất cả các Region có sẵn.\nChọn Save ở dưới cùng của trang. Điều này sẽ kích hoạt tổng hợp qua các Region của các kết quả tìm kiếm, nhưng sẽ không thực sự bật Security Hub ở các Region khác. Lưu ý cho độc giả: Khi bạn nhấp Save để kích hoạt tổng hợp qua các Region, nó sẽ xóa các điểm số tổng hợp và dữ liệu điều khiển trong Security Hub. Nó không xóa các kết quả tìm kiếm hoặc ngừng tạo các kết quả tìm kiếm, nhưng bạn sẽ nhận thấy rằng các điểm số sẽ không xuất hiện (ví dụ, trên trang Summary) cho đến khi các điểm số mới được tính toán dựa trên nhiều Region. Bạn có thể thực hiện phần của workshop có tiêu đề \u0026ldquo;Security Posture Management\u0026rdquo; trước khi hoàn thành mô-đun này.\nBật các dịch vụ bảo mật AWS bạn sử dụng trong Region liên kết Mặc dù nhiều dịch vụ bảo mật AWS đã được bật ở us-east-1 (N. Virginia) và bạn đã thiết lập tổng hợp kết quả tìm kiếm trong Security Hub, điều đó không có nghĩa là tất cả các dịch vụ đó đã được bật ở các Region khác mà bạn dự định hoạt động. Để nhanh chóng bật tất cả các dịch vụ bảo mật AWS giống nhau ở us-east-2 (Ohio), hãy sử dụng CloudFormation để triển khai mọi thứ ở Region thứ hai. Ngay khi các dịch vụ đó được bật ở Region thứ hai, các kết quả tìm kiếm từ chúng sẽ tự động được tổng hợp vào Security Hub ở us-east-1 (N. Virginia) nhờ vào thiết lập bạn đã thực hiện ở trên.\nMở trang https://us-east-1.console.aws.amazon.com/cloudformation/home?region=us-east-1#/stacks/?filteringText=cfn\u0026filteringStatus=active\u0026viewNested=false trong bảng điều khiển CloudFormation. Chọn tên của stack, cfn. Mở tab Outputs. Chọn liên kết \u0026ldquo;SecurityServicesCloudFormationLink\u0026rdquo; để khởi chạy một mẫu CloudFormation được cấu hình sẵn ở us-east-2 (Ohio). Điều này sẽ mở trang \u0026ldquo;Quick create stack\u0026rdquo; ở us-east-2 (Ohio) và điền thông tin và tham số stack. Đảm bảo rằng nó hiển thị \u0026ldquo;Ohio\u0026rdquo; ở góc trên bên phải của trang.\nĐể các giá trị giữ nguyên cho \u0026ldquo;Stack name\u0026rdquo;, \u0026ldquo;MyAssetsBucketName\u0026rdquo;, và \u0026ldquo;MyAssetsBucketPrefix\u0026rdquo;. Nếu không có giá trị nào, hãy hỏi người hướng dẫn của bạn. Ở dưới cùng của trang, đánh dấu vào ô bên cạnh I acknowledge that AWS CloudFormation might create IAM resources with custom names and I acknowledge that AWS CloudFormation might require the following capability: CAPABILITY_AUTO_EXPAND.\nChọn Create stack. Điều này sẽ bật AWS Config, Security Hub, Inspector, Detective, Macie và GuardDuty ở us-east-2 (Ohio). Bởi vì bạn đã cấu hình tổng hợp kết quả tìm kiếm trong Security Hub, ngay khi các kết quả tìm kiếm từ bất kỳ dịch vụ nào trong số này xuất hiện trong Security Hub ở Region này, chúng sẽ cũng xuất hiện trong Region tổng hợp của bạn. Điều này sẽ mất vài phút. Bạn có thể tiếp tục mà không cần chờ đợi. Quay lại Security Hub. Nếu bạn không chuyển lại về Region workshop gốc, bạn sẽ thấy một thông báo để Đi đến Region tổng hợp. Chọn thông báo đó. Đảm bảo rằng bạn đã trở lại us-east-1 (N. Virginia) (bạn nên thấy \u0026ldquo;N. Virginia\u0026rdquo; ở góc trên bên phải của màn hình).\nKhi bạn đã quay lại Security Hub trong Region tổng hợp của bạn, bạn sẽ nhận thấy rằng trang Findings hiện bao gồm các kết quả tìm kiếm từ nhiều Region khác nhau, và các hình ảnh trên trang Summary cũng làm nổi bật các kết quả tìm kiếm qua các Region. Chúng ta sẽ khám phá các trang đó sau.\n(Sau 5 phút) "
},
{
	"uri": "//localhost:1313/vi/6/6.4/",
	"title": "Ứng phó khi một hàm Lambda gọi đến IP độc hại",
	"tags": [],
	"description": "",
	"content": "\rTình huống / Báo cáo vấn đề: Bạn được giao nhiệm vụ điều tra và khắc phục một phát hiện của GuardDuty. Loại phát hiện của GuardDuty là \u0026ldquo;UnauthorizedAccess:Lambda/MaliciousIPCaller.Custom\u0026rdquo;.\nLambda Protection giúp bạn xác định các mối đe dọa bảo mật tiềm ẩn khi một hàm AWS Lambda được gọi trong môi trường AWS của bạn. Khi bạn kích hoạt Lambda Protection, GuardDuty bắt đầu giám sát các log hoạt động mạng của Lambda, bắt đầu với VPC Flow Logs từ tất cả các hàm Lambda cho tài khoản của bạn, bao gồm cả những log không sử dụng mạng VPC, và được tạo ra khi hàm Lambda được gọi. Nếu GuardDuty xác định được lưu lượng mạng đáng ngờ cho thấy có thể có sự xuất hiện của một đoạn mã độc trong hàm Lambda của bạn, GuardDuty sẽ tạo ra một phát hiện.\nGuardDuty giám sát các log hoạt động mạng được tạo ra bởi việc gọi các hàm Lambda. Giám sát Hoạt động Mạng của Lambda bao gồm Amazon VPC Flow Logs từ tất cả các hàm Lambda trong tài khoản của bạn, bao gồm cả những log không sử dụng mạng VPC, và có thể thay đổi, bao gồm mở rộng sang các hoạt động mạng khác như dữ liệu truy vấn DNS được tạo ra bởi việc gọi các hàm Lambda. Việc mở rộng sang các hình thức giám sát hoạt động mạng khác sẽ làm tăng khối lượng dữ liệu mà GuardDuty sẽ xử lý cho Lambda Protection. Điều này sẽ ảnh hưởng trực tiếp đến chi phí sử dụng Lambda Protection. Bất cứ khi nào GuardDuty bắt đầu giám sát một log hoạt động mạng bổ sung, nó sẽ cung cấp thông báo cho các tài khoản đã bật Lambda Protection ít nhất 30 ngày trước khi phát hành.\nTạo Security Group Truy cập trang Findings trong GuardDuty. https://console.aws.amazon.com/guardduty/home?#/findings?macros=current\nThêm tiêu chí lọc và chọn Resource sau đó chọn Lambda. Lưu ý rằng có một phát hiện về một hàm Lambda đang gọi đến một IP độc hại. Phát hiện này được tạo ra bởi một hàm Lambda được lập lịch chạy mỗi 10 phút. Hàm này gọi đến một địa chỉ IP nằm trong danh sách IP độc hại đang hoạt động trong GuardDuty có tên là \u0026ldquo;S3BadIpAddressList\u0026rdquo;.\nCliNhấp vào phát hiện để mở và xem xét chi tiết. Bạn có thể tìm thấy tên của hàm Lambda và địa chỉ IP mà nó đang gọi từ danh sách IP độc hại không? Hàm Lambda: IP: Nếu muốn xem lịch sử cấu hình của hàm, bạn có thể sử dụng AWS Config. AWS Config liên tục đánh giá, kiểm tra và đánh giá cấu hình cũng như mối quan hệ giữa các tài nguyên của bạn trên AWS, tại chỗ và trên các Cloud khác. Mở AWS Config và điều hướng đến Timeline cho hàm Lambda, hoặc theo liên kết này: https://console.aws.amazon.com/config/home?#/resources/timeline?resourceId=traffic-simulation\u0026resourceName=traffic-simulation Nhấp vào Load more ở cuối trang cho đến khi hiển thị toàn bộ lịch sử. Mở rộng sự kiện CloudTrail cũ nhất, sau đó dưới mục View event, nhấp vào CloudTrail. AWS CloudTrail giám sát và ghi lại hoạt động tài khoản trên cơ sở hạ tầng AWS của bạn, cung cấp cho bạn quyền kiểm soát lưu trữ, phân tích và hành động khắc phục.\nNhấp vào tên của sự kiện trong CloudTrail. Nó sẽ bắt đầu bằng \u0026ldquo;CreateFunction\u0026hellip;\u0026rdquo;. Điều này sẽ mở bản ghi sự kiện về việc tạo hàm Lambda này. Trong số các thông tin khác, bản ghi sự kiện này chi tiết rằng hàm được tạo bằng CloudFormation, từ một hàm được lưu trữ trong Amazon S3, bởi người dùng có tên WSSystemRole. 8. Bạn có thể tùy chọn xóa hàm Lambda từ bảng điều khiển Lambda. Nếu không, hãy tiếp tục sang module tiếp theo.\n"
},
{
	"uri": "//localhost:1313/vi/2-introduction-to-threat-detection-and-response-services/2.4-amazon-detective/2.4.5-detective-finding-groups/",
	"title": "Detective - Nhóm phát Hiện",
	"tags": [],
	"description": "",
	"content": "Nhóm phát hiện bảo mật của Amazon Detective cho phép bạn kiểm tra nhiều hoạt động liên quan đến một sự kiện bảo mật tiềm ẩn. Bạn có thể phân tích nguyên nhân cốt lõi của các phát hiện bảo mật nghiêm trọng từ GuardDuty bằng cách sử dụng các nhóm phát hiện bảo mật. Nếu một tác nhân đe dọa đang cố gắng xâm nhập vào môi trường AWS của bạn, họ thường thực hiện một chuỗi hành động dẫn đến nhiều phát hiện bảo mật bảo mật và hành vi bất thường. Những hành động này thường được phân tán theo thời gian và các thực thể khác nhau. Khi các phát hiện bảo mật bảo mật được điều tra một cách riêng lẻ, có thể dẫn đến sự hiểu lầm về ý nghĩa của chúng và khó khăn trong việc tìm ra nguyên nhân cốt lõi. Amazon Detective giải quyết vấn đề này bằng cách áp dụng kỹ thuật phân tích đồ thị để suy luận mối quan hệ giữa các phát hiện bảo mật và các thực thể, và nhóm chúng lại với nhau. Chúng tôi khuyến nghị nên coi các nhóm phát hiện bảo mật là điểm khởi đầu để điều tra các thực thể và phát hiện bảo mật liên quan.\nDetective phân tích dữ liệu từ các phát hiện bảo mật và nhóm chúng với các phát hiện bảo mật khác có khả năng liên quan dựa trên các tài nguyên mà chúng chia sẻ. Ví dụ, các phát hiện bảo mật liên quan đến các hành động thực hiện bởi cùng một phiên IAM role hoặc xuất phát từ cùng một địa chỉ IP rất có khả năng là một phần của cùng một hoạt động cơ bản. Việc điều tra các phát hiện bảo mật và bằng chứng theo nhóm là rất có giá trị, ngay cả khi các mối liên hệ được tạo ra bởi Detective không liên quan.\nNgoài các phát hiện bảo mật, mỗi nhóm còn bao gồm các thực thể liên quan đến các phát hiện bảo mật. Các thực thể có thể bao gồm các tài nguyên bên ngoài AWS như địa chỉ IP hoặc tác nhân người dùng.\nSau khi một phát hiện bảo mật GuardDuty ban đầu xảy ra và liên quan đến một phát hiện bảo mật khác, nhóm phát hiện bảo mật với tất cả các phát hiện bảo mật liên quan và tất cả các thực thể liên quan sẽ được tạo ra trong vòng 48 giờ.\n"
},
{
	"uri": "//localhost:1313/vi/2-introduction-to-threat-detection-and-response-services/2.2-amazon-guardduty/2.2.5-guardduty-suppressing-findings/",
	"title": "GuardDuty - Ẩn phát hiện",
	"tags": [],
	"description": "",
	"content": "Cấu hình quy tắc để ẩn các phát hiện không mong muốn cho công cụ đánh giá lỗ hổng của bạn Từ bảng điều khiển GuardDuty, mở trang Findings.\nChọn nút Suppress Findings. Quy tắc ẩn nên bao gồm hai tiêu chí lọc. Tiêu chí đầu tiên nên sử dụng thuộc tính Loại phát hiện với giá trị là Recon:EC2/Portscan. Trong trường Add filter criteria, chọn Finding Type và nhập \u0026ldquo;Recon:EC2/Portscan\u0026rdquo;. Chọn Apply.\nLưu ý rằng sau khi thêm bộ lọc đầu tiên, bản xem trước ở dưới cùng của trang sẽ hiển thị các phát hiện sẽ bị ẩn bởi quy tắc này. Để đảm bảo rằng bạn không vô tình ẩn một phát hiện mà bạn muốn nhận thông báo, hãy thêm tiêu chí lọc thứ hai để thu hẹp quy tắc.\nTiêu chí lọc thứ hai nên khớp với instance hoặc các instance lưu trữ các công cụ đánh giá lỗ hổng này. Bạn có thể sử dụng thuộc tính Instance image ID hoặc thuộc tính Tag value attribute tùy thuộc vào tiêu chí nào có thể nhận diện các instance lưu trữ các công cụ này. Chọn Add filter criteria một lần nữa, và chọn Instance Tag Value nhập \u0026ldquo;Scanner\u0026rdquo;. Chọn Apply. Lưu ý rằng chỉ một phát hiện sẽ bị ẩn bởi quy tắc này.\nNhập \u0026ldquo;VulnerabilityAssessmentTool\u0026rdquo; vào trường Name. Nhập \u0026ldquo;Suppress findings from Vulnerability Assessment Tool.\u0026rdquo; vào trường Description. Chọn Save.\n"
},
{
	"uri": "//localhost:1313/vi/2-introduction-to-threat-detection-and-response-services/2.3-amazon-inspector/2.3.5-inspector-suppressing-findings/",
	"title": "Inspector - Ẩn phát hiện",
	"tags": [],
	"description": "",
	"content": "Sử dụng quy tắc ẩn để ẩn các phát hiện khớp với tiêu chí. Ví dụ: bạn có thể tạo quy tắc ẩn tất cả các phát hiện có điểm dễ bị tổn thương thấp, do đó bạn chỉ có thể tập trung vào các phát hiện quan trọng nhất.\nQuy tắc ẩn chỉ được sử dụng để lọc danh sách các phát hiện của bạn và không có bất kỳ tác động nào đến các phát hiện hoặc ngăn Amazon Inspector tạo ra các phát hiện.\nNếu Amazon Inspector tạo ra các phát hiện khớp với quy tắc ẩn, các phát hiện sẽ được đặt thành Suppressed. Các phát hiện khớp với quy tắc ẩn sẽ không xuất hiện trong danh sách của bạn theo mặc định.\nCấu hình một rule để ẩn các phát hiện có mức độ nguy hiểm thấp trong môi trường dev Chọn Suppression rules từ thanh điều hướng bên trái trong Inspector.\nChọn Create Rule. Nhập \u0026ldquo;Low Severity - Dev Environment\u0026rdquo; vào trường Name.\nNhập \u0026ldquo;Suppress all findings with a low severity score for resources tagged with Development\u0026rdquo; vào trường Description. Trong phần Suppression rule filters chọn Severity và đánh dấu vào ô Low. Chọn Apply. Sau đó, nhấp để thêm một bộ lọc khác và chọn Resource tag dưới EC2. Nhập \u0026ldquo;Environment\u0026rdquo; cho key và \u0026ldquo;Development\u0026rdquo; cho value. Chọn Apply.\nChọn Save. Kết quả: Bạn có thể xem các phát hiện đã bị ẩn trong trang All Findings bằng cách chuyển từ Active sang Suppressed trong menu thả xuống.\n"
},
{
	"uri": "//localhost:1313/vi/5/5.5/",
	"title": "Làm giàu kết quả bảo mật với dữ liệu điều tra",
	"tags": [],
	"description": "",
	"content": "Trong bối cảnh mối đe dọa đang thay đổi nhanh chóng ngày nay, việc hiểu rõ rủi ro và tìm ra nguyên nhân gốc rễ của một vấn đề một cách kịp thời là điều quan trọng đối với các doanh nghiệp. Amazon Detective giúp dễ dàng phân tích, điều tra và nhanh chóng xác định nguyên nhân gốc rễ của các vấn đề bảo mật tiềm ẩn hoặc hoạt động đáng ngờ. Amazon Detective hỗ trợ khả năng tự động điều tra các thực thể AWS Identity and Access Management (IAM) để tìm các chỉ báo về việc bị xâm phạm (IoC). Khả năng này giúp các nhà phân tích bảo mật xác định xem các thực thể IAM có thể đã bị xâm phạm hoặc tham gia vào bất kỳ chiến thuật, kỹ thuật và quy trình (TTP) nào được biết đến từ MITRE ATT\u0026amp;CK framework. Bạn có thể sử dụng Detective Investigation API một cách lập trình để giúp điều tra các vấn đề bảo mật tiềm ẩn.\nSecurity Hub là một công cụ quản lý tư thế bảo mật trên đám mây tự động phát hiện khi các tài khoản và tài nguyên AWS của bạn không tuân theo các phương pháp bảo mật tốt nhất, tổng hợp các cảnh báo bảo mật vào một nơi và định dạng duy nhất, và hiểu rõ tư thế bảo mật tổng thể của bạn trên tất cả các tài khoản AWS của bạn. Security Hub cung cấp cho bạn tùy chọn gửi findings đến một giải pháp bảo mật khác, chẳng hạn như AWS Security Lake hoặc một giải pháp của AWS Partner Network (APN). Nhiều khách hàng sử dụng AWS Security Hub để phát hiện các cấu hình bảo mật sai và xem xét, ưu tiên các findings bảo mật. Họ thích cái nhìn đơn giản, tập trung vào findings trong Security Hub hơn là việc xem xét và ưu tiên các findings trong từng dịch vụ và vùng mà chúng xuất phát.\nAmazon GuardDuty là một dịch vụ phát hiện mối đe dọa thông minh liên tục theo dõi các tài khoản AWS, khối lượng công việc, hoạt động runtime và dữ liệu của bạn để tìm hoạt động độc hại. Nếu phát hiện hoạt động độc hại tiềm ẩn, chẳng hạn như hành vi bất thường hoặc rò rỉ thông tin xác thực, GuardDuty tạo ra các findings bảo mật chi tiết. Khi bạn kích hoạt GuardDuty và Security Hub trong cùng một tài khoản và cùng một vùng AWS, GuardDuty sẽ bắt đầu gửi tất cả các findings được tạo ra đến Security Hub.\nTrong module này, bạn sẽ xây dựng một giải pháp tích hợp Detective với Security Hub giúp bạn có cái nhìn tốt hơn về các chỉ báo mối đe dọa và dữ liệu điều tra trực tiếp từ Security Hub. Điều này cho phép bạn thực hiện các cuộc điều tra kịp thời hơn về các findings của GuardDuty từ một cái nhìn tập trung. Giải pháp sẽ tự động thực hiện làm giàu dữ liệu cho các findings có mức độ nghiêm trọng cao và trung bình và cung cấp cho bạn sự linh hoạt để khởi tạo các cuộc điều tra và làm giàu dữ liệu bổ sung theo yêu cầu. Bằng cách làm giàu các findings trong Security Hub, bạn có tùy chọn xem xét những findings đã được làm giàu trực tiếp trong Security Hub console, hoặc bạn có thể kích hoạt tích hợp để xem xét các findings đã được làm giàu trong giải pháp mà bạn chọn.\nThe solution architecture Security Hub tự động gửi tất cả các findings mới và tất cả các bản cập nhật cho các findings hiện có đến EventBridge dưới dạng các sự kiện Security Hub Findings - Imported. Mỗi sự kiện Security Hub Findings - Imported chứa một finding duy nhất. Security Hub cũng gửi các findings liên quan đến các custom actions đến EventBridge dưới dạng các sự kiện Security Hub Findings - Custom Action. Như được hiển thị trong sơ đồ kiến trúc dưới đây, bạn sẽ sử dụng EventBridge Rules để gọi một Lambda function cho mỗi finding mà bạn làm giàu. Bạn sẽ sử dụng một EventBridge Rule cho các sự kiện Imported để tự động khởi tạo Lambda function cho các findings có mức độ nghiêm trọng cao (và trung bình) được Security Hub tổng hợp từ GuardDuty. Bạn sẽ sử dụng một EventBridge Rule thứ hai cho các sự kiện Custom Action để khởi tạo các cuộc điều tra và làm giàu dữ liệu bổ sung theo yêu cầu. Cả hai EventBridge Rules sẽ hướng tới cùng một Lambda function. Lambda function sẽ gọi Detective Investigation API, đợi kết quả, sau đó gọi Security Hub API để cập nhật finding.\nScenario / Problem Statement: Kể từ khi nhóm của bạn bật các dịch vụ bảo mật khác nhau của AWS và tổng hợp tất cả mọi thứ trong Security Hub, ban lãnh đạo của bạn đang yêu cầu các thông tin chi tiết từ tất cả dữ liệu đó. Cụ thể, bạn đã được yêu cầu rút ra các thông tin chi tiết về tuân thủ, cảnh báo có mức độ ưu tiên cao nhất, và các tài nguyên tạo ra số lượng cảnh báo bảo mật nhiều nhất.\nRetrieve investigative data from Detective using Lambda Bạn có thể bắt đầu các cuộc điều tra trong Detective và truy xuất kết quả thông qua API. Để làm điều này, bạn sẽ sử dụng một Lambda function được viết bằng JavaScript (Node.js 20.x). AWS Lambda hỗ trợ nhiều ngôn ngữ lập trình, nhưng bạn sẽ sử dụng JavaScript trong ví dụ này.\nĐể bắt đầu một cuộc điều tra, bạn phải cung cấp cho API một Amazon Resource Name (ARN) của một IAM role hoặc user, thời gian bắt đầu, thời gian kết thúc, và ARN của Detective behavior graph. Detective API sẽ truy xuất kết quả của cuộc điều tra bao gồm các chỉ số về việc bị xâm phạm (IoC), TTPs (chiến thuật, kỹ thuật và quy trình), và một điểm số mức độ nghiêm trọng theo danh mục. Điểm số mức độ nghiêm trọng được trả về được tính toán bằng cách sử dụng hai chiều; confidence và impact; trong đó confidence đại diện cho khả năng cao các sự kiện là bất thường và không phải là hành vi bình thường của người dùng. Chiều thứ hai là impact; điều này định lượng tác hại có thể xảy ra từ các sự kiện như một thước đo ảnh hưởng của TTPs.\nĐầu tiên, tạo Lambda function. Truy cập https://console.aws.amazon.com/lambda/home?#/create/function?intent=authorFromScratch.\nTrên trang Create function, đặt Function name là \u0026ldquo;InvestigateWithDetective\u0026rdquo; và chọn Node.js 20.x cho Runtime.\nGiữ nguyên tất cả các cài đặt khác. Nhấp vào Create function.\nSao chép và dán đoạn mã sau vào trình soạn thảo được gắn nhãn Code source. Đây sẽ là mục tiêu của EventBridge rule trong kiến trúc. Function này lấy ARN từ một phát hiện bảo mật của GuardDuty được Security Hub tổng hợp và gọi Investigation API. Khi kết quả được trả về, function định dạng dữ liệu thành AWS Security Finding Format (ASFF) được sử dụng bởi Security Hub, và gọi BatchUpdateFindings API để gửi finding đã được làm giàu và cập nhật trở lại Security Hub.\n\u0026#34;use strict\u0026#34;;\rimport {\rDetectiveClient,\rGetInvestigationCommand,\rListGraphsCommand,\rStartInvestigationCommand,\r} from \u0026#34;@aws-sdk/client-detective\u0026#34;;\rimport { BatchUpdateFindingsCommand, SecurityHubClient } from \u0026#34;@aws-sdk/client-securityhub\u0026#34;;\rconst SHClient = new SecurityHubClient();\rconst detectiveClient = new DetectiveClient();\rexport const handler = async (event) =\u0026gt; {\rtry {\r// Handle only one (the first) finding per function call\rconst finding = event.detail.findings[0];\rif (finding.ProductName != \u0026#34;GuardDuty\u0026#34;) {\r// Handle only GuardDuty findings\rthrow new Error(\u0026#34;This is not a GuardDuty finding!\u0026#34;);\r}\rconst listgraphs = new ListGraphsCommand({});\rconst graphs = await detectiveClient.send(listgraphs);\rconst graphArn = graphs.GraphList[0].Arn;\rconst IAMResourceARNs = finding.Resources.filter((resource) =\u0026gt; {\rreturn (\rresource.Type == \u0026#34;AwsIamRole\u0026#34; ||\rresource.Type == \u0026#34;AwsIamUser\u0026#34; ||\r(resource.Type == \u0026#34;AwsIamAccessKey\u0026#34; \u0026amp;\u0026amp; resource.Details.AwsIamAccessKey.PrincipalName != \u0026#34;aws:ec2-instance\u0026#34;)\r);\r}).map((resource) =\u0026gt; {\rif (resource.Type == \u0026#34;AwsIamRole\u0026#34; || resource.Type == \u0026#34;AwsIamUser\u0026#34;) {\rreturn {\rarn: resource.Id,\rtype: resource.Type == \u0026#34;AwsIamRole\u0026#34; ? \u0026#34;role\u0026#34; : \u0026#34;user\u0026#34;,\r};\r} else if (resource.Type == \u0026#34;AwsIamAccessKey\u0026#34;) {\rreturn {\rarn: `arn:aws:iam::${finding.AwsAccountId}:role/${resource.Details.AwsIamAccessKey.PrincipalName}`,\rtype: \u0026#34;role\u0026#34;,\r};\r}\r});\rif (IAMResourceARNs.length == 0) {\rthrow new Error(\u0026#34;No IAM resource to investigate!\u0026#34;);\r}\r// Investigate the first IAM role or user identified in the finding\rconst investigationTarget = IAMResourceARNs[0].arn;\rconst investigationTargetType = IAMResourceARNs[0].type;\rconst investigationEndTime = new Date(Date.now());\rinvestigationEndTime.setMinutes(investigationEndTime.getMinutes() - 5);\rlet investigationStartTime;\rif (finding.FirstObservedAt) {\rinvestigationStartTime = new Date(finding.FirstObservedAt);\r} else if (finding.CreatedAt) {\rinvestigationStartTime = new Date(finding.CreatedAt);\r} else if (finding.ProcessedAt) {\rinvestigationStartTime = new Date(finding.ProcessedAt);\r} else {\rthrow new Error(\u0026#34;Investigation start time invalid!\u0026#34;);\r}\rinvestigationStartTime.setHours(investigationStartTime.getHours() - 24);\rconst totalInvestigationTime = Math.round(\r(investigationEndTime.getTime() - investigationStartTime.getTime()) / (1000 * 60 * 60),\r); // Hours\rconst startInvestigationRequest = {\rGraphArn: graphArn,\rEntityArn: investigationTarget,\rScopeStartTime: investigationStartTime,\rScopeEndTime: investigationEndTime,\r};\rconst startinvestigation = new StartInvestigationCommand(startInvestigationRequest);\rconst investigation = await detectiveClient.send(startinvestigation);\rconst investigationId = investigation.InvestigationId;\rconst getInvestigationRequest = {\rGraphArn: graphArn,\rInvestigationId: investigationId,\r};\rlet investigationResult = { Status: \u0026#34;RUNNING\u0026#34; };\rwhile (investigationResult.Status == \u0026#34;RUNNING\u0026#34;) {\rawait new Promise((r) =\u0026gt; setTimeout(r, 30000));\rconst getinvestigation = new GetInvestigationCommand(getInvestigationRequest);\rinvestigationResult = await detectiveClient.send(getinvestigation);\rif (investigationResult.Status == \u0026#34;FAILED\u0026#34;) {\rthrow new Error(\u0026#34;Detective investigation failed!\u0026#34;);\r}\r}\rlet investigationSummary = \u0026#34;\u0026#34;;\rswitch (investigationResult.Severity) {\rcase \u0026#34;INFORMATIONAL\u0026#34;:\rcase \u0026#34;LOW\u0026#34;:\rinvestigationSummary += `We did not observe uncommon behavior for the associated ${investigationTargetType} during the ${totalInvestigationTime} hour investigation window.`;\rbreak;\rcase \u0026#34;MEDIUM\u0026#34;:\rinvestigationSummary += `We observed anomalous behavior for the associated ${investigationTargetType} during the ${totalInvestigationTime} hour investigation window which might be indicative of compromise.`;\rbreak;\rcase \u0026#34;HIGH\u0026#34;:\rcase \u0026#34;CRITICAL\u0026#34;:\rinvestigationSummary += `We observed anomalous behavior for the associated ${investigationTargetType} during the ${totalInvestigationTime} hour investigation window indicating potential compromise.`;\rbreak;\rdefault:\rthrow new Error(\u0026#34;Severity information not found!\u0026#34;);\r}\rinvestigationSummary += \u0026#34; For more information, visit \u0026#34;;\rinvestigationSummary += `https://${process.env.AWS_REGION}.console.aws.amazon.com/detective/home?region=${process.env.AWS_REGION}#investigationReport/${investigationResult.InvestigationId}`;\rconst findingUpdateInput = {\rFindingIdentifiers: [\r{\rId: finding.Id,\rProductArn: finding.ProductArn,\r},\r],\rNote: {\rText: investigationSummary.substring(0, 512),\rUpdatedBy: \u0026#34;Detective Investigation Lambda function.\u0026#34;,\r},\rUserDefinedFields: {\rinvestigate: \u0026#34;complete\u0026#34;,\r},\r};\rconst batchUpdateCommand = new BatchUpdateFindingsCommand(findingUpdateInput);\rconst updatedFinding = await SHClient.send(batchUpdateCommand);\rreturn updatedFinding;\r} catch (error) {\rconsole.error(\u0026#34;Error:\u0026#34;, error);\rthrow error;\r}\r}; Sau đó từ menu Code source, nhấp vào File rồi Save.\nSau đó nhấp vào nút Deploy.\nNgay phía trên phần Code source cho Lambda function bạn đã tạo, nhấp vào tab Configuration.\nTrên tab General Configuration, nhấp vào Edit.\nThời gian chờ của function cần được kéo dài đến 15 phút để cho phép Detective hoàn thành cuộc điều tra. Cập nhật thời gian chờ thành 15 phút và nhấp vào Save.\nNgay phía trên phần Code source cho Lambda function bạn đã tạo, nhấp vào tab Configuration.\nĐể function này hoạt động như mong muốn, bạn sẽ cần thay đổi quyền của function. Quyền này cần bao gồm các hành động cần thiết mà bạn đang thực hiện với Detective và Security Hub trong function. Bạn cần thêm một chính sách mới vào vai trò thực thi cho Lambda function này. Sau đó nhấp vào Permissions từ bảng điều hướng bên trái xuất hiện.\nNhấp vào Role name. Tên này sẽ bắt đầu bằng \u0026ldquo;InvestigateWithDetective-role-\u0026rdquo;. Điều này sẽ đưa bạn đến vai trò trong Identity and Access Management (IAM) console. Từ trang Role, nhấp vào nút Add permissions và chọn Create inline policy.\nTrên trang Create policy, nhấp vào tab JSON. Sau đó thay thế chính sách hiện tại bằng chính sách sau (không sử dụng chính sách này trong môi trường sản xuất, vì nó không hoàn toàn tuân theo nguyên tắc least privilege và chỉ được dùng làm ví dụ).\n{\r\u0026#34;Version\u0026#34;: \u0026#34;2012-10-17\u0026#34;,\r\u0026#34;Statement\u0026#34;: [\r{\r\u0026#34;Effect\u0026#34;: \u0026#34;Allow\u0026#34;,\r\u0026#34;Action\u0026#34;: [\r\u0026#34;detective:ListGraphs\u0026#34;,\r\u0026#34;detective:searchGraph\u0026#34;,\r\u0026#34;detective:StartInvestigation\u0026#34;,\r\u0026#34;detective:UpdateInvestigationState\u0026#34;,\r\u0026#34;detective:GetInvestigation\u0026#34;,\r\u0026#34;detective:ListInvestigations\u0026#34;,\r\u0026#34;detective:ListIndicators\u0026#34;,\r\u0026#34;securityhub:BatchUpdateFindings\u0026#34;,\r\u0026#34;securityhub:UpdateFindings\u0026#34;\r],\r\u0026#34;Resource\u0026#34;: \u0026#34;*\u0026#34;\r}\r]\r} Nhấp vào nút Next. Nếu bạn thấy một biểu ngữ thông báo You need permissions, hãy bỏ qua nó.\nĐặt tên cho chính sách của bạn là \u0026ldquo;DetectiveSecurityHubIntegration\u0026rdquo; và nhấp vào Create policy. Set up automated investigations and finding enrichment with easy to configure filters Bây giờ bạn đã bật GuardDuty, Security Hub, và Detective (điều này đã được thực hiện cho bạn) và đã thiết lập Lambda function, bạn đã sẵn sàng thiết lập hai phương pháp khởi tạo các cuộc điều tra. Phương pháp đầu tiên liên quan đến việc tự động điều tra và làm giàu các GuardDuty findings có mức độ nghiêm trọng HIGH và MEDIUM. Điều này sẽ tăng tốc quá trình điều tra cho các findings có mức độ nghiêm trọng cao nhất vì bạn không cần phải vào Security Hub hoặc Detective và chọn thủ công các findings để điều tra.\nTrong phương pháp này, bạn sẽ khởi tạo Lambda function mà bạn đã thiết lập trước đó bằng cách sử dụng Security Hub Automations và một EventBridge Rule. Sử dụng Security Hub Automations cho phép bạn cấu hình và cập nhật các findings nào được tự động điều tra và làm giàu mà không cần thay đổi mã liên tục (các quy tắc tự động hóa sử dụng giao diện người dùng với các tùy chọn thả xuống cho tiêu chí).\nMở Security Hub và đi đến Automations page.\nNhấp vào Create rule.\nChọn Create custom rule. Đặt tên cho quy tắc của bạn là \u0026ldquo;Automated Investigation\u0026rdquo; và cung cấp mô tả cho quy tắc.\nDưới phần Criteria, chọn ProductName cho Key, Equals cho Operator, và nhập \u0026ldquo;GuardDuty\u0026rdquo; cho Value.\nNhấp vào Add criteria.\nĐối với tiêu chí thứ hai, chọn SeverityLabel cho Key, Equals cho Operator, và HIGH cho Value.\nSau đó, dưới tiêu chí đó, nhấp vào văn bản Add another value. Lần này, chọn Equals cho Operator và MEDIUM cho Value.\nNhấp vào Add criteria lần thứ ba. Lần này, chọn ResourceType cho Key, Equals cho Operator, và nhập \u0026ldquo;AwsIamAccessKey\u0026rdquo; cho Value (phân biệt chữ hoa chữ thường).\nDưới tiêu chí ResourceType, nhấp vào Add another value hai lần để thêm hai giá trị nữa. Sử dụng operator là Equals cho cả hai. Sau đó, sử dụng các giá trị \u0026ldquo;AwsIamUser\u0026rdquo; và \u0026ldquo;AwsIamRole\u0026rdquo; tương ứng. Đảm bảo rằng phần Criteria khớp với ảnh chụp màn hình bên dưới.\nCuộn xuống phần Automated action và nhấp vào Add another key-value pair. Đây là cách bạn sẽ thiết lập một trường do người dùng xác định để gắn cờ các findings mà bạn muốn tự động điều tra.\nĐối với Key, nhập \u0026ldquo;investigate\u0026rdquo;, và đối với Value, nhập \u0026ldquo;true\u0026rdquo;. Giữ nguyên tất cả các trường khác.\nỞ cuối trang, nhấp vào Create rule. Tiếp theo, bạn cần thiết lập một EventBridge Rule để xác định những findings nào được điều tra dựa trên trường do người dùng xác định. Bạn có thể sử dụng một quy tắc duy nhất trong Amazon EventBridge. Trong trường hợp này, EventBridge Rule sẽ tìm kiếm Security Hub Findings - Imported. Mỗi sự kiện Security Hub Findings - Imported chứa một finding duy nhất. Tuy nhiên, bạn chỉ muốn khớp với các findings có chứa trường do người dùng xác định, \u0026ldquo;investigate\u0026rdquo;. Điều hướng đến EventBridge.\nNhấp vào Create rule dưới phần Get started (với EventBridge Rule được chọn).\nTrên trang Define rule detail, đặt tên và mô tả cho quy tắc của bạn. Đối với Name, nhập \u0026ldquo;AutomatedInvestigation\u0026rdquo;. Sau đó nhấp vào Next. Ở bước Build event pattern, cuộn xuống Event pattern. Chọn phương pháp Custom pattern (JSON editor). Sao chép và dán JSON sau vào trường Event pattern.\n{\r\u0026#34;source\u0026#34;: [\u0026#34;aws.securityhub\u0026#34;],\r\u0026#34;detail\u0026#34;: {\r\u0026#34;findings\u0026#34;: {\r\u0026#34;UserDefinedFields\u0026#34;: {\r\u0026#34;investigate\u0026#34;: [\u0026#34;true\u0026#34;]\r}\r}\r}\r} Nhấp vào Next. Ở bước Select target(s), chọn Lambda function từ danh sách thả xuống Select a target. Sau đó chọn InvestigateWithDetective từ danh sách thả xuống Function.\nNhấp vào Next. Ở bước Configure tags, nhấp vào Next.\nỞ bước Review and create, nhấp vào Create rule. Khi các findings mới được tổng hợp trong Security Hub, chúng sẽ được đánh giá và cập nhật bởi quy tắc tự động hóa. Bất kỳ findings nào nhận được trường do người dùng xác định sẽ kích hoạt Lambda function. Sau khi khởi tạo Lambda, quá trình thực thi có thể mất vài phút để hoàn thành và xuất hiện trong Security Hub. Lưu ý cho Người Tham Gia: Có thể mất một khoảng thời gian trước khi một finding được cập nhật hoặc tạo mới, điều này sẽ kích hoạt tự động hóa này. Tiếp tục theo hướng dẫn và thực hiện các bước tiếp theo. Trong phần tiếp theo, bạn sẽ thiết lập quy trình khởi tạo cuộc điều tra và làm giàu finding theo yêu cầu.\nSet up on-demand finding investigation and enrichment Phương pháp thứ hai liên quan đến việc điều tra và làm giàu findings theo yêu cầu. Bạn có thể muốn sử dụng cả hai phương pháp trong trường hợp có những findings không đáp ứng tiêu chí của quy tắc tự động hóa trước đó mà bạn vẫn muốn điều tra.\nTrong phương pháp này, bạn sẽ khởi tạo cùng một Lambda function thông qua việc sử dụng tính năng Custom Actions trong Security Hub. Mở Security Hub và truy cập trang Custom actions.\nNhấp vào Create custom action.\nĐối với Action name, nhập \u0026ldquo;Investigate\u0026rdquo;. Đối với Action Description, nhập \u0026ldquo;Investigate with Detective\u0026rdquo;. Đối với Action ID, nhập \u0026ldquo;investigate\u0026rdquo;.\nNhấp vào Create custom action. Sao chép Custom action ARN đã được tạo cho finding tùy chỉnh của bạn. Bạn sẽ cần nó trong một vài bước tiếp theo.\nTiếp theo, bạn cần tạo một quy tắc khác trong EventBridge, nhưng lần này nó sẽ khớp với các sự kiện cho custom action của bạn. Điều hướng đến EventBridge.\nNhấp vào Create rule dưới phần Get started (với EventBridge Rule đã được chọn).\nTrên trang Define rule detail, đặt tên và mô tả cho quy tắc của bạn. Đối với Name, nhập \u0026ldquo;InitiatedAutomatedInvestigation\u0026rdquo;. Sau đó nhấp vào Next. Ở bước Build event pattern, cuộn xuống Event Pattern. Để Event source được đặt là AWS Services. Cuộn xuống Event pattern. Dưới Event source, chọn Security Hub.\nĐối với Event Type, chọn Security Hub Findings – Custom Action.\nSau đó chọn nút radio Specific custom action ARN(s) và nhập ARN cho custom action mà bạn đã tạo trước đó.\nNhấp vào Next. Ở bước Select target(s), chọn Lambda function từ danh sách thả xuống Select a target. Sau đó chọn InvestigateWithDetective từ danh sách thả xuống Function.\nNhấp vào Next. Ở bước Configure tags, nhấp vào Next.\nỞ bước Review and create, nhấp vào Create rule. Initiate an on-demand finding investigation Quay lại Security Hub. Mở trang Findings.\nTrong ô Add filter input, thêm một bộ lọc cho Resource Type. Đặt bộ lọc thành Resource Type is AwsIamAccessKey (phân biệt chữ hoa chữ thường). Nhấp vào Apply.\nTrong ô Add filter input, thêm một bộ lọc cho Product Name. Đặt bộ lọc thành Product Name is GuardDuty (phân biệt chữ hoa chữ thường). Nhấp vào Apply. Nhấp vào tiêu đề của một finding trong danh sách và kiểm tra xem có bất kỳ Notes nào không. Nếu có, hãy mở rộng phần đó và xem nội dung của notes (nếu có, bạn có thể xác định note đến từ đâu không?). Lưu ý: Đừng chọn finding liên quan đến RegisterManagedInstance. Nhấp vào hộp kiểm bên trái của finding này để chọn nó.\nTrong menu thả xuống Actions, chọn custom action mới của bạn (Investigate). Chọn một finding khác để điều tra: Sau 3 phút: Quá trình điều tra có thể mất tới 15 phút để hoàn thành. Làm mới trang sau mỗi vài phút cho đến khi finding có một phần Notes mới trong chi tiết. Nhấp vào tiêu đề của finding đó và mở rộng phần Notes. Chờ sau 5 phút để thấy cập nhật node: Bạn cũng có thể chuyển sang tab History trong chi tiết finding để xem sự kiện được đánh dấu thời gian với thay đổi Note.\nSurface investigated findings in a custom insight Nếu bạn muốn dễ dàng theo dõi tài nguyên và findings đã được điều tra thông qua bất kỳ phương pháp nào mà bạn đã triển khai, hãy tạo một custom insight mới trong Security Hub. Mở Security Hub và truy cập trang Insights.\nNhấp vào Create insight.\nNhấp vào trường ghi \u0026ldquo;Add filter\u0026rdquo; ở đầu trang và chọn User defined fields.\nĐặt Key là investigate và Value là complete. Điều này sẽ lọc danh sách findings chỉ bao gồm những findings đã được làm giàu thành công. Nhấp vào Apply. Kết quả: Nhấp vào trường ghi \u0026ldquo;Add filter\u0026rdquo; ở đầu trang một lần nữa và chọn GroupBy. Sau đó chọn Resource ID. Nhấp vào Apply. Insight hiện đang hiển thị danh sách các tài nguyên và số lượng findings đang hoạt động, liên quan đến tài nguyên đó đã được điều tra và làm giàu. Nhấp vào Create insight. Đặt tên cho insight của bạn là \u0026ldquo;Investigated Resources\u0026rdquo; và nhấp vào Create insight một lần nữa. Ở đầu trang, nhấp vào Insight details để xem các biểu đồ cho insight mới. "
},
{
	"uri": "//localhost:1313/vi/2-introduction-to-threat-detection-and-response-services/2.1-aws-security-hub/2.1.5-security-hub-notifications/",
	"title": "Security Hub - Thông báo",
	"tags": [],
	"description": "",
	"content": "Cấu hình SNS topic Truy cập Amazon SNS. https://console.aws.amazon.com/sns/v3/home 2. Chọn Topics trong thanh điều hướng bên trái. Chọn Create topic. Chọn loại Standard. Đối với tên, nhập \u0026ldquo;security-hub-findings\u0026rdquo;. Để mọi thứ mặc định và chọn Create topic ở cuối trang. Điều này sẽ tạo topic. Đăng ký topic Từ trang security-hub-findings topic, chọn Create subscription. Trong trang Create subscription, dưới mục Protocol, chọn email. Trong trang Create subscription, dưới mục Endpoint, nhập địa chỉ email mà bạn muốn sử dụng cho workshop này để nhận thông báo. Bạn có thể hủy đăng ký vào cuối workshop.\nChọn Create subscription. Kiểm tra email bạn đã nhập. Trong vòng vài phút, bạn sẽ nhận được một email đến email đó. Xác nhận đăng ký bằng cách chọn \u0026ldquo;Confirm subscription\u0026rdquo; trong email. Nó sẽ mở ra một trang web xác nhận. Tạo EventBridge Rule để gửi các phát hiện đến topic Bây giờ bạn đã đăng ký SNS topic, bạn đã sẵn sàng để gửi các phát hiện đến đó. Tạo một EventBridge rule để lắng nghe các sự kiện từ Security Hub. Điều hướng đến Amazon EventBridge. https://console.aws.amazon.com/events/home Chọn Create rule ở bên phải \u0026ldquo;EventBridge Rule\u0026rdquo; được chọn. Trên trang Define rule detail, đặt tên cho rule là \u0026ldquo;security-hub-findings\u0026rdquo;. Chọn Next. Trên trang Build event pattern, cuộn xuống phần Event pattern, chọn Edit pattern ở góc dưới bên phải.\nThêm mẫu sự kiện (JSON) sau đây. Mẫu này sẽ xác định các sự kiện cho các phát hiện của Security Hub được gắn nhãn mức độ nghiêm trọng CRITICAL.\n{ \u0026#34;source\u0026#34;: [ \u0026#34;aws.securityhub\u0026#34; ], \u0026#34;detail-type\u0026#34;: [ \u0026#34;Security Hub Findings - Imported\u0026#34; ], \u0026#34;detail\u0026#34;: { \u0026#34;findings\u0026#34;: { \u0026#34;ProductName\u0026#34;: [ \u0026#34;Security Hub\u0026#34; ], \u0026#34;Severity\u0026#34;: { \u0026#34;Label\u0026#34;: [ \u0026#34;CRITICAL\u0026#34; ] } } } } Chọn Next. Trong trang Select target(s), từ menu thả xuống Select a target, chọn SNS topic. Sau đó, từ menu thả xuống Topic, chọn security-hub-findings. Chọn Next.\nTrong trang Configure tags - optional, chọn Next.\nTrong trang Review and create, chọn Create rule. Theo dõi email của bạn trong suốt phần còn lại của workshop. Xem rule đã được tạo: "
},
{
	"uri": "//localhost:1313/vi/5/",
	"title": "Tự động hóa thông báo và ứng phó",
	"tags": [],
	"description": "",
	"content": "Nội dung: 5.1 Thiết lập thông báo\n5.2 Thiết lập email tổng kết lỗ hổng hàng tuần\n5.3 Ứng phó bảo mật tự động trên AWS\n5.4 Xây dựng ứng phó tự động của riêng bạn\n5.5 Làm giàu kết quả bảo mật với dữ liệu điều tra\n"
},
{
	"uri": "//localhost:1313/vi/6/6.5/",
	"title": "Ứng phó với mã độc trên Amazon Elastic Block Store",
	"tags": [],
	"description": "",
	"content": "\rTình huống / Báo cáo vấn đề: Bạn được giao nhiệm vụ xác định (và điều tra) xem GuardDuty có phát hiện mã độc trên các ổ Amazon Elastic Block Store (Amazon EBS) được gắn vào các Amazon Elastic Compute Cloud (Amazon EC2) instance và khối công việc container hay không.\nTrước khi bắt đầu, hãy xác nhận rằng Malware Protection đã được thiết lập trong tài khoản của bạn. Điều hướng đến bảng điều khiển GuardDuty và mở trang Malware Protection.\nXác nhận rằng \u0026ldquo;GuardDuty-initiated malware scan is enabled\u0026rdquo;. Malware Protection giúp bạn phát hiện sự hiện diện tiềm ẩn của mã độc bằng cách quét các ổ Amazon Elastic Block Store (Amazon EBS) được gắn vào các Amazon Elastic Compute Cloud (Amazon EC2) instance và khối công việc container.\nGuardDuty cung cấp cho bạn tùy chọn giữ lại các snapshot của các ổ EBS trong tài khoản AWS của bạn khi phát hiện mã độc. Theo mặc định, cài đặt giữ lại các snapshot sẽ bị tắt. Snapshot sẽ chỉ được giữ lại nếu bạn đã bật cài đặt này trước khi quá trình quét bắt đầu. Nếu bạn bật cài đặt giữ lại snapshot cho tài khoản của mình, khi mã độc được tìm thấy và snapshots được giữ lại, bạn sẽ phải chịu chi phí sử dụng cho snapshot. Chuyển sang \u0026ldquo;Retain scanned snapshots when malware is detected\u0026rdquo; trong General settings.\nĐiều tra mã độc được GuardDuty phát hiện Malware Protection cung cấp hai loại quét để phát hiện hoạt động có khả năng độc hại trong các Amazon EC2 instance và khối công việc container của bạn – Quét mã độc do GuardDuty khởi xướng và Quét mã độc theo yêu cầu. Quét mã độc do GuardDuty khởi xướng được kích hoạt khi GuardDuty phát hiện hành vi đáng ngờ cho thấy mã độc trên Amazon EC2 instance hoặc khối công việc container. Xem lại các phát hiện kích hoạt quét mã độc do GuardDuty khởi xướng để tìm hiểu về các phát hiện của GuardDuty có thể khởi động quá trình quét mã độc. Những phát hiện này được gọi là phát hiện kích hoạt trong workshop này. Một phát hiện Malware Protection mới được tạo cho mỗi lần quét phát hiện mã độc.\nMở trang Findings trong GuardDuty.\nTrong trường Add filter criteria chọn Finding Type và nhập \u0026ldquo;Execution:EC2/MaliciousFile\u0026rdquo;. Nhấp vào Apply. Kết quả: Nhấp vào một trong các phát hiện phù hợp để xem chi tiết. Dành vài phút để xem lại phát hiện và xác định EC2 instance bị ảnh hưởng, đường dẫn tệp mã độc và tên tệp cũng như các thông tin khác về phát hiện\nInstance bị ảnh hưởng: i-0c79413d9f0d9941e\nĐường dẫn tệp mã độc /eicar.com\nTên tệp mã độc: eicar.com\nNếu bạn cập nhật bộ lọc Loại phát hiện thành \u0026ldquo;Execution:ECS/MaliciousFile\u0026rdquo;, bạn sẽ thấy các phát hiện mã độc cho container.\nNhấp vào liên kết \u0026ldquo;Scan ID\u0026rdquo; từ chi tiết phát hiện để xem thêm chi tiết về quá trình quét. Liên kết sẽ đưa bạn đến trang quét mã độc. Nhấp lại vào scan ID. Tại đây, bạn sẽ thấy các chi tiết bổ sung như kích thước ổ được quét, ổ bị nhiễm và thời gian chạy quá trình quét. Bạn cũng sẽ thấy ID phát hiện của phát hiện kích hoạt đã kích hoạt quá trình quét. Xem phát hiện:\n{\r\u0026#34;DetectorId\u0026#34;: \u0026#34;c8c860de84297606e66fe1417c3ba44a\u0026#34;,\r\u0026#34;AdminDetectorId\u0026#34;: \u0026#34;c8c860de84297606e66fe1417c3ba44a\u0026#34;,\r\u0026#34;ScanId\u0026#34;: \u0026#34;4b879e92a6a795433e66f10c577ef4e6\u0026#34;,\r\u0026#34;ScanStatus\u0026#34;: \u0026#34;COMPLETED\u0026#34;,\r\u0026#34;ScanStartTime\u0026#34;: \u0026#34;2024-07-17T17:50:12.000Z\u0026#34;,\r\u0026#34;ScanEndTime\u0026#34;: \u0026#34;2024-07-17T18:02:01.000Z\u0026#34;,\r\u0026#34;TriggerDetails\u0026#34;: {\r\u0026#34;GuardDutyFindingId\u0026#34;: \u0026#34;72c860e606f07b17804e7bf1b92dd4e4\u0026#34;\r},\r\u0026#34;ResourceDetails\u0026#34;: {\r\u0026#34;InstanceArn\u0026#34;: \u0026#34;arn:aws:ec2:us-east-1:486547846362:instance/i-0c79413d9f0d9941e\u0026#34;\r},\r\u0026#34;ScanResultDetails\u0026#34;: {\r\u0026#34;ScanResult\u0026#34;: \u0026#34;INFECTED\u0026#34;\r},\r\u0026#34;AccountId\u0026#34;: \u0026#34;486547846362\u0026#34;,\r\u0026#34;TotalBytes\u0026#34;: 2619136718,\r\u0026#34;FileCount\u0026#34;: 50898,\r\u0026#34;AttachedVolumes\u0026#34;: [\r{\r\u0026#34;VolumeArn\u0026#34;: \u0026#34;arn:aws:ec2:us-east-1:486547846362:volume/vol-0179bcf64ae7ccba7\u0026#34;,\r\u0026#34;VolumeType\u0026#34;: \u0026#34;gp3\u0026#34;,\r\u0026#34;DeviceName\u0026#34;: \u0026#34;/dev/xvda\u0026#34;,\r\u0026#34;VolumeSizeInGB\u0026#34;: 8,\r\u0026#34;EncryptionType\u0026#34;: \u0026#34;UNENCRYPTED\u0026#34;,\r\u0026#34;SnapshotArn\u0026#34;: \u0026#34;arn:aws:ec2:us-east-1:486547846362:snapshot/snap-0c07cebc08b3eae39\u0026#34;\r}\r],\r\u0026#34;ScanType\u0026#34;: \u0026#34;GUARDDUTY_INITIATED\u0026#34;\r} Các giá trị có thể có cho trạng thái quét là Completed, Running, Skipped, và Failed. Sau khi quá trình quét hoàn tất, Kết quả quét được điền cho các lần quét có Trạng thái là Completed. Các giá trị có thể có cho Kết quả quét là Clean và Infected. Sử dụng Scan type, bạn có thể xác định liệu quá trình quét mã độc do GuardDuty khởi xướng hay theo yêu cầu.\nChọn liên kết bên cạnh ID phát hiện. Điều này sẽ đưa bạn đến một trang mới chỉ hiển thị phát hiện kích hoạt. Sau đó, chọn phát hiện và khám phá chi tiết về phát hiện kích hoạt. Phát hiện kích hoạt cũng có một phần tiêu đề Quét mã độc liệt kê các chi tiết về quá trình quét. Đối với mỗi Amazon EC2 instance và khối công việc container mà GuardDuty tạo ra các phát hiện, quá trình quét mã độc do GuardDuty khởi xướng tự động được kích hoạt mỗi 24 giờ. Nếu nhiều phát hiện kích hoạt được tạo trong khoảng thời gian 24 giờ đối với một EC2 instance, chỉ phát hiện kích hoạt đầu tiên mới khởi động quá trình quét.\nNếu đây là EC2 instance duy nhất bị xâm nhập, bạn có thể tiến hành điều tra và cô lập instance theo một kịch bản phản ứng sự cố (điều này nằm ngoài phạm vi của mô-đun này). Nếu bạn đã bật cài đặt giữ lại snapshot cho các ổ EBS, các snapshot này sẽ được giữ lại trong tài khoản của bạn chỉ khi mã độc được tìm thấy, bạn có thể sử dụng các snapshot này để điều tra thêm. [Tùy chọn] Khởi động quét mã độc theo yêu cầu Nếu bạn muốn phát hiện sự hiện diện của mã độc trong các instance Amazon EC2 theo yêu cầu, bạn có thể khởi động quá trình quét mã độc theo yêu cầu bằng cách cung cấp Amazon Resource Name (ARN) của Amazon EC2 instance mà bạn muốn quét. Bạn cũng có thể chạy quét mã độc theo yêu cầu sau khi đã xử lý các tệp do GuardDuty xác định là một phần của phát hiện mã độc trước đó và muốn xác minh tệp đó không còn tồn tại.\nTừ trang Findings, mở một trong các phát hiện Execution:EC2/MaliciousFile để xem lại chi tiết.\nBạn cần Amazon Resource Name (ARN) của instance EC2 để khởi động quá trình quét mã độc theo yêu cầu. ARN có dạng \u0026ldquo;arn:aws:ec2:{region}:{account ID}:instance/{instance ID}\u0026rdquo;. Hãy xây dựng ARN bằng thông tin từ phát hiện. ID tài nguyên của bạn sẽ có dạng \u0026ldquo;arn:aws:ec2:us-east-1:012345678901:instance/i-123456xxyyzzaaabb2\u0026rdquo;\nMở trang Malware scans từ thanh điều hướng bên trái.\nNhấp vào nút Start new on-demand scan.\nNhập ARN của instance EC2, sau đó nhấp vào Confirm. Bây giờ làm mới trang, bạn sẽ thấy một ID quét mới với loại quét là ‘On demand’ với trạng thái quét là ‘Running’.\n"
},
{
	"uri": "//localhost:1313/vi/6/6.6/",
	"title": "Ứng phó với mã độc trên Amazon Elastic Block Store",
	"tags": [],
	"description": "",
	"content": "\rTình huống / Báo cáo vấn đề: Trong mô-đun trước, \u0026ldquo;Building your own automated response\u0026rdquo;, bạn đã khám phá các phương pháp phản hồi tự động. Mô-đun này liên quan, nhưng thay vì tập trung vào phản hồi tự động, nhiệm vụ của bạn là điều tra một instance EC2 có thể bị xâm nhập liên quan đến một phát hiện UnauthorizedAccess:IAMUser/MaliciousIPCaller.Custom\u0026quot; từ GuardDuty. Để thực hiện điều này, bạn sẽ sử dụng Amazon Detective.\nMở Amazon GuardDuty và chọn phát hiện có tiêu đề UnauthorizedAccess:IAMUser/MaliciousIPCaller.Custom to open the finding details. Ở đầu bảng tổng quan, nhấp vào liên kết có nhãn Investigate with Detective.\nTrong cửa sổ Investigate with Detective xuất hiện, chọn EC2 Instance để điều tra EC2 instance bị xâm phạm. Bây giờ, bạn sẽ ở trên trang thông tin entity của EC2 instance trong bảng điều khiển của Detective với chi tiết phát hiện UnauthorizedAccess:IAMUser/MaliciousIPCaller.Custom ở phía bên phải của màn hình. Tiến hành trả lời một số câu hỏi để đẩy nhanh quá trình điều tra nguyên nhân cốt lõi của bạn.\nLưu ý rằng phạm vi thời gian ở đầu trang được thiết lập từ khi sự kiện được phát hiện lần đầu tiên đến thời gian sự kiện được GuardDuty ghi nhận lần cuối. Điều này quan trọng vì phạm vi thời gian xác định tập dữ liệu mà Detective trả về cho bạn. Xem thông tin được hiển thị ở phần trên cùng, chi tiết EC2 instance. AWS account, EC2 instance, Role, Associated VPC và các thông tin khác được liệt kê. Bạn có thể tùy chọn nhấp vào các liên kết để tìm hiểu thêm về các entity được liên kết. Ví dụ, bạn có thể theo dõi role được liên kết để hiểu quyền hạn của role được sử dụng bởi EC2 instance hoặc để xem liệu có các phát hiện khác liên quan đến role này không.\nNếu bạn quan tâm đến việc khám phá thêm thông tin được trình bày trên trang này, bạn nên hoàn thành mô-đun có tiêu đề: Respond to compromised IAM credentials.\nCuộn xuống. Xem phần \u0026ldquo;Findings associated with this resource\u0026rdquo;. Xem xét các phát hiện theo thứ tự mà chúng đã được quan sát. Xem xét Overall VPC flow volume. Nhấp vào mức tăng đột biến trong lưu lượng Inbound và sau đó nhấp vào Set time interval. Xem lại Activity for time window. Điều này sẽ hiển thị dữ liệu lưu lượng VPC vào và ra khỏi instance EC2. Activity for time window sẽ tự động điều chỉnh thời gian theo phạm vi thời gian của cột và liệt kê địa chỉ IP, cổng, khối lượng lưu lượng vào và ra, giao thức và ghi chú xem lưu lượng đã được chấp nhận hay bị từ chối. Bạn cũng có thể kiểm tra \u0026ldquo;Distinct count of ports over time\u0026rdquo;, \u0026ldquo;Distinct IP addresses over time\u0026rdquo;, và \u0026ldquo;Observed IP address assignments based on VPC Flow\u0026rdquo;. Cuộn lên đầu trang entity của EC2 instance và chọn tab New behavior. Trong tab này, Detective phát triển một hình ảnh về hoạt động nào là bình thường trong tổ chức của bạn và hoạt động nào là bất thường. Cuộn qua các bảng khác nhau để xác định thông tin bạn có thể thu thập liên quan đến việc điều tra vấn đề bảo mật. Kiểm tra một IP: Thiết lập khoảng thời gian để giám sát: Thông tin chi tiết hơn: Tìm kiếm địa chỉ IP của tác nhân Trong chi tiết phát hiện của GuardDuty ở bên trái, ghi lại địa chỉ IPv4 được liệt kê dưới phần Actor. Mở trang Search từ bảng điều hướng ở phía bên phải.\nNhấp vào menu thả xuống Choose type và chọn IP address.\nNhập địa chỉ IP mà bạn đã ghi lại từ chi tiết phát hiện của GuardDuty. Nhấp vào Search. Chọn liên kết địa chỉ IP để điều hướng đến trang entity của địa chỉ IP đó. Giống như các bước trước, hãy dành thời gian để xem xét thông tin về địa chỉ IP. Tìm kiếm trên trang:\nĐược quan sát lần đầu: 00:17 UTC Tổng số lần quan sát: Lần quan sát cuối – lần quan sát đầu\nLần quan sát cuối là 18:42 UTC nên tổng thời gian là 25 Nhưng khác với tổng quan Phát hiện liên quan đến tài nguyên này Tổng số lượng lệnh gọi API Ngoài ra, hãy khám phá các tab, New behavior, Resource interaction, và Kubernetes activity. Tương tác tài nguyên: Hành vi mới: 18. Trong tình huống này, bạn đã sử dụng Amazon Detective để tìm thông tin hỗ trợ điều tra vấn đề bảo mật với dữ liệu hạn chế. Trong môi trường sản xuất với nhiều dữ liệu hơn, bạn sẽ có thể sử dụng Detective hiệu quả hơn cho các hoạt động như hoạt động mới được quan sát, tương tác tài nguyên, và cơ sở đường truyền lưu lượng. Bây giờ bạn đã sử dụng Amazon Detective để thu thập thêm thông tin về mức độ của vấn đề bảo mật, bạn sẽ hiểu rõ hơn về các tài nguyên khác cần được khắc phục, quyền hạn cần được giảm bớt, và thông tin phân tích nguyên nhân cốt lõi để bao gồm trong báo cáo sau sự kiện.\n"
},
{
	"uri": "//localhost:1313/vi/3/3.5/",
	"title": "Xây dựng riêng giải pháp tích hợp Security Hub",
	"tags": [],
	"description": "",
	"content": "Trong mô-đun này, bạn sẽ xây dựng một giải pháp tùy chỉnh để gửi các phát hiện từ Security Hub đến một kênh Slack. Để thực hiện điều này, bạn sẽ thiết lập một hành động tùy chỉnh để gửi chi tiết của một phát hiện từ Security Hub đến một hàm Lambda (qua EventBridge) mà sẽ định dạng tin nhắn và sau đó gửi vào kênh cảnh báo bảo mật Slack. Khi thiết lập hoàn tất, các phát hiện sẽ chảy từ trái sang phải trong sơ đồ dưới đây.\nThiết lập không gian làm việc Slack Để phục vụ cho workshop này, chúng tôi khuyến nghị bạn thiết lập một không gian làm việc Slack tạm thời mới. Sử dụng liên kết sau để tạo một không gian làm việc Slack mới: https://get.slack.help/hc/en-us/articles/206845317-Create-a-Slack-workspace 2. Khi bạn đã hoàn tất việc tạo không gian làm việc Slack, hãy tạo một kênh mới có tên là \u0026ldquo;security-hub-alerts\u0026rdquo;. Đây là nơi chúng tôi sẽ gửi thông báo từ Security Hub bằng cách sử dụng tích hợp tùy chỉnh. Trong ví dụ này, hãy đặt tính khả dụng của kênh thành public. Thiết lập ứng dụng Slack cho tích hợp Truy cập trang Slack API, https://api.slack.com. 4. Ở đầu trang, chọn Your apps. Sau đó chọn Create an App.\n5. Trong cửa sổ Create an app, chọn From scratch.\nNhập tên ứng dụng là \u0026ldquo;security-hub-to-slack\u0026rdquo;. Đối với Pick a workspace to develop your app in, chọn không gian làm việc bạn vừa tạo.\nChọn Create App. Mở Incoming Webhooks. Trên trang Activate Incoming Webhooks bật công tắc lên ON.\nSau đó ở cuối trang, chọn Add New Webhook to Workspace. Trên trang hỏi \u0026ldquo;Where should security-hub-alerts post?\u0026rdquo; chọn #security-hub-alerts. Chọn Allow.\nQuay lại trang Incoming Webhooks, sao chép Webhook URL bạn vừa tạo. Bạn sẽ cần cái này sau.\nTạo Custom Action trong Security Hub Slack đã được thiết lập. Bây giờ bạn cần cấu hình Security Hub custom action, EventBridge rule, và Lambda function để đẩy các phát hiện đến ứng dụng Slack của bạn (qua webhook).\nTrở lại Security Hub. https://console.aws.amazon.com/securityhub/\nMở trang Custom actions từ thanh điều hướng bên trái dưới Management.\nChọn Create custom action.\n16. Đối với Action name, nhập \u0026ldquo;Send to Slack\u0026rdquo;. Đối với Description, nhập \u0026ldquo;Custom action to send findings to Slack.\u0026rdquo; Đối với Custom action ID, nhập \u0026ldquo;SendToSlack\u0026rdquo;.\nSao chép Custom action ARN mà bạn vừa tạo cho Send to Slack. Bạn sẽ cần cái này sau. Tạo the EventBridge Rule Kết quả: 18. Điều hướng đến Amazon EventBridge.\nChọn Create rule ở bên phải.\nTrong trang Define rule detail đặt tên cho rule của bạn và mô tả nó để thể hiện mục đích của rule (ví dụ, tên và mô tả giống như bạn đã dùng cho hành động tùy chỉnh). Sau đó chọn Next.\nTất cả các phát hiện của Security Hub được gửi dưới dạng sự kiện đến bus sự kiện mặc định của AWS. Phần định nghĩa mẫu cho phép bạn xác định các bộ lọc để thực hiện hành động cụ thể khi các sự kiện phù hợp xuất hiện. Trong bước Build event pattern giữ Event source được đặt là AWS events or EventBridge partner events.\nCuộn xuống phần Event pattern. Dưới Event source, giữ nó được đặt là AWS Services, và dưới AWS Service, chọn Security Hub.\nĐối với Event Type, chọn Security Hub Findings – Custom Action.\nSau đó chọn nút radio Specific custom action ARN(s) và nhập ARN cho hành động tùy chỉnh mà bạn vừa tạo.\nChọn Next.\nTrong bước Select target(s), chọn Lambda function từ danh sách Select a target. Sau đó chọn security-hub-to-slack từ danh sách Function. Lambda function, security-hub-to-slack, đã được tạo bằng CloudFormation trước khi bắt đầu lab. Nếu bạn muốn xem code, bạn có thể thấy nó trong bảng điều khiển Lambda. Chọn Next. 28. Trong bước Configure tags, chọn Next.\nTrong bước Review and create, chọn Create rule. Tùy chỉnh Lambda function để gửi tin nhắn đến kênh Slack của bạn Điều hướng đến bảng điều khiển Lambda và mở trang Functions. Mở security-hub-to-slack function bằng cách chọn tên của nó.\nTrong trang function, mở tab Configuration và sau đó chọn Environment variables.\nChọn nút Edit. Đặt slackChannel là \u0026ldquo;security-hub-alerts\u0026rdquo;. Đặt webHookUrl thành webhook bạn đã sao chép trước đó trong mô-đun này. Chọn Save. Kiểm tra Tích hợp Tại thời điểm này, mọi thứ đã được thiết lập. Hãy kiểm tra tích hợp!\nTruy cập Security Hub và mở trang Findings. https://console.aws.amazon.com/securityhub\nĐánh dấu vào ô bên cạnh một phát hiện.\nDưới menu Actions, chọn Send to Slack. Kết quả: Quay lại Slack và mở kênh bạn đã tạo, #security-hub-alerts. Bạn nên thấy một tin nhắn mới. Xem kênh “security-hub-alerts” có tin tức\nChọn kênh đó để xem: Tự động hóa tin nhắn Slack Vấn đề:: Quản lý của bạn lo ngại về khả năng mở rộng của phương pháp bạn thực hiện vì nó yêu cầu bạn phải chọn thủ công các phát hiện để gửi đến Slack. Bạn đã được chỉ đạo tự động hóa điều này để các phát hiện có nhãn mức độ MEDIUM hoặc HIGH được tự động gửi đến Slack thông qua tích hợp. Bạn có thể tìm ra những thay đổi nào cần thực hiện để đạt được mục tiêu này không?\nGợi ý: 6. Chọn Specific Severity label(s) và trong menu thả xuống, chọn MEDIUM và HIGH. Tiếp tục thực hiện các bước như trước. Chọn Next.\nTrong bước Select target(s), chọn Lambda function từ danh sách Select a target. Sau đó chọn security-hub-to-slack từ danh sách Function. Chọn Next.\nTrong bước Configure tags, chọn Next.\nTrong bước Review and create, chọn Create rule. "
},
{
	"uri": "//localhost:1313/vi/2-introduction-to-threat-detection-and-response-services/2.4-amazon-detective/2.4.6-detective-pricing/",
	"title": "Detective - Chi phí",
	"tags": [],
	"description": "",
	"content": "Security Hub - Chi phí Bảng điều khiển GuardDuty hiển thị số ngày còn lại trong thời gian dùng thử miễn phí cũng như chi phí trung bình hàng ngày (dựa trên khối lượng dữ liệu được phân tích và quét), giúp loại bỏ sự phỏng đoán trong việc lập kế hoạch ngân sách.\nTừ Detective, mở trang Usage từ thanh điều hướng bên trái dưới mục Settings. Xem lại mức sử dụng hiện tại và ước tính chi phí. Các ước tính hiển thị trong bảng điều khiển GuardDuty có thể khác biệt nhẹ so với những ước tính trong bảng điều khiển AWS Billing and Cost Management của bạn. Để biết thêm thông tin, hãy xem https://docs.aws.amazon.com/guardduty/latest/ug/monitoring_costs.html.\n"
},
{
	"uri": "//localhost:1313/vi/2-introduction-to-threat-detection-and-response-services/2.2-amazon-guardduty/2.2.6-guradduty-pricing/",
	"title": "GuradDuty - Chi phí",
	"tags": [],
	"description": "",
	"content": "Security Hub - Chi phí Bảng điều khiển GuardDuty cho biết số ngày còn lại trong giai đoạn dùng thử miễn phí cũng như chi phí hàng ngày trung bình (dựa trên khối lượng dữ liệu được phân tích và quét), giúp bạn lập kế hoạch ngân sách dễ dàng hơn.\nTừ GuardDuty, mở trang Usage từ menu điều hướng bên trái dưới phần Settings. Xem xét việc sử dụng giai đoạn dùng thử hiện tại và chi phí ước tính. Các ước tính hiển thị trong bảng điều khiển GuardDuty có thể khác một chút so với những gì trong bảng điều khiển AWS Billing and Cost Management của bạn. Để biết thêm thông tin, xem https://docs.aws.amazon.com/guardduty/latest/ug/monitoring_costs.html.\n"
},
{
	"uri": "//localhost:1313/vi/2-introduction-to-threat-detection-and-response-services/2.3-amazon-inspector/2.3.6-inspector-pricing/",
	"title": "Inspector - Chi phí",
	"tags": [],
	"description": "",
	"content": "Inspector - Chi phí Bạn có thể xem lại chi phí ước tính trong bảng điều khiển Amazon Inspector, bao gồm chi phí tổ chức tổng hợp trong tài khoản quản trị viên trung tâm của Amazon Inspector. Bằng cách này, bạn có thể hiểu và ước tính chi phí sử dụng Amazon Inspector để quét lỗ hổng bảo mật tự động và liên tục trên EC2, Amazon ECR, và các Lambda function cho toàn bộ tổ chức của bạn trước khi chuyển sang sử dụng có tính phí.\nTừ Inspector, mở trang Usage từ thanh điều hướng bên trái dưới mục General Settings.\nXem lại chi phí dự kiến ​​của bạn. Chi phí dự kiến ​​dựa trên việc sử dụng tài khoản trong 30 ngày qua. Nếu tài khoản đã hoạt động với Inspector dưới 30 ngày, chúng tôi sẽ ngoại suy chi phí trong 30 ngày dựa trên mức sử dụng hiện tại.\n"
},
{
	"uri": "//localhost:1313/vi/6/",
	"title": "Mô phỏng và kịch bản bảo mật",
	"tags": [],
	"description": "",
	"content": "6.1 Ứng phó đối với việc rò rỉ thông tin xác thực IAM Role\n6.2 Ứng phó với S3 Bucket bị xâm phạm\n6.3 Ứng phó khi thông tin xác thực IAM bị xâm phạm\n6.4 Ứng phó khi một hàm Lambda gọi đến IP độc hại\n6.5 Ứng phó với phần mềm độc hại trên Amazon Elastic Block Store 6.6 Ứng phó với phần mềm độc hại trên Amazon Elastic Block Store\n"
},
{
	"uri": "//localhost:1313/vi/2-introduction-to-threat-detection-and-response-services/2.4-amazon-detective/2.4.7-detective-eks-audit-logs/",
	"title": "Detective - EKS Audit Logs",
	"tags": [],
	"description": "",
	"content": "Thêm EKS audit logs như một nguồn dữ liệu tùy chọn Mở bảng điều khiển Detective. https://us-east-1.console.aws.amazon.com/detective/home?region=us-east-1#summary\nTừ bảng điều hướng dưới mục Settings, chọn General.\nChọn Edit bên cạnh Optional source packages. Đảm bảo rằng có một ô chọn bên cạnh EKS audit logs. "
},
{
	"uri": "//localhost:1313/vi/2-introduction-to-threat-detection-and-response-services/2.2-amazon-guardduty/2.2.7-guardduty-notifications/",
	"title": "GuardDuty - Thông báo",
	"tags": [],
	"description": "",
	"content": "Configure SNS topic Điều hướng đến Amazon SNS. https://console.aws.amazon.com/sns/v3/home 2. Chọn Topics ở thanh điều hướng bên trái. Chọn Create topic. Chọn Standard.\nNhập \u0026ldquo;guardduty-findings\u0026rdquo; cho tên. Để lại mọi thứ còn lại mặc định và chọn Create topic ở dưới cùng của trang. Điều này sẽ tạo ra topic. Đăng ký theo dõi topic Từ trang guardduty-findings topic, chọn Create subscription. Trong trang Create subscription, dưới Protocol, chọn email. Trong trang Create subscription, dưới Endpoint, nhập địa chỉ email mà bạn muốn sử dụng cho workshop này để nhận thông báo. Bạn có thể hủy đăng ký vào cuối workshop.\nChọn Create subscription. Kiểm tra email bạn đã nhập. Trong vài phút, bạn sẽ nhận được một email Xác nhận đăng ký bằng cách chọn \u0026ldquo;Confirm subscription\u0026rdquo; trong email. Điều này sẽ mở một trang web xác nhận. Tạo EventBridge Rule để gửi phát hiện đến topic Bây giờ bạn đã đăng ký theo dõi SNS topic, bạn sẵn sàng gửi các phát hiện đến đó. Tạo một EventBridge rule để lắng nghe các sự kiện từ Security Hub. Điều hướng đến Amazon EventBridge. https://console.aws.amazon.com/events/home Chọn nút Create rule ở bên phải với \u0026ldquo;EventBridge Rule\u0026rdquo; được chọn. Trong trang Define rule detail, đặt tên cho rule của bạn là \u0026ldquo;guardduty-findings\u0026rdquo;. Chọn Next. Trong trang Build event pattern, cuộn xuống phần Event pattern, chọn Edit pattern ở góc dưới bên phải. Thêm mẫu sự kiện sau (JSON). Mẫu này sẽ xác định các sự kiện cho các phát hiện của Security Hub được gán mức độ nghiêm trọng CRITICAL.\n{ \u0026#34;source\u0026#34;: [\u0026#34;aws.guardduty\u0026#34;], \u0026#34;detail-type\u0026#34;: [\u0026#34;GuardDuty Finding\u0026#34;], \u0026#34;detail\u0026#34;: { \u0026#34;severity\u0026#34;: [ 4, 4.0, 4.1, 4.2, 4.3, 4.4, 4.5, 4.6, 4.7, 4.8, 4.9, 5, 5.0, 5.1, 5.2, 5.3, 5.4, 5.5, 5.6, 5.7, 5.8, 5.9, 6, 6.0, 6.1, 6.2, 6.3, 6.4, 6.5, 6.6, 6.7, 6.8, 6.9, 7, 7.0, 7.1, 7.2, 7.3, 7.4, 7.5, 7.6, 7.7, 7.8, 7.9, 8, 8.0, 8.1, 8.2, 8.3, 8.4, 8.5, 8.6, 8.7, 8.8, 8.9 ] } } Chọn Next.\nTrong trang Select target(s), từ menu thả xuống Select a target, chọn SNS topic.\nSau đó, từ menu thả xuống Topic, chọn guardduty-findings. Chọn Next.\nTrong trang Configure tags - optional, chọn Next.\nTrong trang Review and create, chọn Create rule. Hãy chú ý đến email của bạn trong phần còn lại của workshop. "
},
{
	"uri": "//localhost:1313/vi/7/",
	"title": "Quản lý Lỗ hổng Phần mềm",
	"tags": [],
	"description": "",
	"content": "Nội dung: 7.1 Cập nhật bản vá cho EC2 với Patch Manager\n7.2 Quản lý lỗ hổng bảo mật cho các ứng dụng serverless\n7.3 Tích hợp Amazon Inspector vào quy trình CI/CD\n"
},
{
	"uri": "//localhost:1313/vi/8/",
	"title": "Dọn dẹp tài nguyên",
	"tags": [],
	"description": "",
	"content": "Chúng ta sẽ thực hiện các bước sau để xóa các tài nguyên đã tạo trong bài thực hành này.\nXóa giải pháp Automated Security Response Xóa aws-sharr-member.template khỏi từng tài khoản thành viên.\nXóa aws-sharr-admin.template khỏi tài khoản quản trị viên.\nXóa các IAM role có tên SO0111-*\nXóa ghi log trên CloudWatch.\nVô hiệu hóa AWS Security Hub Truy cập trang cài đặt chung của Security Hub. Nhấp vào Disable AWS Security Hub. Sẽ có một cửa sổ bật lên, nhấp vào Disable AWS Security Hub. Xóa các dịch vụ liên quan Vô hiệu hóa GuardDuty. Vô hiệu hóa Inspector. Vô hiệu hóa Detective. "
},
{
	"uri": "//localhost:1313/vi/2-introduction-to-threat-detection-and-response-services/2.2-amazon-guardduty/2.2.8-guardduty-retaining-findings/",
	"title": "GuardDuty - Giữ lại các phát hiện",
	"tags": [],
	"description": "",
	"content": "GuardDuty giữ lại các phát hiện được tạo ra trong một khoảng thời gian 90 ngày. GuardDuty xuất các phát hiện đang hoạt động đến Amazon EventBridge. Bạn có thể tùy chọn xuất các phát hiện được tạo ra đến một Amazon Simple Storage Service (Amazon S3) bucket. Điều này sẽ giúp bạn theo dõi dữ liệu lịch sử về các hoạt động đáng nghi trong tài khoản của bạn và đánh giá xem các bước khắc phục được khuyến nghị có thành công hay không.\nBất kỳ phát hiện hoạt động mới nào mà GuardDuty tạo ra đều được xuất tự động trong khoảng 5 phút sau khi phát hiện được tạo ra. Bạn có thể thiết lập tần suất cho việc cập nhật các phát hiện hoạt động được xuất đến EventBridge. Tần suất mà bạn chọn áp dụng cho việc xuất các trường hợp mới của các phát hiện hiện có đến EventBridge, S3 bucket của bạn (khi được cấu hình), và Detective (khi được tích hợp).\nKhi bạn cấu hình các thiết lập để xuất phát hiện đến một Amazon S3 bucket, GuardDuty sử dụng AWS Key Management Service (AWS KMS) để mã hóa dữ liệu phát hiện trong bucket S3 của bạn. Điều này yêu cầu bạn phải thêm quyền vào bucket S3 của bạn và khóa AWS KMS để GuardDuty có thể sử dụng chúng để xuất phát hiện trong tài khoản của bạn.\n"
},
{
	"uri": "//localhost:1313/vi/categories/",
	"title": "Categories",
	"tags": [],
	"description": "",
	"content": ""
},
{
	"uri": "//localhost:1313/vi/tags/",
	"title": "Tags",
	"tags": [],
	"description": "",
	"content": ""
}]