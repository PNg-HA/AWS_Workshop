<!DOCTYPE html>
<html lang="vi" class="js csstransforms3d">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.128.2">
    <meta name="description" content="">
<meta name="author" content="journeyoftheaverageguy@gmail.com">

    <link rel="icon" href="//localhost:1313/images/favicon.png" type="image/png">

    <title>Set up a weekly vulnerability summary email :: AWS System Manager</title>

    
    <link href="//localhost:1313/css/nucleus.css?1724017428" rel="stylesheet">
    <link href="//localhost:1313/css/fontawesome-all.min.css?1724017428" rel="stylesheet">
    <link href="//localhost:1313/css/hybrid.css?1724017428" rel="stylesheet">
    <link href="//localhost:1313/css/featherlight.min.css?1724017428" rel="stylesheet">
    <link href="//localhost:1313/css/perfect-scrollbar.min.css?1724017428" rel="stylesheet">
    <link href="//localhost:1313/css/auto-complete.css?1724017428" rel="stylesheet">
    <link href="//localhost:1313/css/atom-one-dark-reasonable.css?1724017428" rel="stylesheet">
    <link href="//localhost:1313/css/theme.css?1724017428" rel="stylesheet">
    <link href="//localhost:1313/css/hugo-theme.css?1724017428" rel="stylesheet">
    
    <link href="//localhost:1313/css/theme-workshop.css?1724017428" rel="stylesheet">
    
    

    <script src="//localhost:1313/js/jquery-3.3.1.min.js?1724017428"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="//localhost:1313/vi/5/5.2/">
    <nav id="sidebar" class="showVisitedLinks">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="//localhost:1313/">

<svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 30" width="30%"><defs><style>.cls-1{fill:#fff;}.cls-2{fill:#f90;fill-rule:evenodd;}</style></defs><title>AWS-Logo_White-Color</title><path class="cls-1" d="M14.09,10.85a4.7,4.7,0,0,0,.19,1.48,7.73,7.73,0,0,0,.54,1.19.77.77,0,0,1,.12.38.64.64,0,0,1-.32.49l-1,.7a.83.83,0,0,1-.44.15.69.69,0,0,1-.49-.23,3.8,3.8,0,0,1-.6-.77q-.25-.42-.51-1a6.14,6.14,0,0,1-4.89,2.3,4.54,4.54,0,0,1-3.32-1.19,4.27,4.27,0,0,1-1.22-3.2A4.28,4.28,0,0,1,3.61,7.75,6.06,6.06,0,0,1,7.69,6.46a12.47,12.47,0,0,1,1.76.13q.92.13,1.91.36V5.73a3.65,3.65,0,0,0-.79-2.66A3.81,3.81,0,0,0,7.86,2.3a7.71,7.71,0,0,0-1.79.22,12.78,12.78,0,0,0-1.79.57,4.55,4.55,0,0,1-.58.22l-.26,0q-.35,0-.35-.52V2a1.09,1.09,0,0,1,.12-.58,1.2,1.2,0,0,1,.47-.35A10.88,10.88,0,0,1,5.77.32,10.19,10.19,0,0,1,8.36,0a6,6,0,0,1,4.35,1.35,5.49,5.49,0,0,1,1.38,4.09ZM7.34,13.38a5.36,5.36,0,0,0,1.72-.31A3.63,3.63,0,0,0,10.63,12,2.62,2.62,0,0,0,11.19,11a5.63,5.63,0,0,0,.16-1.44v-.7a14.35,14.35,0,0,0-1.53-.28,12.37,12.37,0,0,0-1.56-.1,3.84,3.84,0,0,0-2.47.67A2.34,2.34,0,0,0,5,11a2.35,2.35,0,0,0,.61,1.76A2.4,2.4,0,0,0,7.34,13.38Zm13.35,1.8a1,1,0,0,1-.64-.16,1.3,1.3,0,0,1-.35-.65L15.81,1.51a3,3,0,0,1-.15-.67.36.36,0,0,1,.41-.41H17.7a1,1,0,0,1,.65.16,1.4,1.4,0,0,1,.33.65l2.79,11,2.59-11A1.17,1.17,0,0,1,24.39.6a1.1,1.1,0,0,1,.67-.16H26.4a1.1,1.1,0,0,1,.67.16,1.17,1.17,0,0,1,.32.65L30,12.39,32.88,1.25A1.39,1.39,0,0,1,33.22.6a1,1,0,0,1,.65-.16h1.54a.36.36,0,0,1,.41.41,1.36,1.36,0,0,1,0,.26,3.64,3.64,0,0,1-.12.41l-4,12.86a1.3,1.3,0,0,1-.35.65,1,1,0,0,1-.64.16H29.25a1,1,0,0,1-.67-.17,1.26,1.26,0,0,1-.32-.67L25.67,3.64,23.11,14.34a1.26,1.26,0,0,1-.32.67,1,1,0,0,1-.67.17Zm21.36.44a11.28,11.28,0,0,1-2.56-.29,7.44,7.44,0,0,1-1.92-.67,1,1,0,0,1-.61-.93v-.84q0-.52.38-.52a.9.9,0,0,1,.31.06l.42.17a8.77,8.77,0,0,0,1.83.58,9.78,9.78,0,0,0,2,.2,4.48,4.48,0,0,0,2.43-.55,1.76,1.76,0,0,0,.86-1.57,1.61,1.61,0,0,0-.45-1.16A4.29,4.29,0,0,0,43,9.22l-2.41-.76A5.15,5.15,0,0,1,38,6.78a3.94,3.94,0,0,1-.83-2.41,3.7,3.7,0,0,1,.45-1.85,4.47,4.47,0,0,1,1.19-1.37A5.27,5.27,0,0,1,40.51.29,7.4,7.4,0,0,1,42.6,0a8.87,8.87,0,0,1,1.12.07q.57.07,1.08.19t.95.26a4.27,4.27,0,0,1,.7.29,1.59,1.59,0,0,1,.49.41.94.94,0,0,1,.15.55v.79q0,.52-.38.52a1.76,1.76,0,0,1-.64-.2,7.74,7.74,0,0,0-3.2-.64,4.37,4.37,0,0,0-2.21.47,1.6,1.6,0,0,0-.79,1.48,1.58,1.58,0,0,0,.49,1.18,4.94,4.94,0,0,0,1.83.92L44.55,7a5.08,5.08,0,0,1,2.57,1.6A3.76,3.76,0,0,1,47.9,11a4.21,4.21,0,0,1-.44,1.93,4.4,4.4,0,0,1-1.21,1.47,5.43,5.43,0,0,1-1.85.93A8.25,8.25,0,0,1,42.05,15.62Z"></path><path class="cls-2" d="M45.19,23.81C39.72,27.85,31.78,30,25,30A36.64,36.64,0,0,1,.22,20.57c-.51-.46-.06-1.09.56-.74A49.78,49.78,0,0,0,25.53,26.4,49.23,49.23,0,0,0,44.4,22.53C45.32,22.14,46.1,23.14,45.19,23.81Z"></path><path class="cls-2" d="M47.47,21.21c-.7-.9-4.63-.42-6.39-.21-.53.06-.62-.4-.14-.74,3.13-2.2,8.27-1.57,8.86-.83s-.16,5.89-3.09,8.35c-.45.38-.88.18-.68-.32C46.69,25.8,48.17,22.11,47.47,21.21Z"></path></svg>

</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="//localhost:1313/js/lunr.min.js?1724017428"></script>
<script type="text/javascript" src="//localhost:1313/js/auto-complete.js?1724017428"></script>
<script type="text/javascript">
    
        var baseurl = "\/\/localhost:1313\/\/vi";
    
</script>
<script type="text/javascript" src="//localhost:1313/js/search.js?1724017428"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/vi/1-workshop-instructions/" title="Giới thiệu workshop" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/1-workshop-instructions/">
           <b> 1. </b> Giới thiệu workshop
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vi/2-introduction-to-threat-detection-and-response-services/" title="Giới thiệu về các dịch vụ phát hiện và ứng phó mối đe dọa " class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/2-introduction-to-threat-detection-and-response-services/">
           <b> 2. </b> Giới thiệu về các dịch vụ phát hiện và ứng phó mối đe dọa 
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/vi/2-introduction-to-threat-detection-and-response-services/2.1-aws-security-hub/" title="AWS Security Hub" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/2-introduction-to-threat-detection-and-response-services/2.1-aws-security-hub/">
           <b> 2.1 </b> AWS Security Hub
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/vi/2-introduction-to-threat-detection-and-response-services/2.1-aws-security-hub/2.1.1-security-hub-overview/" title="Security Hub - Tổng quan" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/2-introduction-to-threat-detection-and-response-services/2.1-aws-security-hub/2.1.1-security-hub-overview/">
           <b> 2.1.1 </b> Security Hub - Tổng quan
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/2-introduction-to-threat-detection-and-response-services/2.1-aws-security-hub/2.1.2-security-hub-dashboard/" title="Security Hub - Bảng điều khiển" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/2-introduction-to-threat-detection-and-response-services/2.1-aws-security-hub/2.1.2-security-hub-dashboard/">
           <b> 2.1.2 </b> Security Hub - Bảng điều khiển
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/2-introduction-to-threat-detection-and-response-services/2.1-aws-security-hub/2.1.3-security-hub-findings/" title="Security Hub - Phát hiện sai phạm" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/2-introduction-to-threat-detection-and-response-services/2.1-aws-security-hub/2.1.3-security-hub-findings/">
           <b> 2.1.3 </b> Security Hub - Phát hiện sai phạm
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/2-introduction-to-threat-detection-and-response-services/2.1-aws-security-hub/2.1.4-security-hub-pricing/" title="Security Hub - Chi phí" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/2-introduction-to-threat-detection-and-response-services/2.1-aws-security-hub/2.1.4-security-hub-pricing/">
           <b> 2.1.4 </b> Security Hub - Chi phí
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/2-introduction-to-threat-detection-and-response-services/2.1-aws-security-hub/2.1.5-security-hub-notifications/" title="Security Hub - Thông báo" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/2-introduction-to-threat-detection-and-response-services/2.1-aws-security-hub/2.1.5-security-hub-notifications/">
           <b> 2.1.5 </b> Security Hub - Thông báo
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/2-introduction-to-threat-detection-and-response-services/2.2-amazon-guardduty/" title="Amazon GuardDuty" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/2-introduction-to-threat-detection-and-response-services/2.2-amazon-guardduty/">
           <b> 2.2 </b> Amazon GuardDuty
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/vi/2-introduction-to-threat-detection-and-response-services/2.2-amazon-guardduty/2.2.1-guardduty-overview/" title="GuardDuty - Tổng quan" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/2-introduction-to-threat-detection-and-response-services/2.2-amazon-guardduty/2.2.1-guardduty-overview/">
           <b> 2.2.1 </b> GuardDuty - Tổng quan
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/2-introduction-to-threat-detection-and-response-services/2.2-amazon-guardduty/2.2.2-guardduty-findings/" title="GuardDuty - Phát hiện sai phạm" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/2-introduction-to-threat-detection-and-response-services/2.2-amazon-guardduty/2.2.2-guardduty-findings/">
           <b> 2.2.2 </b> GuardDuty - Phát hiện sai phạm
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/2-introduction-to-threat-detection-and-response-services/2.2-amazon-guardduty/2.2.3-guardduty-protection-plans/" title="GuardDuty - Kế hoạch bảo vệ" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/2-introduction-to-threat-detection-and-response-services/2.2-amazon-guardduty/2.2.3-guardduty-protection-plans/">
           <b> 2.2.3 </b> GuardDuty - Kế hoạch bảo vệ
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/2-introduction-to-threat-detection-and-response-services/2.2-amazon-guardduty/2.2.4-guardduty-building-your-own-threat-list/" title="GuardDuty - Xây dựng danh sách mối đe dọa của riêng bạn" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/2-introduction-to-threat-detection-and-response-services/2.2-amazon-guardduty/2.2.4-guardduty-building-your-own-threat-list/">
           <b> 2.2.4 </b> GuardDuty - Xây dựng danh sách mối đe dọa của riêng bạn
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/2-introduction-to-threat-detection-and-response-services/2.2-amazon-guardduty/2.2.5-guardduty-suppressing-findings/" title="GuardDuty - Ẩn phát hiện" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/2-introduction-to-threat-detection-and-response-services/2.2-amazon-guardduty/2.2.5-guardduty-suppressing-findings/">
           <b> 2.2.5 </b> GuardDuty - Ẩn phát hiện
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/2-introduction-to-threat-detection-and-response-services/2.2-amazon-guardduty/2.2.6-guradduty-pricing/" title="GuradDuty - Chi phí" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/2-introduction-to-threat-detection-and-response-services/2.2-amazon-guardduty/2.2.6-guradduty-pricing/">
           <b> 2.2.6 </b> GuradDuty - Chi phí
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/2-introduction-to-threat-detection-and-response-services/2.2-amazon-guardduty/2.2.7-guardduty-notifications/" title="GuardDuty - Thông báo" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/2-introduction-to-threat-detection-and-response-services/2.2-amazon-guardduty/2.2.7-guardduty-notifications/">
           <b> 2.2.7 </b> GuardDuty - Thông báo
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/2-introduction-to-threat-detection-and-response-services/2.2-amazon-guardduty/2.2.8-guardduty-retaining-findings/" title="GuardDuty - Giữ lại các phát hiện" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/2-introduction-to-threat-detection-and-response-services/2.2-amazon-guardduty/2.2.8-guardduty-retaining-findings/">
           <b> 2.2.8 </b> GuardDuty - Giữ lại các phát hiện
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/2-introduction-to-threat-detection-and-response-services/2.3-amazon-inspector/" title="Amazon Inspector" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/2-introduction-to-threat-detection-and-response-services/2.3-amazon-inspector/">
           <b> 2.3 </b> Amazon Inspector
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/vi/2-introduction-to-threat-detection-and-response-services/2.3-amazon-inspector/2.3.1-inspector-overview/" title="Inspector - Tổng quan" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/2-introduction-to-threat-detection-and-response-services/2.3-amazon-inspector/2.3.1-inspector-overview/">
           <b> 2.3.1 </b> Inspector - Tổng quan
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/2-introduction-to-threat-detection-and-response-services/2.3-amazon-inspector/2.3.2-inspector-dashboard/" title="Inspector - Bảng điều khiển" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/2-introduction-to-threat-detection-and-response-services/2.3-amazon-inspector/2.3.2-inspector-dashboard/">
           <b> 2.3.2 </b> Inspector - Bảng điều khiển
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/2-introduction-to-threat-detection-and-response-services/2.3-amazon-inspector/2.3.3-inspector-findings/" title="Inspector  - Phát hiện sai phạm" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/2-introduction-to-threat-detection-and-response-services/2.3-amazon-inspector/2.3.3-inspector-findings/">
           <b> 2.3.3 </b> Inspector  - Phát hiện sai phạm
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/2-introduction-to-threat-detection-and-response-services/2.3-amazon-inspector/2.3.4-inspector-vulnerability-database-search/" title="Inspector - Tìm kiếm trong cơ sở dữ liệu về lỗ hổng" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/2-introduction-to-threat-detection-and-response-services/2.3-amazon-inspector/2.3.4-inspector-vulnerability-database-search/">
           <b> 2.3.4 </b> Inspector - Tìm kiếm trong cơ sở dữ liệu về lỗ hổng
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/2-introduction-to-threat-detection-and-response-services/2.3-amazon-inspector/2.3.5-inspector-suppressing-findings/" title="Inspector - Ẩn phát hiện" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/2-introduction-to-threat-detection-and-response-services/2.3-amazon-inspector/2.3.5-inspector-suppressing-findings/">
           <b> 2.3.5 </b> Inspector - Ẩn phát hiện
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/2-introduction-to-threat-detection-and-response-services/2.3-amazon-inspector/2.3.6-inspector-pricing/" title="Inspector - Chi phí" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/2-introduction-to-threat-detection-and-response-services/2.3-amazon-inspector/2.3.6-inspector-pricing/">
           <b> 2.3.6 </b> Inspector - Chi phí
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/2-introduction-to-threat-detection-and-response-services/2.4-amazon-detective/" title="Amazon Detective" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/2-introduction-to-threat-detection-and-response-services/2.4-amazon-detective/">
           <b> 2.4 </b> Amazon Detective
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/vi/2-introduction-to-threat-detection-and-response-services/2.4-amazon-detective/2.4.1-detective-overview/" title="Detective - Tổng quan" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/2-introduction-to-threat-detection-and-response-services/2.4-amazon-detective/2.4.1-detective-overview/">
           <b> 2.4.1 </b> Detective - Tổng quan
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/2-introduction-to-threat-detection-and-response-services/2.4-amazon-detective/2.4.2-detective-summary/" title="Detective - Tóm tắt" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/2-introduction-to-threat-detection-and-response-services/2.4-amazon-detective/2.4.2-detective-summary/">
           <b> 2.4.2 </b> Detective - Tóm tắt
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/2-introduction-to-threat-detection-and-response-services/2.4-amazon-detective/2.4.3-detective-search/" title="Detective - Tìm kiếm" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/2-introduction-to-threat-detection-and-response-services/2.4-amazon-detective/2.4.3-detective-search/">
           <b> 2.4.3 </b> Detective - Tìm kiếm
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/2-introduction-to-threat-detection-and-response-services/2.4-amazon-detective/2.4.4-detective-investigations/" title="Detective - Điều tra" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/2-introduction-to-threat-detection-and-response-services/2.4-amazon-detective/2.4.4-detective-investigations/">
           <b> 2.4.4 </b> Detective - Điều tra
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/2-introduction-to-threat-detection-and-response-services/2.4-amazon-detective/2.4.5-detective-finding-groups/" title="Detective - Nhóm phát Hiện" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/2-introduction-to-threat-detection-and-response-services/2.4-amazon-detective/2.4.5-detective-finding-groups/">
           <b> 2.4.5 </b> Detective - Nhóm phát Hiện
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/2-introduction-to-threat-detection-and-response-services/2.4-amazon-detective/2.4.6-detective-pricing/" title="Detective - Chi phí" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/2-introduction-to-threat-detection-and-response-services/2.4-amazon-detective/2.4.6-detective-pricing/">
           <b> 2.4.6 </b> Detective - Chi phí
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/2-introduction-to-threat-detection-and-response-services/2.4-amazon-detective/2.4.7-detective-eks-audit-logs/" title="Detective - EKS Audit Logs" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/2-introduction-to-threat-detection-and-response-services/2.4-amazon-detective/2.4.7-detective-eks-audit-logs/">
           <b> 2.4.7 </b> Detective - EKS Audit Logs
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vi/3/" title="Tích hợp Dịch vụ AWS và Giải pháp Đối tác" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/3/">
           <b> 3. </b> Tích hợp Dịch vụ AWS và Giải pháp Đối tác
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/vi/3/3.1/" title="Tập trung các phát hiện từ các dịch vụ bảo mật AWS" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/3/3.1/">
           <b> 3.1. </b> Tập trung các phát hiện từ các dịch vụ bảo mật AWS
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/3/3.2/" title="Tổng hợp phát hiện từ nhiều tài khoản AWS" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/3/3.2/">
           <b> 3.2. </b> Tổng hợp phát hiện từ nhiều tài khoản AWS
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/3/3.3/" title="Tập hợp các phát hiện từ các giải pháp của đối tác AWS" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/3/3.3/">
           <b> 3.3. </b> Tập hợp các phát hiện từ các giải pháp của đối tác AWS
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/3/3.4/" title="Tổng hợp tìm kiếm qua các Region" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/3/3.4/">
           <b> 3.4. </b> Tổng hợp tìm kiếm qua các Region
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/3/3.5/" title="Xây dựng tích hợp Security Hub của riêng bạn" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/3/3.5/">
           <b> 3.5. </b> Xây dựng tích hợp Security Hub của riêng bạn
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vi/7/" title="Quản lý session logs" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/7/">
           <b> 4. </b> Quản lý session logs
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/vi/7/7.1/" title="Cập nhật IAM Role" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/7/7.1/">
           <b> 4.1 </b> Cập nhật IAM Role
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/7/7.2/" title="Tạo S3 Bucket" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/7/7.2/">
           <b> 4.2 </b> Tạo S3 Bucket
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/7/7.3/" title="Tạo S3 Gateway endpoint" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/7/7.3/">
           <b> 4.3 </b> Tạo S3 Gateway endpoint
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vi/4/" title="Quản lý và Ưu tiên các phát hiện bảo mật" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/4/">
           <b> 4. </b> Quản lý và Ưu tiên các phát hiện bảo mật
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/vi/4/4.1/" title="Tự động hóa uu tiên các phát hiện quy mô lớn bằng " class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/4/4.1/">
           <b> 4.1 </b> Tự động hóa uu tiên các phát hiện quy mô lớn bằng 
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/4/4.2/" title="Ẩn các phát hiện quy mô lớn bằng tự động hóa" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/4/4.2/">
           <b> 4.2 </b> Ẩn các phát hiện quy mô lớn bằng tự động hóa
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/4/4.3/" title="Sử dụng insights để ưu tiên và đo lường" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/4/4.3/">
           <b> 4.3 </b> Sử dụng insights để ưu tiên và đo lường
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vi/5/" title="Tự động hóa thông báo và ứng cứu" class="dd-item 
        parent
        
        
        ">
      <a href="//localhost:1313/vi/5/">
           <b> 5. </b> Tự động hóa thông báo và ứng cứu
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/vi/5/5.1/" title="Setting up notifications" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/5/5.1/">
           <b> 5.1 </b> Setting up notifications
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/5/5.2/" title="Set up a weekly vulnerability summary email" class="dd-item 
        
        active
        
        ">
      <a href="//localhost:1313/vi/5/5.2/">
           <b> 5.2 </b> Set up a weekly vulnerability summary email
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/5/5.3/" title="Automated Security Response on AWS" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/5/5.3/">
           <b> 5.3 </b> Automated Security Response on AWS
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/5/5.4/" title="Building your own automated response" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/5/5.4/">
           <b> 5.4 </b> Building your own automated response
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/5/5.5/" title="Enriching security findings with investigative data" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/5/5.5/">
           <b> 5.5 </b> Enriching security findings with investigative data
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vi/8/" title="Dọn dẹp tài nguyên  " class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/8/">
          <b>6. </b>Dọn dẹp tài nguyên  
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vi/6/" title="Port Forwarding" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/6/">
           <b> 6. </b> Port Forwarding
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/vi/6/6.1/" title="Cập nhật IAM Role" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/6/6.1/">
           <b> 4.1 </b> Cập nhật IAM Role
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/6/6.2/" title="Tạo S3 Bucket" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/6/6.2/">
           <b> 4.2 </b> Tạo S3 Bucket
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/6/6.3/" title="Tạo S3 Gateway endpoint" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/6/6.3/">
           <b> 4.3 </b> Tạo S3 Gateway endpoint
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/6/6.4/" title="Tạo S3 Gateway endpoint" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/6/6.4/">
           <b> 4.3 </b> Tạo S3 Gateway endpoint
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/6/6.5/" title="Tạo S3 Gateway endpoint" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/6/6.5/">
           <b> 4.3 </b> Tạo S3 Gateway endpoint
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/6/6.6/" title="Tạo S3 Gateway endpoint" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/6/6.6/">
           <b> 4.3 </b> Tạo S3 Gateway endpoint
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li> 
                  <a class="padding" href="https://www.facebook.com/groups/awsstudygroupfcj/"><i class='fab fa-facebook'></i> AWS Study Group</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="prefooter">
      <hr/>
      <ul>
      
        <li>
          <a class="padding">
            <i class="fas fa-language fa-fw"></i>
          <div class="select-style">
            <select id="select-language" onchange="location = this.value;">
          
          
          
              
              
                  
                    
                    
                      <option id="en" value="//localhost:1313/5/5.2/">English</option>
                    
                  
              
                  
              
          
              
              
                  
              
                  
                    
                    
                      <option id="vi" value="//localhost:1313/vi/5/5.2/" selected>Tiếng Việt</option>
                    
                  
              
          
        </select>
        <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
          width="255px" height="255px" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255;" xml:space="preserve">
          <g>
            <g id="arrow-drop-down">
              <polygon points="0,63.75 127.5,191.25 255,63.75 		" />
            </g>
          </g>
        </svg>
        </div>
        </a>
        </li>
      
      
      
        <li><a class="padding" href="#" data-clear-history-toggle=""><i class="fas fa-history fa-fw"></i> Clear History</a></li>
      
      </ul>
    </section>
    
    <section id="footer">
      <left>
    
     <b> Workshop</b> <br>
    <img src="https://hitwebcounter.com/counter/counter.php?page=7920860&style=0038&nbdigits=9&type=page&initCount=0" title="Migrate" Alt="web counter"   border="0" /></a>  <br>
     <b> <a href="https://cloudjourney.awsstudygroup.com/">Cloud Journey</a></b> <br>
    <img src="https://hitwebcounter.com/counter/counter.php?page=7830807&style=0038&nbdigits=9&type=page&initCount=0" title="Total CLoud Journey" Alt="web counter"   border="0"   />
     
</left>
<left>
    <br>
    <br>
        <b> Last Updated </b> <br>
        <i><font color=orange>19-08-2024</font></i>
    </left>
    <left>
        <br>
        <br>
            <b> Team </b> <br>
           
            <i><a href="https://www.linkedin.com/in/anhpnh"  style="color:orange">Hải Anh </a> <br>
                
               
        </i>
        </left>

<script async defer src="https://buttons.github.io/buttons.js"></script>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='//localhost:1313/vi/'>Threat Detection & Response Workshop</a> > <a href='//localhost:1313/vi/5/'>Tự động hóa thông báo và ứng cứu</a> > Set up a weekly vulnerability summary email
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Set up a weekly vulnerability summary email
            </h1>
          

        



	
<div class="notices info" ><p><strong>Scenario / Problem Statement</strong>: Bạn đã được giao nhiệm vụ thiết lập một email tóm tắt hàng tuần để nêu bật những thông tin chính dựa trên dữ liệu mà bạn đang tổng hợp trong <strong>Security Hub</strong>. Ban đầu, email cần nêu bật tình hình bảo mật hiện tại của bạn, các lỗ hổng bảo mật ảnh hưởng đến nhiều instances và images nhất, và các phát hiện có mức độ ưu tiên cao nhất.</p>
</div>


<div class="notices warning" ><p><strong>Lưu ý cho Người Tham Gia</strong>: Bạn phải hoàn thành module có tên &ldquo;Sử dụng insights để ưu tiên và đo lường&rdquo; trước khi bắt đầu module này.</p>
</div>

<p>Trong kịch bản này, bạn sẽ viết một <strong>Lambda function</strong> để gọi <strong>Security Hub</strong> và <strong>Amazon Inspector APIs</strong> để lấy các chi tiết cần thiết. Bạn sẽ sử dụng <strong>EventBridge</strong> để gọi <strong>Lambda</strong> hàng tuần, và bạn sẽ đăng ký nhận email bằng cách sử dụng <strong>AWS Simple Notification Service</strong>.</p>
<p><strong>Amazon Inspector</strong> là một dịch vụ quản lý lỗ hổng tự động liên tục quét các khối lượng công việc <strong>AWS</strong> để tìm các lỗ hổng phần mềm và phơi nhiễm mạng không mong muốn. Các phát hiện về lỗ hổng từ <strong>Inspector</strong> được bao gồm trong email tóm tắt để cung cấp một cái nhìn toàn diện hơn về các lỗ hổng có thể tồn tại trong tài khoản mà email tóm tắt đang được tạo ra.</p>
<h4 id="cấu-hình-amazon-simple-notification-service-topic">Cấu hình Amazon Simple Notification Service topic</h4>
<ol>
<li>
<p>Điều hướng đến <a href="https://console.aws.amazon.com/sns/v3/home">Amazon SNS</a></p>
</li>
<li>
<p>Nhấp vào <strong>Topics</strong> trong bảng điều hướng bên trái.</p>
</li>
<li>
<p>Nhấp vào <strong>Create topic</strong>.</p>
</li>
<li>
<p>Chọn loại <strong>Standard</strong>.</p>
</li>
<li>
<p>Đặt tên là <strong>weekly-vulnerability-email</strong>. Để nguyên mọi thứ khác và nhấp vào <strong>Create topic</strong> ở cuối trang. Điều này sẽ tạo chủ đề.</p>
</li>
<li>
<p>Ghi chú lại <strong>SNS Topic ARN</strong>. Bạn sẽ cần đến nó sau này. <strong>ARN</strong> trông giống như &ldquo;arn:aws:sns:us-******:############:weekly-vulnerability-email&rdquo;.</p>
</li>
</ol>
<h4 id="subscribe-to-the-topic">Subscribe to the topic</h4>
<ol start="7">
<li>
<p>Từ trang <strong>weekly-vulnerability-email topic</strong>, nhấp vào <strong>Create subscription</strong>.</p>
</li>
<li>
<p>Trên trang <strong>Create subscription</strong>, dưới <strong>Protocol</strong>, chọn <strong>email</strong>.</p>
</li>
<li>
<p>Trên trang <strong>Create subscription</strong>, dưới <strong>Endpoint</strong>, nhập địa chỉ email mà bạn muốn sử dụng cho workshop này để nhận thông báo. Bạn có thể hủy đăng ký sau khi hoàn thành workshop.</p>
</li>
<li>
<p>Nhấp vào <strong>Create subscription</strong>.</p>
</li>
<li>
<p>Trong vài phút, bạn sẽ nhận được một email tại địa chỉ email bạn đã nhập. Xác nhận đăng ký bằng cách nhấp vào &ldquo;Confirm subscription&rdquo; trong email.</p>
</li>
</ol>
<h4 id="create-the-lambda-function-to-author-the-email">Create the Lambda function to author the email</h4>
<ol start="12">
<li>
<p>Đi đến <a href="https://console.aws.amazon.com/lambda/home?#/create/function?intent=authorFromScratch">https://console.aws.amazon.com/lambda/home?#/create/function?intent=authorFromScratch</a>
Trên trang <strong>Create function</strong>, đặt <strong>Function name</strong> là <strong>weekly-vulnerability-email</strong> và chọn <strong>Node.js 20.x</strong> cho <strong>Runtime</strong>.</p>
</li>
<li>
<p>Nhấp vào <strong>Create function</strong>.
Sao chép và dán đoạn mã sau vào trình soạn thảo được gắn nhãn <strong>Code source</strong> (xóa mã hiện có).</p>
</li>
</ol>
<pre tabindex="0"><code>&#39;use strict&#39;;
import {
    SecurityHubClient,
    GetInsightsCommand,
    GetInsightResultsCommand
} from &#34;@aws-sdk/client-securityhub&#34;;

import {
    Inspector2Client,
    ListFindingAggregationsCommand
} from &#34;@aws-sdk/client-inspector2&#34;;

import {
    SNSClient,
    PublishCommand
} from &#34;@aws-sdk/client-sns&#34;;

const securityhubClient = new SecurityHubClient();
const inspectorClient = new Inspector2Client();
const snsClient = new SNSClient();

export const handler = async (event, context) =&gt; {
    try {
        let msg = &#39;&#39;;
        const getInsights = new GetInsightsCommand({});
        const allCustomInsights = await securityhubClient.send(getInsights);
        const insightsToFetch = [
            ...allCustomInsights.Insights, // include all custom insights
            ...[
                {
                    Name: &#34;Top products by counts of findings&#34;,
                    InsightArn: &#34;arn:aws:securityhub:::insight/securityhub/default/28&#34;
                }, // include default insight 28
                {
                    Name: &#34;Severity by counts of findings&#34;,
                    InsightArn: &#34;arn:aws:securityhub:::insight/securityhub/default/29&#34;
                } // include default insight 29
            ]
        ];

        const insightsToFetchResults = await Promise.all(insightsToFetch.map(async (o, i) =&gt; {
            let getInsightResults = new GetInsightResultsCommand({InsightArn: o.InsightArn});
            let insightResults = await securityhubClient.send(getInsightResults);
            return {...insightResults, Name: o.Name};
        }));
        
        const results = insightsToFetchResults.forEach((o,i) =&gt; {
            msg += `------------------------------------\nInsight: ${o.Name}\n------------------------------------\n`;
            o.InsightResults.ResultValues.slice(0,9).forEach((o,i) =&gt; {
                msg += `${o.GroupByAttributeValue}: ${o.Count}\n`;
            }); 
            msg += `\nFollow the link below to see all ${o.InsightResults.ResultValues.length} results from this insight in Security Hub:\n`;
            msg += `https://us-east-1.console.aws.amazon.com/securityhub/home?region=us-east-1#/insights/${o.InsightResults.InsightArn}\n\n`;
        });

        const listFindingAggregationsInput = {
            &#34;aggregationType&#34;: &#34;PACKAGE&#34;,
            &#34;maxResults&#34;: 5,
            &#34;aggregationRequest&#34;: {
                &#34;packageAggregation&#34;: {
                    &#34;sortOrder&#34;: &#34;DESC&#34;,
                    &#34;sortBy&#34;: &#34;CRITICAL&#34;
                }
            }
        };
        const listFindingAggregations = new ListFindingAggregationsCommand(listFindingAggregationsInput);
        const inspectorFindingAggregations = await inspectorClient.send(listFindingAggregations);
        msg += &#39;\n------------------------------------\nSoftware vulnerabilities impacting the most instances and images:\n------------------------------------\n&#39;;
        inspectorFindingAggregations.responses.forEach(pkg =&gt; {
            msg += `Package: ${pkg.packageAggregation.packageName}:\nCounts of findings by severity:\n`;
            msg += `Critical: ${pkg.packageAggregation.severityCounts.critical}, `;
            msg += `High: ${pkg.packageAggregation.severityCounts.high}, `;
            msg += `Medium: ${pkg.packageAggregation.severityCounts.medium} \n\n`;
        });

        const emailTopicArn = process.env[&#39;emailTopicArn&#39;];
        const messageInput = {
            TopicArn: emailTopicArn,
            Message: msg,
            Subject: &#34;Weekly Vulnerability Report&#34;,
        };
        const publish = new PublishCommand(messageInput);
        const publishResponse = await snsClient.send(publish);

        return `Successfully sent message id ${publishResponse.MessageId}`;
    } catch (error) {
        console.error(&#39;Error:&#39;, error);
        throw error;
    }
}
</code></pre><ol start="16">
<li>
<p>Sau đó từ menu <strong>Code source</strong>, nhấp vào <strong>File</strong> rồi <strong>Save</strong>. Sau đó nhấp vào nút <strong>Deploy</strong>.</p>
</li>
<li>
<p>Lưu ý ở dòng 76 của mã <strong>Lambda</strong>, chúng ta tham chiếu đến một biến môi trường nơi chúng ta lưu trữ ARN của <strong>SNS Topic</strong>. Chúng ta cần cấu hình điều đó. Ngay phía trên phần <strong>Code source</strong>, nhấp vào tab <strong>Configuration</strong>. Sau đó, nhấp vào <strong>Environment Variables</strong> từ bảng điều hướng bên trái.</p>
</li>
<li>
<p>Nhấp vào <strong>Edit</strong> dưới phần <strong>Environment Variables</strong>. Sau đó nhấp vào <strong>Add environment variable</strong>.</p>
</li>
<li>
<p>Nhập &ldquo;<strong>emailTopicArn</strong>&rdquo; dưới <strong>Key</strong>. Nhập ARN của <strong>SNS Topic</strong> mà bạn đã tạo trong bước 6 làm <strong>Value</strong>. Đảm bảo không có khoảng trắng.</p>
</li>
<li>
<p>Nhấp vào <strong>Save</strong>.</p>
</li>
</ol>
<h4 id="set-the-permissions-of-the-lambda-function">Set the permissions of the Lambda function</h4>
<ol start="21">
<li>
<p>Bây giờ chúng ta cần cấu hình quyền cho <strong>Lambda function</strong> để nó có thể thực thi các lệnh cần thiết để gửi email của chúng ta. Dưới cùng tab <strong>Configuration</strong>, nhấp vào <strong>Permissions</strong> từ bảng điều hướng bên trái. Chúng ta cần sửa đổi vai trò thực thi cho <strong>Lambda function</strong> này.</p>
</li>
<li>
<p>Nhấp vào <strong>Role name</strong>. Tên này sẽ bắt đầu bằng &ldquo;weekly-vulnerability-email-role-&rdquo;. Điều này sẽ đưa bạn đến vai trò trong <strong>Identity and Access Management (IAM)</strong> console.</p>
</li>
<li>
<p>Từ trang <strong>Role</strong>, nhấp vào nút <strong>Add permissions</strong> và chọn <strong>Create inline policy</strong>.</p>
</li>
<li>
<p>Trên trang <strong>Create policy</strong>, nhấp vào tab <strong>JSON</strong>. Sau đó thay thế chính sách hiện tại bằng chính sách sau. Chính sách này cấp quyền cho <strong>Lambda function</strong> để truy xuất thông tin về <strong>Security Hub insights</strong>, truy xuất các phát hiện về lỗ hổng từ <strong>Inspector</strong>, và khả năng gửi tin nhắn đến <strong>SNS</strong>. Trong workshop này, chúng ta sẽ đơn giản cho phép <strong>Lambda function</strong> của chúng ta gửi tin nhắn đến bất kỳ <strong>SNS Topic</strong> nào, nhưng trong bất kỳ môi trường khác, tốt nhất là giới hạn điều này cho các ARN cụ thể.</p>
</li>
</ol>
<pre tabindex="0"><code>{
	&#34;Version&#34;: &#34;2012-10-17&#34;,
	&#34;Statement&#34;: [
		{
			&#34;Effect&#34;: &#34;Allow&#34;,
			&#34;Action&#34;: [
				&#34;securityhub:GetInsightResults&#34;,
				&#34;securityhub:GetInsightFindingTrend&#34;,
				&#34;inspector2:ListFindingAggregations&#34;,
				&#34;sns:Publish&#34;,
				&#34;securityhub:GetInsights&#34;
			],
			&#34;Resource&#34;: &#34;*&#34;
		}
	]
}
</code></pre><ol start="25">
<li>
<p>Nhấp vào nút <strong>Next</strong>.</p>
</li>
<li>
<p>Đặt tên cho chính sách của bạn là <em>AllowSNSPublishAndInspectorList</em> và nhấp vào <strong>Create policy</strong>.</p>
</li>
</ol>
<h4 id="set-timeout-of-the-lambda-function">Set timeout of the Lambda function</h4>
<ol start="27">
<li>
<p>Bây giờ chúng ta cần cấu hình thời gian chờ của <strong>Lambda function</strong> để nó có đủ thời gian thực thi tất cả các lệnh cần thiết để gửi email của chúng ta. Dưới cùng tab <strong>Configuration</strong>, nhấp vào <strong>General Configuration</strong> từ bảng điều hướng bên trái.</p>
</li>
<li>
<p>Nhấp vào <strong>Edit</strong>.</p>
</li>
<li>
<p>Đặt <strong>Timeout</strong> là <strong>1 min 0 sec</strong>.</p>
</li>
<li>
<p>Nhấp vào <strong>Save</strong>.</p>
</li>
</ol>
<h4 id="test-the-vulnerability-summary-email">Test the vulnerability summary email</h4>
<ol start="31">
<li>
<p>Chúng ta đã sẵn sàng để kiểm tra email tóm tắt lỗ hổng! Quay lại <a href="https://us-east-1.console.aws.amazon.com/lambda/home?region=us-east-1#/functions/weekly-vulnerability-email?tab=code">Lambda console</a> và mở chức năng mà bạn đã tạo.</p>
</li>
<li>
<p>Bên cạnh phần <strong>Code source</strong>, nhấp vào <strong>Test</strong> dropdown và chọn <strong>Configure test event</strong>. Một cửa sổ Configure test event sẽ mở ra.</p>
</li>
<li>
<p>Dưới <strong>Event name</strong>, nhập &ldquo;<strong>Generate-Email</strong>&rdquo;. Sau đó nhấp vào <strong>Save</strong>. Chúng ta không cần lo lắng về <strong>Event JSON</strong> vì chúng ta không sử dụng nó trong chức năng của mình. Bạn sẽ thấy một biểu ngữ xuất hiện thông báo &ldquo;The test event Generate-Email was successfully saved.&rdquo;</p>
</li>
<li>
<p>Nhấp vào <strong>Test</strong> một lần nữa để chạy thử nghiệm bằng cách sử dụng cấu hình của bạn. Bạn sẽ thấy kết quả thực thi dưới phần <strong>Code Source</strong>. Trong vài phút, bạn sẽ nhận được một email với tóm tắt lỗ hổng của mình!</p>
</li>
</ol>

<div class="notices warning" ><p><strong>Lưu ý cho Người Tham Gia</strong>: Nếu bạn không nhận được email, hãy kiểm tra kết quả thực thi để tìm lỗi. Đảm bảo rằng ARN của <strong>SNS Topic</strong> mà bạn đã cấu hình biến môi trường kết thúc bằng &ldquo;weekly-vulnerability-email&rdquo;. Nếu có bất kỳ ký tự nào sau &ldquo;email&rdquo;, hãy xóa chúng và lưu biến môi trường. Sau đó thử lại.</p>
</div>

<h4 id="schedule-the-weekly-vulnerability-summary-email-with-eventbridge">Schedule the weekly vulnerability summary email with EventBridge</h4>
<ol start="35">
<li>
<p>Cuối cùng, chúng ta cần tạo một <strong>EventBridge rule</strong> sẽ gọi <strong>Lambda function</strong> mà chúng ta đã tạo hàng tuần. Mở <strong>EventBridge</strong>. <a href="https://us-east-1.console.aws.amazon.com/events/home">https://us-east-1.console.aws.amazon.com/events/home</a></p>
</li>
<li>
<p>Chọn <strong>EventBridge Schedule</strong> ở bên phải. Nhấp vào <strong>Create schedule</strong>.</p>
</li>
<li>
<p>Trên trang <strong>Specify schedule detail</strong>, đặt tên rule của bạn là <em>weekly-vulnerability-email</em>.</p>
</li>
<li>
<p>Dưới <strong>Schedule pattern</strong> chọn &ldquo;<strong>Recurring schedule</strong>&rdquo;.</p>
</li>
<li>
<p>Để nguyên &ldquo;<strong>Cron-based schedule</strong>&rdquo; được chọn.</p>
</li>
<li>
<p>Chúng ta sẽ lên lịch email mỗi thứ Hai lúc 7 giờ sáng CDT. Dưới <strong>Cron expression</strong>, đặt <strong>cron( 0 12 ? * 2 * )</strong>. Chọn <strong>Local time zone</strong> từ danh sách thả xuống. Bạn sẽ thấy một bản xem trước của <strong>Next 10 trigger date(s)</strong>.</p>
</li>
<li>
<p>Dưới &ldquo;<strong>Flexible time window</strong>&rdquo;, chọn &ldquo;<strong>Off</strong>&rdquo;. Sau đó nhấp vào <strong>Next</strong>.</p>
</li>
<li>
<p>Trên bước <strong>Select target</strong>, chọn <strong>AWS Lambda - Invoke</strong>. Sau đó chọn &ldquo;weekly-vulnerability-email&rdquo; từ danh sách thả xuống <strong>Lambda function</strong>. Nhấp vào <strong>Next</strong>.</p>
</li>
<li>
<p>Trên bước <strong>Settings</strong>, nhấp vào <strong>Next</strong>.</p>
</li>
<li>
<p>Trên bước <strong>Review and create schedule</strong>, nhấp vào <strong>Create schedule</strong>.</p>
</li>
</ol>





<footer class=" footline" >
	
</footer>

        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="//localhost:1313/vi/5/5.1/" title="Setting up notifications"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="//localhost:1313/vi/5/5.3/" title="Automated Security Response on AWS" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="//localhost:1313/js/clipboard.min.js?1724017428"></script>
    <script src="//localhost:1313/js/perfect-scrollbar.min.js?1724017428"></script>
    <script src="//localhost:1313/js/perfect-scrollbar.jquery.min.js?1724017428"></script>
    <script src="//localhost:1313/js/jquery.sticky.js?1724017428"></script>
    <script src="//localhost:1313/js/featherlight.min.js?1724017428"></script>
    <script src="//localhost:1313/js/highlight.pack.js?1724017428"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="//localhost:1313/js/modernizr.custom-3.6.0.js?1724017428"></script>
    <script src="//localhost:1313/js/learn.js?1724017428"></script>
    <script src="//localhost:1313/js/hugo-learn.js?1724017428"></script>

    <link href="//localhost:1313/mermaid/mermaid.css?1724017428" rel="stylesheet" />
    <script src="//localhost:1313/mermaid/mermaid.js?1724017428"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-158079754-2', 'auto');
  ga('send', 'pageview');

</script>
  </body>
</html>
